{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 20:40:19"}
{"level":"info","message":"New user registered","service":"psycho-trainer","telegramId":434085347,"timestamp":"2025-06-10 20:40:20","userId":1,"username":"YourTerapist"}
{"error":"ETELEGRAM: 400 Bad Request: query is too old and response timeout expired or query ID is invalid","level":"error","message":"Callback query error","queryData":"show_saved_patients","service":"psycho-trainer","timestamp":"2025-06-10 20:40:20","userId":450994176}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 20:40:20"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 20:40:33","userId":1}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:40:33","userId":1}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":867,"responseTime":12717,"service":"psycho-trainer","timestamp":"2025-06-10 20:40:45"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":1,"service":"psycho-trainer","timestamp":"2025-06-10 20:40:45","uuid":"b5edf79c-c4fb-45a6-a1b8-70d94acb818e"}
{"level":"info","message":"Session created","patientId":1,"service":"psycho-trainer","sessionId":1,"sessionUuid":"231d6a98-fb5c-444d-8db5-9b4a49d36057","timestamp":"2025-06-10 20:40:45","userId":1}
{"level":"info","message":"New patient and session created","patientId":1,"service":"psycho-trainer","sessionId":1,"timestamp":"2025-06-10 20:40:45","userId":1}
{"level":"info","message":"New user registered","service":"psycho-trainer","telegramId":419203578,"timestamp":"2025-06-10 20:40:54","userId":2,"username":"alexandrabretsnajdrova"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:41:00","userId":1}
{"inputTokens":1110,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":152,"responseTime":3500,"service":"psycho-trainer","timestamp":"2025-06-10 20:41:03"}
{"cacheKey":"6de5b2cff1bff79e3d565bb9be0aca286023f58d7515b0f04efb785ccdff4e2b","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:41:03"}
{"level":"info","message":"Session message exchanged","messageCount":2,"patientResponseLength":330,"responseTime":3502,"service":"psycho-trainer","sessionUuid":"231d6a98-fb5c-444d-8db5-9b4a49d36057","therapistMessageLength":11,"timestamp":"2025-06-10 20:41:03"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 20:41:04","userId":2}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:41:04","userId":2}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":789,"responseTime":12685,"service":"psycho-trainer","timestamp":"2025-06-10 20:41:17"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":2,"service":"psycho-trainer","timestamp":"2025-06-10 20:41:17","uuid":"599ef780-503d-4634-82da-376d5c03a67d"}
{"level":"info","message":"Session created","patientId":2,"service":"psycho-trainer","sessionId":2,"sessionUuid":"9063126d-489d-4daa-9138-e822f2056a51","timestamp":"2025-06-10 20:41:17","userId":2}
{"level":"info","message":"New patient and session created","patientId":2,"service":"psycho-trainer","sessionId":2,"timestamp":"2025-06-10 20:41:17","userId":2}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:42:14","userId":1}
{"inputTokens":1279,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":287,"responseTime":5885,"service":"psycho-trainer","timestamp":"2025-06-10 20:42:20"}
{"cacheKey":"624da9bcb38911b5c7eff08c89bc3ca567e6c7de5288730382bae9c11ef49e77","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:42:20"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":653,"responseTime":5886,"service":"psycho-trainer","sessionUuid":"231d6a98-fb5c-444d-8db5-9b4a49d36057","therapistMessageLength":33,"timestamp":"2025-06-10 20:42:20"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:42:38","userId":1}
{"inputTokens":1578,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":247,"responseTime":6077,"service":"psycho-trainer","timestamp":"2025-06-10 20:42:44"}
{"cacheKey":"27737cd60133b1af3abe62d8bbd5198c0762f70e71e8575c5cd7159215ef2bdf","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:42:44"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":566,"responseTime":6079,"service":"psycho-trainer","sessionUuid":"231d6a98-fb5c-444d-8db5-9b4a49d36057","therapistMessageLength":20,"timestamp":"2025-06-10 20:42:44"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 20:43:08","userId":1}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:43:08","userId":1}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":759,"responseTime":11384,"service":"psycho-trainer","timestamp":"2025-06-10 20:43:20"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":3,"service":"psycho-trainer","timestamp":"2025-06-10 20:43:20","uuid":"f8d06bf7-f7b3-47af-b9d6-a3db0eee5d92"}
{"level":"info","message":"Session created","patientId":3,"service":"psycho-trainer","sessionId":3,"sessionUuid":"6796ac51-a70f-4186-963e-efa862310a8e","timestamp":"2025-06-10 20:43:20","userId":1}
{"level":"info","message":"New patient and session created","patientId":3,"service":"psycho-trainer","sessionId":3,"timestamp":"2025-06-10 20:43:20","userId":1}
{"level":"info","message":"New user registered","service":"psycho-trainer","telegramId":1106484133,"timestamp":"2025-06-10 20:48:48","userId":3,"username":"ta_yakimchuk"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 20:49:18","userId":3}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:49:18","userId":3}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":755,"responseTime":11531,"service":"psycho-trainer","timestamp":"2025-06-10 20:49:30"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":4,"service":"psycho-trainer","timestamp":"2025-06-10 20:49:30","uuid":"a642b3da-5792-4fc1-9027-80cbb2a9f0cd"}
{"level":"info","message":"Session created","patientId":4,"service":"psycho-trainer","sessionId":4,"sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","timestamp":"2025-06-10 20:49:30","userId":3}
{"level":"info","message":"New patient and session created","patientId":4,"service":"psycho-trainer","sessionId":4,"timestamp":"2025-06-10 20:49:30","userId":3}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 20:50:20"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"92MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 20:50:20","uptime":"10min"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:50:47","userId":3}
{"inputTokens":1042,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":214,"responseTime":6859,"service":"psycho-trainer","timestamp":"2025-06-10 20:50:54"}
{"cacheKey":"ee37f2369462c6146ef66d0d4bf0e8e191a953dfabb6250db234828edb0b6119","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:50:54"}
{"level":"info","message":"Session message exchanged","messageCount":2,"patientResponseLength":479,"responseTime":6861,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":51,"timestamp":"2025-06-10 20:50:54"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:52:02","userId":3}
{"inputTokens":1284,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":350,"responseTime":7628,"service":"psycho-trainer","timestamp":"2025-06-10 20:52:10"}
{"cacheKey":"2765c25856f41c09cd362267cafbb425c445120b9ef68f82da154b1b89950d47","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:52:10"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":783,"responseTime":7630,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":61,"timestamp":"2025-06-10 20:52:10"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:53:53","userId":3}
{"inputTokens":1691,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":321,"responseTime":6254,"service":"psycho-trainer","timestamp":"2025-06-10 20:53:59"}
{"cacheKey":"139c1d1b19bcf9173a8edc979ea6c40228aca7aeebf25edea6b69e9f7f581b09","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:53:59"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":797,"responseTime":6255,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":126,"timestamp":"2025-06-10 20:53:59"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:55:46","userId":3}
{"inputTokens":2068,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":395,"responseTime":8619,"service":"psycho-trainer","timestamp":"2025-06-10 20:55:55"}
{"cacheKey":"85ac8ba062f923a59696ae2cb82051c80711e2294a57a2c1a80758eff3bad6f7","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:55:55"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":878,"responseTime":8620,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":131,"timestamp":"2025-06-10 20:55:55"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:56:56","userId":3}
{"inputTokens":2480,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":357,"responseTime":8194,"service":"psycho-trainer","timestamp":"2025-06-10 20:57:04"}
{"cacheKey":"1d32ff1b5906f7abd7ee1800956a1f2ce6a222e0961d8c6024cdb5e709f8dde1","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 20:57:04"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":794,"responseTime":8197,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":30,"timestamp":"2025-06-10 20:57:04"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 20:59:57","userId":3}
{"inputTokens":2942,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":370,"responseTime":7826,"service":"psycho-trainer","timestamp":"2025-06-10 21:00:05"}
{"cacheKey":"c3fbd762460bf9d8965d5f57a65c7e910c7d0a7cc5425848ebd3776c6eddb967","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:00:05"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":860,"responseTime":7829,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":246,"timestamp":"2025-06-10 21:00:05"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 21:00:20"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"94MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 21:00:20","uptime":"20min"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:03:46","userId":3}
{"inputTokens":3485,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":377,"responseTime":7426,"service":"psycho-trainer","timestamp":"2025-06-10 21:03:54"}
{"cacheKey":"cfc12072cd47c7b80bc4accb9b6ae6b319d489f0af3d95ed65aca2e49b49435d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:03:54"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":872,"responseTime":7428,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":425,"timestamp":"2025-06-10 21:03:54"}
{"level":"info","message":"New user registered","service":"psycho-trainer","telegramId":851964916,"timestamp":"2025-06-10 21:06:37","userId":5,"username":"Sveta_Seryakova"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":15,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:06:55","userId":3}
{"inputTokens":3982,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":361,"responseTime":7791,"service":"psycho-trainer","timestamp":"2025-06-10 21:07:03"}
{"cacheKey":"45a857e75a42f69c0e868303c7d7fd586d8f1bf5a80be87a14634f4be219a682","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:07:03"}
{"level":"info","message":"Session message exchanged","messageCount":16,"patientResponseLength":853,"responseTime":7794,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":278,"timestamp":"2025-06-10 21:07:03"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":17,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:08:42","userId":3}
{"inputTokens":4407,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":317,"responseTime":7363,"service":"psycho-trainer","timestamp":"2025-06-10 21:08:50"}
{"cacheKey":"9470ea9d5bd9ceaf354487509f9b2b2f2281c0d831be2e80730b3601a08c133b","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:08:50"}
{"level":"info","message":"Session message exchanged","messageCount":18,"patientResponseLength":745,"responseTime":7364,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":149,"timestamp":"2025-06-10 21:08:50"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 21:09:42","userId":1}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:09:42","userId":1}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":741,"responseTime":10765,"service":"psycho-trainer","timestamp":"2025-06-10 21:09:53"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":5,"service":"psycho-trainer","timestamp":"2025-06-10 21:09:53","uuid":"4c5792b4-3b97-4bc2-91d3-f45d7f7bb819"}
{"level":"info","message":"Session created","patientId":5,"service":"psycho-trainer","sessionId":5,"sessionUuid":"cd4b5bad-9a05-4f46-b328-d2a85228508a","timestamp":"2025-06-10 21:09:53","userId":1}
{"level":"info","message":"New patient and session created","patientId":5,"service":"psycho-trainer","sessionId":5,"timestamp":"2025-06-10 21:09:53","userId":1}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 21:10:20"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"96MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 21:10:20","uptime":"30min"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":19,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:10:42","userId":3}
{"inputTokens":4815,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":346,"responseTime":7749,"service":"psycho-trainer","timestamp":"2025-06-10 21:10:50"}
{"cacheKey":"d04d0a30de146ba97ec2c83afe97232d641a48b3a305eee4206e9ac928672cb1","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:10:50"}
{"level":"info","message":"Session message exchanged","messageCount":20,"patientResponseLength":801,"responseTime":7751,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":197,"timestamp":"2025-06-10 21:10:50"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":21,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:12:42","userId":3}
{"inputTokens":5260,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":293,"responseTime":5618,"service":"psycho-trainer","timestamp":"2025-06-10 21:12:48"}
{"cacheKey":"77e98fd767b8e34a6385be07e61094c9239e70440069c2b264c521b4b29d30ab","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:12:48"}
{"level":"info","message":"Session message exchanged","messageCount":22,"patientResponseLength":679,"responseTime":5619,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":195,"timestamp":"2025-06-10 21:12:48"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":23,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:15:26","userId":3}
{"inputTokens":5697,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":320,"responseTime":6606,"service":"psycho-trainer","timestamp":"2025-06-10 21:15:32"}
{"cacheKey":"6c71f57f5ff2c5b7943bb0f1349fe3e8ad5c953d916bcc457606fb253339b114","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:15:32"}
{"level":"info","message":"Session message exchanged","messageCount":24,"patientResponseLength":772,"responseTime":6607,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":322,"timestamp":"2025-06-10 21:15:33"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":25,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:17:49","userId":3}
{"inputTokens":6109,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":351,"responseTime":7253,"service":"psycho-trainer","timestamp":"2025-06-10 21:17:56"}
{"cacheKey":"18b7e051eeb53b207e2b014d5beeb1e6f8db39794e5e086d7e35dff088ebef4e","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:17:56"}
{"level":"info","message":"Session message exchanged","messageCount":26,"patientResponseLength":812,"responseTime":7254,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":203,"timestamp":"2025-06-10 21:17:56"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 21:20:20"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"96MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 21:20:20","uptime":"40min"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":27,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:20:30","userId":3}
{"inputTokens":6585,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":356,"responseTime":6999,"service":"psycho-trainer","timestamp":"2025-06-10 21:20:37"}
{"cacheKey":"c3fff7f33138aa13affe76a1b97f59c6e63b41292abcbc5a0deac4301adf4518","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:20:37"}
{"level":"info","message":"Session message exchanged","messageCount":28,"patientResponseLength":822,"responseTime":7001,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":266,"timestamp":"2025-06-10 21:20:37"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":29,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:22:53","userId":3}
{"inputTokens":7016,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":328,"responseTime":6644,"service":"psycho-trainer","timestamp":"2025-06-10 21:23:00"}
{"cacheKey":"a3e5df029520d015a193f1662e5d9b68078e3764590749563bbc2dae1ceb5210","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:23:00"}
{"level":"info","message":"Session message exchanged","messageCount":30,"patientResponseLength":779,"responseTime":6646,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":176,"timestamp":"2025-06-10 21:23:00"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":31,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:24:57","userId":3}
{"inputTokens":7428,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":275,"responseTime":5659,"service":"psycho-trainer","timestamp":"2025-06-10 21:25:03"}
{"cacheKey":"c91985c070e71a5fe2e0f8696f7cb1508b5960af10ac6ca12f59a626a5ea0891","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:25:03"}
{"level":"info","message":"Session message exchanged","messageCount":32,"patientResponseLength":652,"responseTime":5661,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":182,"timestamp":"2025-06-10 21:25:03"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":33,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:25:56","userId":3}
{"inputTokens":7723,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":96,"responseTime":3569,"service":"psycho-trainer","timestamp":"2025-06-10 21:25:59"}
{"cacheKey":"a711b2707ba0c5f1507425f88814d5e858d0a618b91a0a474fae8e4f24323388","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:25:59"}
{"level":"info","message":"Session message exchanged","messageCount":34,"patientResponseLength":224,"responseTime":3570,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","therapistMessageLength":42,"timestamp":"2025-06-10 21:25:59"}
{"duration":37,"level":"info","message":"Session ended","messageCount":34,"service":"psycho-trainer","sessionUuid":"c9183867-f2fe-49f7-9517-9ad42bd2fe59","timestamp":"2025-06-10 21:26:25"}
{"code":"EFATAL","error":"EFATAL: Error: read ECONNRESET","level":"error","message":"Polling error","service":"psycho-trainer","timestamp":"2025-06-10 21:26:30"}
{"level":"info","message":"Attempting to restart polling...","service":"psycho-trainer","timestamp":"2025-06-10 21:26:35"}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:26:35","userId":3}
{"level":"info","message":"Polling restarted successfully","service":"psycho-trainer","timestamp":"2025-06-10 21:26:47"}
{"inputTokens":7467,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":1084,"responseTime":16499,"service":"psycho-trainer","timestamp":"2025-06-10 21:26:51"}
{"cacheKey":"52e5c5cded523736eb0044b15de23ce469c9f94bd2d690e6d0c8be99e7131f99","cacheType":"analysis","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:26:51"}
{"content":"{\n  \"overall_rating\": 8,\n  \"strengths\": [\n    \"–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞\",\n    \"–£–º–µ–ª–∞—è —Ä–∞–±–æ—Ç–∞ —Å —ç–º–æ—Ü–∏—è–º–∏ –∫–ª–∏–µ–Ω—Ç–∞\",\n    \"–•–æ—Ä–æ—à–µ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤\",\n    \"–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞—Ñ–æ—Ä\",\n    \"–ì—Ä–∞–º–æ—Ç–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞\"\n  ],\n  \"areas_for_improvement\": [\n    \"–ú–æ–∂–Ω–æ –±–æ–ª—å—à–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ–ª–µ—Å–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞\",\n    \"–°—Ç–æ–∏—Ç –≥–ª—É–±–∂–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π –≤–æ –≤—Ä–µ–º—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞\",\n    \"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–µ—Ç–∫–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–µ–π —Ç–µ—Ä–∞–ø–∏–∏\",\n    \"–ú–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞\"\n  ],\n  \"specific_feedback\": {\n    \"rapport_building\": \"–¢–µ—Ä–∞–ø–µ–≤—Ç –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–∏–ª—Å—è —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π. –û—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–ª —Å —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º –∫–ª–∏–µ–Ω—Ç–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –µ–≥–æ —ç–º–æ—Ü–∏–π. –•–æ—Ä–æ—à–æ –æ—Ç–∑–µ—Ä–∫–∞–ª–∏–≤–∞–ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –¥–∞–≤–∞–ª –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è —á—É–≤—Å—Ç–≤.\",\n    \n    \"intervention_quality\": \"–ò–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–∏ –±—ã–ª–∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—ã –∏ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—é –∫–ª–∏–µ–Ω—Ç–∞. –û—Å–æ–±–µ–Ω–Ω–æ —É–¥–∞—á–Ω—ã–º –±—ã–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ—Ö–¥–Ω–µ–≤–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞. –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –¥–µ—Ç–∞–ª—å–Ω–µ–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–∞—Ö–∏ –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π.\",\n    \n    \"therapeutic_technique\": \"–¢–µ—Ä–∞–ø–µ–≤—Ç —É–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Å–∏—Ö–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ (—Ä–∞–±–æ—Ç–∞ —Å –¥–µ—Ç—Å–∫–∏–º –æ–ø—ã—Ç–æ–º) –∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏ (–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç). –•–æ—Ä–æ—à–µ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫. –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –±–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–ª–æ–º.\",\n    \n    \"ethical_considerations\": \"–°–æ–±–ª—é–¥–µ–Ω—ã –≤—Å–µ —ç—Ç–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã. –¢–µ—Ä–∞–ø–µ–≤—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–æ–∑–Ω–∞—á–∏–ª –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —ç–º–ø–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞. –ì—Ä–∞–º–æ—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–ª —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —É—è–∑–≤–∏–º–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç–∞.\"\n  },\n  \"recommendations\": [\n    \"–í–∫–ª—é—á–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ –º–∞–π–Ω–¥—Ñ—É–ª–Ω–µ—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–µ–≤–æ–≥–æ–π\",\n    \"–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–ª–µ—Å–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏\",\n    \"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏ —Ç–µ—Ä–∞–ø–∏–∏ –Ω–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—É\",\n    \"–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏\",\n    \"–í–∫–ª—é—á–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∫—Ä–∏—Ç–∏–∫–æ–º —á–µ—Ä–µ–∑ —Ç–µ—Ö–Ω–∏–∫–∏ –≥–µ—à—Ç–∞–ª—å—Ç-—Ç–µ—Ä–∞–ø–∏–∏\"\n  ],\n  \"key_moments\": [\n    \"–ú–æ–º–µ–Ω—Ç –æ—Å–æ–∑–Ω–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É –¥–µ—Ç—Å–∫–∏–º –æ–ø—ã—Ç–æ–º –∏ —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è\",\n    \"–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –æ—Ç–¥—ã—Ö—É –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–µ—Å—Å–∏–∏\",\n    \"–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —ç–º–æ—Ü–∏–π –∏ —Å–ª–µ–∑ –∫–∞–∫ –º–æ–º–µ–Ω—Ç –ø—Ä–æ—Ä—ã–≤–∞\",\n    \"–ü—Ä–∏–Ω—è—Ç–∏–µ –∏–¥–µ–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –∏ –ø–æ—è–≤–ª–µ–Ω–∏–µ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–∞ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–∞—Ö–∞\",\n    \"–§–∏–Ω–∞–ª—å–Ω–æ–µ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–π —É—è–∑–≤–∏–º–æ—Å—Ç–∏\"\n  ]\n}\n\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –°–µ—Å—Å–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞. –û—Å–æ–±–µ–Ω–Ω–æ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–ª–∏–µ–Ω—Ç —Å–º–æ–≥ –ø–µ—Ä–µ–π—Ç–∏ –æ—Ç –∂–µ—Å—Ç–∫–æ–≥–æ —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è –∫ –±–æ–ª–µ–µ –∞—É—Ç–µ–Ω—Ç–∏—á–Ω–æ–º—É —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—é. –†–∞–±–æ—Ç–∞ —Å –º–µ—Ç–∞—Ñ–æ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"—Ä–µ–∫–∞ —ç–º–æ—Ü–∏–π\") –±—ã–ª–∞ –æ—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞. –¢–µ—Ä–∞–ø–µ–≤—Ç –ø–æ–∫–∞–∑–∞–ª —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –º—è–≥–∫–∏–º –ø–æ–¥—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º.","error":"Unexpected non-whitespace character after JSON at position 2452 (line 41 column 1)","level":"error","message":"Failed to parse analysis JSON","service":"psycho-trainer","timestamp":"2025-06-10 21:26:51"}
{"error":"Failed to generate session analysis","level":"error","message":"Error analyzing session","service":"psycho-trainer","sessionId":4,"timestamp":"2025-06-10 21:26:51"}
{"error":"Failed to generate session analysis","level":"error","message":"Error analyzing session","service":"psycho-trainer","timestamp":"2025-06-10 21:26:51","userId":3}
{"cacheKey":"52e5c5cded523736eb0044b15de23ce469c9f94bd2d690e6d0c8be99e7131f99","level":"info","message":"Cache hit for Claude API request","service":"psycho-trainer","timestamp":"2025-06-10 21:26:58"}
{"content":"{\n  \"overall_rating\": 8,\n  \"strengths\": [\n    \"–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞\",\n    \"–£–º–µ–ª–∞—è —Ä–∞–±–æ—Ç–∞ —Å —ç–º–æ—Ü–∏—è–º–∏ –∫–ª–∏–µ–Ω—Ç–∞\",\n    \"–•–æ—Ä–æ—à–µ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤\",\n    \"–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞—Ñ–æ—Ä\",\n    \"–ì—Ä–∞–º–æ—Ç–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞\"\n  ],\n  \"areas_for_improvement\": [\n    \"–ú–æ–∂–Ω–æ –±–æ–ª—å—à–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ–ª–µ—Å–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞\",\n    \"–°—Ç–æ–∏—Ç –≥–ª—É–±–∂–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π –≤–æ –≤—Ä–µ–º—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞\",\n    \"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–µ—Ç–∫–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–µ–π —Ç–µ—Ä–∞–ø–∏–∏\",\n    \"–ú–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞\"\n  ],\n  \"specific_feedback\": {\n    \"rapport_building\": \"–¢–µ—Ä–∞–ø–µ–≤—Ç –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–∏–ª—Å—è —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π. –û—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–ª —Å —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º –∫–ª–∏–µ–Ω—Ç–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –µ–≥–æ —ç–º–æ—Ü–∏–π. –•–æ—Ä–æ—à–æ –æ—Ç–∑–µ—Ä–∫–∞–ª–∏–≤–∞–ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –¥–∞–≤–∞–ª –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è —á—É–≤—Å—Ç–≤.\",\n    \n    \"intervention_quality\": \"–ò–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–∏ –±—ã–ª–∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—ã –∏ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—é –∫–ª–∏–µ–Ω—Ç–∞. –û—Å–æ–±–µ–Ω–Ω–æ —É–¥–∞—á–Ω—ã–º –±—ã–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ—Ö–¥–Ω–µ–≤–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞. –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –¥–µ—Ç–∞–ª—å–Ω–µ–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–∞—Ö–∏ –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–≤–ª–∞–¥–∞–Ω–∏—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π.\",\n    \n    \"therapeutic_technique\": \"–¢–µ—Ä–∞–ø–µ–≤—Ç —É–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Å–∏—Ö–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ (—Ä–∞–±–æ—Ç–∞ —Å –¥–µ—Ç—Å–∫–∏–º –æ–ø—ã—Ç–æ–º) –∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏ (–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç). –•–æ—Ä–æ—à–µ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫. –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –±–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–ª–æ–º.\",\n    \n    \"ethical_considerations\": \"–°–æ–±–ª—é–¥–µ–Ω—ã –≤—Å–µ —ç—Ç–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã. –¢–µ—Ä–∞–ø–µ–≤—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–æ–∑–Ω–∞—á–∏–ª –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —ç–º–ø–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞. –ì—Ä–∞–º–æ—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–ª —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —É—è–∑–≤–∏–º–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç–∞.\"\n  },\n  \"recommendations\": [\n    \"–í–∫–ª—é—á–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ –º–∞–π–Ω–¥—Ñ—É–ª–Ω–µ—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–µ–≤–æ–≥–æ–π\",\n    \"–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–ª–µ—Å–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏\",\n    \"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏ —Ç–µ—Ä–∞–ø–∏–∏ –Ω–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—É\",\n    \"–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏\",\n    \"–í–∫–ª—é—á–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∫—Ä–∏—Ç–∏–∫–æ–º —á–µ—Ä–µ–∑ —Ç–µ—Ö–Ω–∏–∫–∏ –≥–µ—à—Ç–∞–ª—å—Ç-—Ç–µ—Ä–∞–ø–∏–∏\"\n  ],\n  \"key_moments\": [\n    \"–ú–æ–º–µ–Ω—Ç –æ—Å–æ–∑–Ω–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É –¥–µ—Ç—Å–∫–∏–º –æ–ø—ã—Ç–æ–º –∏ —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è\",\n    \"–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –æ—Ç–¥—ã—Ö—É –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–µ—Å—Å–∏–∏\",\n    \"–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —ç–º–æ—Ü–∏–π –∏ —Å–ª–µ–∑ –∫–∞–∫ –º–æ–º–µ–Ω—Ç –ø—Ä–æ—Ä—ã–≤–∞\",\n    \"–ü—Ä–∏–Ω—è—Ç–∏–µ –∏–¥–µ–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –∏ –ø–æ—è–≤–ª–µ–Ω–∏–µ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–∞ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–∞—Ö–∞\",\n    \"–§–∏–Ω–∞–ª—å–Ω–æ–µ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–π —É—è–∑–≤–∏–º–æ—Å—Ç–∏\"\n  ]\n}\n\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –°–µ—Å—Å–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞. –û—Å–æ–±–µ–Ω–Ω–æ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–ª–∏–µ–Ω—Ç —Å–º–æ–≥ –ø–µ—Ä–µ–π—Ç–∏ –æ—Ç –∂–µ—Å—Ç–∫–æ–≥–æ —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è –∫ –±–æ–ª–µ–µ –∞—É—Ç–µ–Ω—Ç–∏—á–Ω–æ–º—É —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—é. –†–∞–±–æ—Ç–∞ —Å –º–µ—Ç–∞—Ñ–æ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"—Ä–µ–∫–∞ —ç–º–æ—Ü–∏–π\") –±—ã–ª–∞ –æ—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞. –¢–µ—Ä–∞–ø–µ–≤—Ç –ø–æ–∫–∞–∑–∞–ª —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –º—è–≥–∫–∏–º –ø–æ–¥—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º.","error":"Unexpected non-whitespace character after JSON at position 2452 (line 41 column 1)","level":"error","message":"Failed to parse analysis JSON","service":"psycho-trainer","timestamp":"2025-06-10 21:26:58"}
{"error":"Failed to generate session analysis","level":"error","message":"Error analyzing session","service":"psycho-trainer","sessionId":4,"timestamp":"2025-06-10 21:26:58"}
{"error":"Failed to generate session analysis","level":"error","message":"Error analyzing session","service":"psycho-trainer","timestamp":"2025-06-10 21:26:58","userId":3}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 21:30:20"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"96MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 21:30:20","uptime":"50min"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 21:35:31","userId":1}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:35:31","userId":1}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":770,"responseTime":10698,"service":"psycho-trainer","timestamp":"2025-06-10 21:35:42"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":6,"service":"psycho-trainer","timestamp":"2025-06-10 21:35:42","uuid":"a44c082b-ef44-424e-aed4-b65d5e497886"}
{"level":"info","message":"Session created","patientId":6,"service":"psycho-trainer","sessionId":6,"sessionUuid":"ce5dacc9-3747-45f8-9c64-7a4d99ddc888","timestamp":"2025-06-10 21:35:42","userId":1}
{"level":"info","message":"New patient and session created","patientId":6,"service":"psycho-trainer","sessionId":6,"timestamp":"2025-06-10 21:35:42","userId":1}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 21:40:20"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"104MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 21:40:20","uptime":"60min"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:40:54","userId":1}
{"inputTokens":1850,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":296,"responseTime":5712,"service":"psycho-trainer","timestamp":"2025-06-10 21:40:59"}
{"cacheKey":"e339699cabf82a5e8a5dcffc1e5bd620fea7032d795dc8ccaca1df97625ed367","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:40:59"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":700,"responseTime":5713,"service":"psycho-trainer","sessionUuid":"231d6a98-fb5c-444d-8db5-9b4a49d36057","therapistMessageLength":59,"timestamp":"2025-06-10 21:40:59"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 21:50:20"}
{"database":null,"level":"info","memory":{"heapUsed":"25MB","rss":"104MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 21:50:20","uptime":"70min"}
{"duration":71,"level":"info","message":"Session ended","messageCount":8,"service":"psycho-trainer","sessionUuid":"231d6a98-fb5c-444d-8db5-9b4a49d36057","timestamp":"2025-06-10 21:51:39"}
{"level":"info","message":"New user registered","service":"psycho-trainer","telegramId":1814710184,"timestamp":"2025-06-10 21:55:56","userId":6,"username":"dryaginaveronika"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 21:56:17","userId":6}
{"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:56:17","userId":6}
{"inputTokens":593,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":770,"responseTime":11810,"service":"psycho-trainer","timestamp":"2025-06-10 21:56:29"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":7,"service":"psycho-trainer","timestamp":"2025-06-10 21:56:29","uuid":"238da7fd-8d04-49a8-9aae-48de5f2feef3"}
{"level":"info","message":"Session created","patientId":7,"service":"psycho-trainer","sessionId":7,"sessionUuid":"64ec9457-eee0-42d7-9d17-7a0ce52eaf23","timestamp":"2025-06-10 21:56:29","userId":6}
{"level":"info","message":"New patient and session created","patientId":7,"service":"psycho-trainer","sessionId":7,"timestamp":"2025-06-10 21:56:29","userId":6}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:58:38","userId":1}
{"inputTokens":1008,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":203,"responseTime":4223,"service":"psycho-trainer","timestamp":"2025-06-10 21:58:43"}
{"cacheKey":"2f2b810ac497f2798d70d56d10ad08a53a22c9548f4b62ee4d26ea5eb100f07f","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:58:43"}
{"level":"info","message":"Session message exchanged","messageCount":2,"patientResponseLength":459,"responseTime":4223,"service":"psycho-trainer","sessionUuid":"6796ac51-a70f-4186-963e-efa862310a8e","therapistMessageLength":10,"timestamp":"2025-06-10 21:58:43"}
{"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","service":"psycho-trainer","timestamp":"2025-06-10 21:59:29","userId":6}
{"inputTokens":1146,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":194,"responseTime":5557,"service":"psycho-trainer","timestamp":"2025-06-10 21:59:35"}
{"cacheKey":"128818a8cb289d4aef521a76216936366c407834ac070fda0ba31d6e14eed7b1","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 21:59:35"}
{"level":"info","message":"Session message exchanged","messageCount":2,"patientResponseLength":451,"responseTime":5558,"service":"psycho-trainer","sessionUuid":"64ec9457-eee0-42d7-9d17-7a0ce52eaf23","therapistMessageLength":240,"timestamp":"2025-06-10 21:59:35"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 22:00:20"}
{"database":null,"level":"info","memory":{"heapUsed":"26MB","rss":"105MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 22:00:20","uptime":"80min"}
{"level":"info","message":"Received SIGTERM, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:45"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:45"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:48"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:49"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:50"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:53"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:01:55"}
{"code":"ETELEGRAM","error":"ETELEGRAM: 409 Conflict: terminated by other getUpdates request; make sure that only one bot instance is running","level":"error","message":"Polling error","service":"psycho-trainer","timestamp":"2025-06-10 22:01:56"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:32","userId":6}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:44","userId":6}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:03:44","userId":6}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:44","userId":6}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:03:44","userId":6}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:05:06"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:05:06"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:05:07"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:05:09"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:05:19"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:05:23","userId":1}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":1,"service":"psycho-trainer","timestamp":"2025-06-10 22:05:23","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:05:23","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:05:23","userId":1}
{"level":"info","message":"Received SIGTERM, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:08:25"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:08:25"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:08:29"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:11:03"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:11:04","userId":1}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:11:04","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:11:04","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:11:04","userId":1}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:11:04"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:11:10","userId":1}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:11:10","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:11:10","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:11:10","userId":1}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:13:23"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:13:23"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:13:24"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:13:25"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:13:27"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:20:32"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:20:33"}
{"error":"Cannot read properties of undefined (reading 'toUpperCase')","level":"error","message":"Error showing settings","service":"psycho-trainer","timestamp":"2025-06-10 22:22:36","userId":1}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:22:45","userId":1}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:22:45","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:22:45","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:22:45","userId":1}
{"error":"Cannot read properties of undefined (reading 'toUpperCase')","level":"error","message":"Error showing settings","service":"psycho-trainer","timestamp":"2025-06-10 22:23:20","userId":1}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:26:33","userId":1}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:26:33","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:26:33","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:26:33","userId":1}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:50"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:50"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:52"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:56"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:57"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:57"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:57"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:26:58"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:26:58"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:27:01"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:27:11"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:27:19","userId":1}
{"error":"Cannot read properties of null (reading 'length')","level":"error","message":"Claude API error","messageCount":1,"responseTime":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:27:19","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating patient","service":"psycho-trainer","timestamp":"2025-06-10 22:27:19","userId":1}
{"error":"Claude API error: Cannot read properties of null (reading 'length')","level":"error","message":"Error creating new patient","service":"psycho-trainer","timestamp":"2025-06-10 22:27:19","userId":1}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:52"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:52"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:53"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:53"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:53"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:53"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:54"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:55"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:55"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:55"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:55"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:58"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:32:59"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:33:00"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:33:00"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:33:00"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:33:01"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:33:10"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-10 22:33:11"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:33:11"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:33:21"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:33:30","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-10 22:33:30"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:33:30"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-10 22:33:30","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1927,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-10 22:33:30"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":739,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":867,"responseTime":12857,"service":"psycho-trainer","timestamp":"2025-06-10 22:33:43"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–∞—Ç–æ–ª–∏–π –°–µ–º—ë–Ω–æ–≤–∏—á –ì—Ä–∏–Ω–±–µ—Ä–≥","patientId":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:33:43","uuid":"4a9b875d-cff8-43a7-88e3-a2715cfc95d0"}
{"level":"info","message":"Session created","patientId":8,"service":"psycho-trainer","sessionId":8,"sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","timestamp":"2025-06-10 22:33:43","userId":1}
{"level":"info","message":"New patient and session created","patientId":8,"service":"psycho-trainer","sessionId":8,"timestamp":"2025-06-10 22:33:43","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:34:10"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:34:10"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:34:10","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:34:10"}
{"cacheCreated":true,"cacheCreationTokens":1298,"cacheHit":false,"cacheReadTokens":0,"inputTokens":11,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":142,"responseTime":3802,"service":"psycho-trainer","timestamp":"2025-06-10 22:34:13"}
{"cacheKey":"180a1a9381749298b8fb3c5ae7a7f04714b3b342226a4c8b8b16e06d5836b6a3","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:34:13"}
{"level":"info","message":"Session message exchanged","messageCount":2,"patientResponseLength":321,"responseTime":3805,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":11,"timestamp":"2025-06-10 22:34:14"}
{"level":"info","message":"Analyzing cache points","messageCount":3,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:34:34"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:34:34"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:34:34","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:34:34"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":161,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":151,"responseTime":3581,"service":"psycho-trainer","timestamp":"2025-06-10 22:34:38"}
{"cacheKey":"10d2cac9fb53070e7c0089a139fef663ac659864bdd15cf1714c01bdf1af7762","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:34:38"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":370,"responseTime":3582,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":12,"timestamp":"2025-06-10 22:34:38"}
{"level":"info","message":"Analyzing cache points","messageCount":5,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:35:10"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:35:10"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:35:10","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:35:10"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":318,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":187,"responseTime":4591,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:15"}
{"cacheKey":"7f5bfaf0e6c3db163b3782eee1459619267351d14472354dd2959b2778aa5397","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:35:15"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":423,"responseTime":4592,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":9,"timestamp":"2025-06-10 22:35:15"}
{"level":"info","message":"Analyzing cache points","messageCount":7,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:35:26"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:26","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:26","totalTokens":1060}
{"cacheIndex":6,"level":"info","message":"Using cache point","messagesInCache":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:26","totalTokensCached":1060}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:35:26","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:35:26"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":511,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":153,"responseTime":4110,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:30"}
{"cacheKey":"3facd58d36861e46c55226cec47b5558d155091304d9a17e1968017d87147f48","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:35:30"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":353,"responseTime":4112,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":9,"timestamp":"2025-06-10 22:35:30"}
{"level":"info","message":"Analyzing cache points","messageCount":9,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:35:48"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:48","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:48","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:48","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:48","totalTokens":1152}
{"cacheIndex":8,"level":"info","message":"Using cache point","messagesInCache":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:48","totalTokensCached":1152}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:35:48","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:35:48"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":670,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":189,"responseTime":5829,"service":"psycho-trainer","timestamp":"2025-06-10 22:35:54"}
{"cacheKey":"12b2aa9846a77213d7fd9a158c2f9f3986178c98f8b021c826d40aeaacc0cdeb","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:35:54"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":445,"responseTime":5830,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":9,"timestamp":"2025-06-10 22:35:54"}
{"level":"info","message":"Analyzing cache points","messageCount":11,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:36:29"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokens":1278}
{"cacheIndex":10,"level":"info","message":"Using cache point","messagesInCache":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:29","totalTokensCached":1278}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:36:29","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:36:29"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":886,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":214,"responseTime":4956,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:34"}
{"cacheKey":"0bf48939c32af7b41ad2d1cb7a223f252f7bf50ecefca4670857d19da3e79b92","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:36:34"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":483,"responseTime":4957,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":55,"timestamp":"2025-06-10 22:36:35"}
{"level":"info","message":"Analyzing cache points","messageCount":13,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:36:54"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokens":1406}
{"cacheIndex":12,"level":"info","message":"Using cache point","messagesInCache":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:36:54","totalTokensCached":1406}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:36:54","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:36:54"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":1114,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":215,"responseTime":6199,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:00"}
{"cacheKey":"d34e59efe586c37d141046f820f6c5c6183bad1d9017adc151a77d16cf2a31e4","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:37:00"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":471,"responseTime":6200,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":27,"timestamp":"2025-06-10 22:37:00"}
{"level":"info","message":"Analyzing cache points","messageCount":15,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:37:42"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokens":1541}
{"cacheIndex":14,"level":"info","message":"Using cache point","messagesInCache":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:42","totalTokensCached":1541}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":15,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:37:42","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:37:42"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":1360,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":260,"responseTime":5706,"service":"psycho-trainer","timestamp":"2025-06-10 22:37:47"}
{"cacheKey":"148dbf710856edca910b7bdb627c174787e35ab9b2bb0135664412b6acc44292","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:37:47"}
{"level":"info","message":"Session message exchanged","messageCount":16,"patientResponseLength":599,"responseTime":5708,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":65,"timestamp":"2025-06-10 22:37:48"}
{"level":"info","message":"Analyzing cache points","messageCount":17,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:39:05"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1541}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è —Ä–æ–Ω—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –ø–æ–ª*\n\n–ß—Ç–æ?! –¢–û–õ–ò–ö...","messageIndex":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1691}
{"level":"info","message":"Cache point found","messageContent":"–•–ª–æ–ø–∞–µ—Ç –ø–æ –ø–ª–µ—á—É –¥–∞ —É—Å–ø–æ–∫–æ–π—Å—è —Ç—ã –Ω—É —É–±–µ–∂–∏—à—å —Å–µ–π—á–∞—Å...","messageIndex":16,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokens":1729}
{"cacheIndex":16,"level":"info","message":"Using cache point","messagesInCache":17,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:05","totalTokensCached":1729}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":17,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:39:05","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"},{"contentLength":599,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":149,"hasCache":false,"index":16,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:39:05"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":1688,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":270,"responseTime":5386,"service":"psycho-trainer","timestamp":"2025-06-10 22:39:11"}
{"cacheKey":"ac852d7da8062d23af5257de4d275103528b9af1d9ce06b08f916941fbc083ba","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:39:11"}
{"level":"info","message":"Session message exchanged","messageCount":18,"patientResponseLength":613,"responseTime":5388,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":149,"timestamp":"2025-06-10 22:39:11"}
{"level":"info","message":"Analyzing cache points","messageCount":19,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:40:01"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1541}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è —Ä–æ–Ω—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –ø–æ–ª*\n\n–ß—Ç–æ?! –¢–û–õ–ò–ö...","messageIndex":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1691}
{"level":"info","message":"Cache point found","messageContent":"–•–ª–æ–ø–∞–µ—Ç –ø–æ –ø–ª–µ—á—É –¥–∞ —É—Å–ø–æ–∫–æ–π—Å—è —Ç—ã –Ω—É —É–±–µ–∂–∏—à—å —Å–µ–π—á–∞—Å...","messageIndex":16,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1729}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è*\n\n–ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ...","messageIndex":17,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1883}
{"level":"info","message":"Cache point found","messageContent":"–¢–∞–∫ –º—ã –æ–±–∞ —Å –≤–∞–º–∏ –Ω–µ –º–∞–ª—å—á–∏–∫–∏ ))...","messageIndex":18,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokens":1891}
{"cacheIndex":18,"level":"info","message":"Using cache point","messagesInCache":19,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:01","totalTokensCached":1891}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":19,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:40:01","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"},{"contentLength":599,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":149,"hasCache":false,"index":16,"role":"user"},{"contentLength":613,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":32,"hasCache":false,"index":18,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:40:01"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":1976,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":252,"responseTime":5448,"service":"psycho-trainer","timestamp":"2025-06-10 22:40:07"}
{"cacheKey":"d73fc46b3f19a226a29fa5236f93d3d2dcecbc0c9d23d6e6e7a90a32409ce48c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:40:07"}
{"level":"info","message":"Session message exchanged","messageCount":20,"patientResponseLength":603,"responseTime":5450,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":32,"timestamp":"2025-06-10 22:40:07"}
{"level":"info","message":"Analyzing cache points","messageCount":21,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:41:22"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1541}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è —Ä–æ–Ω—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –ø–æ–ª*\n\n–ß—Ç–æ?! –¢–û–õ–ò–ö...","messageIndex":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1691}
{"level":"info","message":"Cache point found","messageContent":"–•–ª–æ–ø–∞–µ—Ç –ø–æ –ø–ª–µ—á—É –¥–∞ —É—Å–ø–æ–∫–æ–π—Å—è —Ç—ã –Ω—É —É–±–µ–∂–∏—à—å —Å–µ–π—á–∞—Å...","messageIndex":16,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1729}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è*\n\n–ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ...","messageIndex":17,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1883}
{"level":"info","message":"Cache point found","messageContent":"–¢–∞–∫ –º—ã –æ–±–∞ —Å –≤–∞–º–∏ –Ω–µ –º–∞–ª—å—á–∏–∫–∏ ))...","messageIndex":18,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":1891}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–µ–≥–∫–∞ –¥–µ—Ä–≥–∞–µ—Ç—Å—è —É–≥–æ–ª–æ–∫ —Ä—Ç–∞, –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ—Ä–∂–∞—Ç—å –Ω–µ...","messageIndex":19,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":2042}
{"level":"info","message":"Cache point found","messageContent":"–ù—É –≤–æ—Ç –º—ã –∏ –ø—Ä–∏—à–ª–∏ –∫ –ø—Ä–æ–±–ª–µ–º–º–∞–º –∞ –≥–æ–≤–æ—Ä–∏–ª–∏ –Ω–µ –∑–Ω–∞–µ...","messageIndex":20,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokens":2059}
{"cacheIndex":20,"level":"info","message":"Using cache point","messagesInCache":21,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:22","totalTokensCached":2059}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":21,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:41:22","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"},{"contentLength":599,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":149,"hasCache":false,"index":16,"role":"user"},{"contentLength":613,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":32,"hasCache":false,"index":18,"role":"user"},{"contentLength":603,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":68,"hasCache":false,"index":20,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:41:22"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":2266,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":276,"responseTime":6472,"service":"psycho-trainer","timestamp":"2025-06-10 22:41:29"}
{"cacheKey":"894de0bb256f8bc8ab5e19c1fdd9f302234439b5a19c7b2a80989def1f117281","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:41:29"}
{"level":"info","message":"Session message exchanged","messageCount":22,"patientResponseLength":630,"responseTime":6473,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":68,"timestamp":"2025-06-10 22:41:29"}
{"level":"info","message":"Analyzing cache points","messageCount":23,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:42:12"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1541}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è —Ä–æ–Ω—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –ø–æ–ª*\n\n–ß—Ç–æ?! –¢–û–õ–ò–ö...","messageIndex":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1691}
{"level":"info","message":"Cache point found","messageContent":"–•–ª–æ–ø–∞–µ—Ç –ø–æ –ø–ª–µ—á—É –¥–∞ —É—Å–ø–æ–∫–æ–π—Å—è —Ç—ã –Ω—É —É–±–µ–∂–∏—à—å —Å–µ–π—á–∞—Å...","messageIndex":16,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1729}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è*\n\n–ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ...","messageIndex":17,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1883}
{"level":"info","message":"Cache point found","messageContent":"–¢–∞–∫ –º—ã –æ–±–∞ —Å –≤–∞–º–∏ –Ω–µ –º–∞–ª—å—á–∏–∫–∏ ))...","messageIndex":18,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":1891}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–µ–≥–∫–∞ –¥–µ—Ä–≥–∞–µ—Ç—Å—è —É–≥–æ–ª–æ–∫ —Ä—Ç–∞, –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ—Ä–∂–∞—Ç—å –Ω–µ...","messageIndex":19,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":2042}
{"level":"info","message":"Cache point found","messageContent":"–ù—É –≤–æ—Ç –º—ã –∏ –ø—Ä–∏—à–ª–∏ –∫ –ø—Ä–æ–±–ª–µ–º–º–∞–º –∞ –≥–æ–≤–æ—Ä–∏–ª–∏ –Ω–µ –∑–Ω–∞–µ...","messageIndex":20,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":2059}
{"level":"info","message":"Cache point found","messageContent":"*—Ö–º—ã–∫–∞–µ—Ç –∏ –æ—Ç–≤–æ–¥–∏—Ç –≤–∑–≥–ª—è–¥*\n\n–Ø –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –∑–Ω–∞—é, –∑–∞—á–µ...","messageIndex":21,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":2217}
{"level":"info","message":"Cache point found","messageContent":"–õ–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —ç—Ç–æ –±—ã–ª–æ —à–æ—É —Å–∫—Ä—ã—Ç–∞—è –∫–∞–º–µ—Ä–∞ –≤–æ—Ç —Ç—É—Ç –æ–Ω...","messageIndex":22,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokens":2241}
{"cacheIndex":22,"level":"info","message":"Using cache point","messagesInCache":23,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:12","totalTokensCached":2241}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":23,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:42:12","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"},{"contentLength":599,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":149,"hasCache":false,"index":16,"role":"user"},{"contentLength":613,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":32,"hasCache":false,"index":18,"role":"user"},{"contentLength":603,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":68,"hasCache":false,"index":20,"role":"user"},{"contentLength":630,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":95,"hasCache":false,"index":22,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:42:12"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":2586,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":226,"responseTime":5386,"service":"psycho-trainer","timestamp":"2025-06-10 22:42:17"}
{"cacheKey":"646e6a14d313bf1f61a8b2d472d73bb5ed9be4581767b1eea70fb3b7c38903f0","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:42:17"}
{"level":"info","message":"Session message exchanged","messageCount":24,"patientResponseLength":541,"responseTime":5388,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":95,"timestamp":"2025-06-10 22:42:17"}
{"level":"info","message":"Analyzing cache points","messageCount":25,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:43:00"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1541}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è —Ä–æ–Ω—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –ø–æ–ª*\n\n–ß—Ç–æ?! –¢–û–õ–ò–ö...","messageIndex":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1691}
{"level":"info","message":"Cache point found","messageContent":"–•–ª–æ–ø–∞–µ—Ç –ø–æ –ø–ª–µ—á—É –¥–∞ —É—Å–ø–æ–∫–æ–π—Å—è —Ç—ã –Ω—É —É–±–µ–∂–∏—à—å —Å–µ–π—á–∞—Å...","messageIndex":16,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1729}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è*\n\n–ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ...","messageIndex":17,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1883}
{"level":"info","message":"Cache point found","messageContent":"–¢–∞–∫ –º—ã –æ–±–∞ —Å –≤–∞–º–∏ –Ω–µ –º–∞–ª—å—á–∏–∫–∏ ))...","messageIndex":18,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":1891}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–µ–≥–∫–∞ –¥–µ—Ä–≥–∞–µ—Ç—Å—è —É–≥–æ–ª–æ–∫ —Ä—Ç–∞, –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ—Ä–∂–∞—Ç—å –Ω–µ...","messageIndex":19,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":2042}
{"level":"info","message":"Cache point found","messageContent":"–ù—É –≤–æ—Ç –º—ã –∏ –ø—Ä–∏—à–ª–∏ –∫ –ø—Ä–æ–±–ª–µ–º–º–∞–º –∞ –≥–æ–≤–æ—Ä–∏–ª–∏ –Ω–µ –∑–Ω–∞–µ...","messageIndex":20,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":2059}
{"level":"info","message":"Cache point found","messageContent":"*—Ö–º—ã–∫–∞–µ—Ç –∏ –æ—Ç–≤–æ–¥–∏—Ç –≤–∑–≥–ª—è–¥*\n\n–Ø –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –∑–Ω–∞—é, –∑–∞—á–µ...","messageIndex":21,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":2217}
{"level":"info","message":"Cache point found","messageContent":"–õ–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —ç—Ç–æ –±—ã–ª–æ —à–æ—É —Å–∫—Ä—ã—Ç–∞—è –∫–∞–º–µ—Ä–∞ –≤–æ—Ç —Ç—É—Ç –æ–Ω...","messageIndex":22,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":2241}
{"level":"info","message":"Cache point found","messageContent":"*–Ω–∞ —Å–µ–∫—É–Ω–¥—É –∑–∞—Å—Ç—ã–≤–∞–µ—Ç, –∑–∞—Ç–µ–º –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è,...","messageIndex":23,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":2377}
{"level":"info","message":"Cache point found","messageContent":"–ø—Ä–æ—â–∞–π—Ç–µ —Ç–æ–ª–∏–∫  –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤–∞—Å –∂–µ–Ω–∞ –∑–∞–∫–∞–∑–∞–ª–∞ —Å—Ç...","messageIndex":24,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokens":2395}
{"cacheIndex":24,"level":"info","message":"Using cache point","messagesInCache":25,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:00","totalTokensCached":2395}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":25,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:43:00","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"},{"contentLength":599,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":149,"hasCache":false,"index":16,"role":"user"},{"contentLength":613,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":32,"hasCache":false,"index":18,"role":"user"},{"contentLength":603,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":68,"hasCache":false,"index":20,"role":"user"},{"contentLength":630,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":95,"hasCache":false,"index":22,"role":"user"},{"contentLength":541,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":71,"hasCache":false,"index":24,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:43:00"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":2845,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":209,"responseTime":5614,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:05"}
{"cacheKey":"d793e72db6de3d30e3530558d5f483b4305f75a4fdd577e17058c6772e67789d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:43:05"}
{"level":"info","message":"Session message exchanged","messageCount":26,"patientResponseLength":460,"responseTime":5615,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":71,"timestamp":"2025-06-10 22:43:05"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 22:43:21"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"96MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 22:43:21","uptime":"10min"}
{"level":"info","message":"Analyzing cache points","messageCount":27,"minRequired":1024,"service":"psycho-trainer","systemTokens":768,"timestamp":"2025-06-10 22:43:35"}
{"level":"info","message":"Cache point found","messageContent":"*–∑–∞–º–µ—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –µ—â–µ —Å–∏–ª—å–Ω–µ–µ*\n\n...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1057}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1060}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—Å—Ç–∞–µ—Ç —Å –∫—Ä–µ—Å–ª–∞*\n\n–ó–Ω–∞–µ—Ç–µ —á—Ç–æ? –Ø, –ø–æ–∂–∞–ª—É–π, –ø...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1149}
{"level":"info","message":"Cache point found","messageContent":"–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1152}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —É –¥–≤–µ—Ä–∏, —Ä–µ–∑–∫–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1264}
{"level":"info","message":"Cache point found","messageContent":"–ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è –ª–∏—Ü–æ –∫—Ä–∞—Å–Ω–µ–µ—Ç –æ—Ç –≤–æ–∑–º—É...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1278}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç–ø—É—Å–∫–∞–µ—Ç —Ä—É—á–∫—É –¥–≤–µ—Ä–∏, –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è*\n\n–í—ã....","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1399}
{"level":"info","message":"Cache point found","messageContent":"—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ  –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1406}
{"level":"info","message":"Cache point found","messageContent":"*—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ª–∏—Ü–æ –ø–æ–±–ª–µ–¥–Ω–µ–ª–æ –æ—Ç ...","messageIndex":13,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1524}
{"level":"info","message":"Cache point found","messageContent":"–î–∞ –ª–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —Ä–∞—Å—Å–ª–∞–±—å—Å—è –º–µ—Ç–æ–¥ —É –º–µ–Ω—è —Ç–∞–∫–æ–π –∫–∞–∫ —á...","messageIndex":14,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1541}
{"level":"info","message":"Cache point found","messageContent":"*–æ—Ç –≤–æ–∑–º—É—â–µ–Ω–∏—è —Ä–æ–Ω—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –ø–æ–ª*\n\n–ß—Ç–æ?! –¢–û–õ–ò–ö...","messageIndex":15,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1691}
{"level":"info","message":"Cache point found","messageContent":"–•–ª–æ–ø–∞–µ—Ç –ø–æ –ø–ª–µ—á—É –¥–∞ —É—Å–ø–æ–∫–æ–π—Å—è —Ç—ã –Ω—É —É–±–µ–∂–∏—à—å —Å–µ–π—á–∞—Å...","messageIndex":16,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1729}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –æ—Ç—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è*\n\n–ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ...","messageIndex":17,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1883}
{"level":"info","message":"Cache point found","messageContent":"–¢–∞–∫ –º—ã –æ–±–∞ —Å –≤–∞–º–∏ –Ω–µ –º–∞–ª—å—á–∏–∫–∏ ))...","messageIndex":18,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":1891}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–µ–≥–∫–∞ –¥–µ—Ä–≥–∞–µ—Ç—Å—è —É–≥–æ–ª–æ–∫ —Ä—Ç–∞, –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ—Ä–∂–∞—Ç—å –Ω–µ...","messageIndex":19,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2042}
{"level":"info","message":"Cache point found","messageContent":"–ù—É –≤–æ—Ç –º—ã –∏ –ø—Ä–∏—à–ª–∏ –∫ –ø—Ä–æ–±–ª–µ–º–º–∞–º –∞ –≥–æ–≤–æ—Ä–∏–ª–∏ –Ω–µ –∑–Ω–∞–µ...","messageIndex":20,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2059}
{"level":"info","message":"Cache point found","messageContent":"*—Ö–º—ã–∫–∞–µ—Ç –∏ –æ—Ç–≤–æ–¥–∏—Ç –≤–∑–≥–ª—è–¥*\n\n–Ø –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –∑–Ω–∞—é, –∑–∞—á–µ...","messageIndex":21,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2217}
{"level":"info","message":"Cache point found","messageContent":"–õ–∞–¥–Ω–æ —Ç–æ–ª–∏–∫ —ç—Ç–æ –±—ã–ª–æ —à–æ—É —Å–∫—Ä—ã—Ç–∞—è –∫–∞–º–µ—Ä–∞ –≤–æ—Ç —Ç—É—Ç –æ–Ω...","messageIndex":22,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2241}
{"level":"info","message":"Cache point found","messageContent":"*–Ω–∞ —Å–µ–∫—É–Ω–¥—É –∑–∞—Å—Ç—ã–≤–∞–µ—Ç, –∑–∞—Ç–µ–º –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è,...","messageIndex":23,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2377}
{"level":"info","message":"Cache point found","messageContent":"–ø—Ä–æ—â–∞–π—Ç–µ —Ç–æ–ª–∏–∫  –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤–∞—Å –∂–µ–Ω–∞ –∑–∞–∫–∞–∑–∞–ª–∞ —Å—Ç...","messageIndex":24,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2395}
{"level":"info","message":"Cache point found","messageContent":"*–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å–µ–¥–∞–µ—Ç –≤ –∫—Ä–µ—Å–ª–æ, –±–ª–µ–¥–Ω–µ—è*\n\n–í—ã... –≤—ã —Å–æ–≤...","messageIndex":25,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2510}
{"level":"info","message":"Cache point found","messageContent":"–í—ã–∫–∏–¥—ã–≤–∞—é —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –æ–∫–Ω–æ —è—Ä–æ—Å—Ç–Ω–æ —Ö–æ—Ö–æ—á–∞...","messageIndex":26,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokens":2520}
{"cacheIndex":26,"level":"info","message":"Using cache point","messagesInCache":27,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:35","totalTokensCached":2520}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":27,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:43:35","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"},{"contentLength":321,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":12,"hasCache":false,"index":2,"role":"user"},{"contentLength":370,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":4,"role":"user"},{"contentLength":423,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":6,"role":"user"},{"contentLength":353,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":8,"role":"user"},{"contentLength":445,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":55,"hasCache":false,"index":10,"role":"user"},{"contentLength":483,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":27,"hasCache":false,"index":12,"role":"user"},{"contentLength":471,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":65,"hasCache":false,"index":14,"role":"user"},{"contentLength":599,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":149,"hasCache":false,"index":16,"role":"user"},{"contentLength":613,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":32,"hasCache":false,"index":18,"role":"user"},{"contentLength":603,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":68,"hasCache":false,"index":20,"role":"user"},{"contentLength":630,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":95,"hasCache":false,"index":22,"role":"user"},{"contentLength":541,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":71,"hasCache":false,"index":24,"role":"user"},{"contentLength":460,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":39,"hasCache":false,"index":26,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3071,"type":"text"}],"timestamp":"2025-06-10 22:43:35"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1298,"inputTokens":3076,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":194,"responseTime":4050,"service":"psycho-trainer","timestamp":"2025-06-10 22:43:39"}
{"cacheKey":"7437400c9f12881db1d9ee39fd100725cdb3c78dc50b53286d60d99731c08928","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:43:39"}
{"level":"info","message":"Session message exchanged","messageCount":28,"patientResponseLength":408,"responseTime":4051,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","therapistMessageLength":39,"timestamp":"2025-06-10 22:43:39"}
{"duration":10,"level":"info","message":"Session ended","messageCount":28,"service":"psycho-trainer","sessionUuid":"7ff1c915-807b-47f7-a5fb-c26bd057b1b5","timestamp":"2025-06-10 22:44:11"}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-10 22:44:16"}
{"level":"info","message":"Cache point found","messageContent":"–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç—É —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫—É—é —Å–µ—Å—Å–∏—é:\n\n–ò–ù–§–û–†–ú–ê...","messageIndex":0,"service":"psycho-trainer","timestamp":"2025-06-10 22:44:16","totalTokens":2257}
{"cacheIndex":0,"level":"info","message":"Using cache point","messagesInCache":1,"service":"psycho-trainer","timestamp":"2025-06-10 22:44:16","totalTokensCached":2257}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-10 22:44:16","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":9028,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-10 22:44:16"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":3923,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":867,"responseTime":14029,"service":"psycho-trainer","timestamp":"2025-06-10 22:44:30"}
{"cacheKey":"575cee0b609f92e16e79cb2b766102a026243035d1fc823278978214c571f135","cacheType":"analysis","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:44:30"}
{"level":"info","message":"Session analysis completed","rating":1,"service":"psycho-trainer","sessionId":8,"timestamp":"2025-06-10 22:44:30"}
{"averageRating":1,"level":"info","message":"User stats updated","service":"psycho-trainer","timestamp":"2025-06-10 22:44:30","totalSessions":1,"userId":1}
{"cacheKey":"575cee0b609f92e16e79cb2b766102a026243035d1fc823278978214c571f135","level":"info","message":"Cache hit for Claude API request","service":"psycho-trainer","timestamp":"2025-06-10 22:46:53"}
{"level":"info","message":"Session analysis completed","rating":1,"service":"psycho-trainer","sessionId":8,"timestamp":"2025-06-10 22:46:53"}
{"averageRating":1,"level":"info","message":"User stats updated","service":"psycho-trainer","timestamp":"2025-06-10 22:46:53","totalSessions":2,"userId":1}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:47:29","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-10 22:47:29"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:47:29"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-10 22:47:29","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1927,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-10 22:47:29"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":739,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":872,"responseTime":12516,"service":"psycho-trainer","timestamp":"2025-06-10 22:47:42"}
{"level":"info","message":"Patient created successfully","name":"–ë–æ—Ä–∏—Å –ê—Ä–∫–∞–¥—å–µ–≤–∏—á –õ–µ–≤–∏—Ç–∞–Ω","patientId":9,"service":"psycho-trainer","timestamp":"2025-06-10 22:47:42","uuid":"56ef7cd8-dbf8-45f5-989c-a209efb01f3d"}
{"level":"info","message":"Session created","patientId":9,"service":"psycho-trainer","sessionId":9,"sessionUuid":"bf2d0325-0822-430e-ad7c-57bc1ada6a55","timestamp":"2025-06-10 22:47:42","userId":1}
{"level":"info","message":"New patient and session created","patientId":9,"service":"psycho-trainer","sessionId":9,"timestamp":"2025-06-10 22:47:42","userId":1}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:48:37","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-10 22:48:37"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:48:37"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-10 22:48:37","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1927,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-10 22:48:37"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":739,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":883,"responseTime":14249,"service":"psycho-trainer","timestamp":"2025-06-10 22:48:52"}
{"level":"info","message":"Patient created successfully","name":"–ë–æ—Ä–∏—Å –ê—Ä–∫–∞–¥—å–µ–≤–∏—á –õ–µ–≤–∏—Ç–∞–Ω","patientId":10,"service":"psycho-trainer","timestamp":"2025-06-10 22:48:52","uuid":"9d43e5da-3d8f-41c4-8d38-dbb940ff224c"}
{"level":"info","message":"Session created","patientId":10,"service":"psycho-trainer","sessionId":10,"sessionUuid":"e83eb18a-717b-4e77-896c-51c4b59582f3","timestamp":"2025-06-10 22:48:52","userId":1}
{"level":"info","message":"New patient and session created","patientId":10,"service":"psycho-trainer","sessionId":10,"timestamp":"2025-06-10 22:48:52","userId":1}
{"duration":1,"level":"info","message":"Session ended","messageCount":0,"service":"psycho-trainer","sessionUuid":"bf2d0325-0822-430e-ad7c-57bc1ada6a55","timestamp":"2025-06-10 22:49:00"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:49:03","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-10 22:49:03"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:49:03"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-10 22:49:03","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1927,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-10 22:49:03"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":739,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":867,"responseTime":13667,"service":"psycho-trainer","timestamp":"2025-06-10 22:49:17"}
{"level":"info","message":"Patient created successfully","name":"–ù–∏–∫–æ–ª–∞–π –ü–µ—Ç—Ä–æ–≤–∏—á –í–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫–∏–π","patientId":11,"service":"psycho-trainer","timestamp":"2025-06-10 22:49:17","uuid":"c22336c8-82ae-428a-9a8f-5374d3ae6f04"}
{"level":"info","message":"Session created","patientId":11,"service":"psycho-trainer","sessionId":11,"sessionUuid":"fc703f57-e041-4d54-9b57-7db9ca9903be","timestamp":"2025-06-10 22:49:17","userId":1}
{"level":"info","message":"New patient and session created","patientId":11,"service":"psycho-trainer","sessionId":11,"timestamp":"2025-06-10 22:49:17","userId":1}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-10 22:53:21"}
{"database":null,"level":"info","memory":{"heapUsed":"22MB","rss":"105MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-10 22:53:21","uptime":"20min"}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"e83eb18a-717b-4e77-896c-51c4b59582f3","timestamp":"2025-06-10 22:53:52","userId":1}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"e83eb18a-717b-4e77-896c-51c4b59582f3","timestamp":"2025-06-10 22:53:52","userId":1}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"fc703f57-e041-4d54-9b57-7db9ca9903be","timestamp":"2025-06-10 22:54:17","userId":1}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"fc703f57-e041-4d54-9b57-7db9ca9903be","timestamp":"2025-06-10 22:54:17","userId":1}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:56:16"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:56:16"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:56:18"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:56:18"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-10 22:56:20"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-10 22:56:21"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-10 22:56:21"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-10 22:56:28","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-10 22:56:28"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:56:28"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-10 22:56:28","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":2040,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-10 22:56:28"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-10 22:56:28"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":790,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":823,"responseTime":11741,"service":"psycho-trainer","timestamp":"2025-06-10 22:56:40"}
{"level":"info","message":"Patient created successfully","name":"–†–µ–≥–∏–Ω–∞ –ú–∞—Ä–∫–æ–≤–Ω–∞ –ó–∏–ª—å–±–µ—Ä—à—Ç–µ–π–Ω","patientId":12,"service":"psycho-trainer","timestamp":"2025-06-10 22:56:40","uuid":"4377b70a-abb6-4685-a134-4fb42d1023c5"}
{"level":"info","message":"Session created","patientId":12,"service":"psycho-trainer","sessionId":12,"sessionUuid":"957eb7c0-6c93-4991-b8c2-627a140a0210","timestamp":"2025-06-10 22:56:40","userId":1}
{"level":"info","message":"New patient and session created","patientId":12,"service":"psycho-trainer","sessionId":12,"timestamp":"2025-06-10 22:56:40","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":737,"timestamp":"2025-06-10 22:56:52"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-10 22:56:52"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-10 22:56:52","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":11,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":2945,"type":"text"}],"timestamp":"2025-06-10 22:56:52"}
{"cacheCreated":true,"cacheCreationTokens":1239,"cacheHit":false,"cacheReadTokens":0,"inputTokens":12,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":229,"responseTime":5507,"service":"psycho-trainer","timestamp":"2025-06-10 22:56:58"}
{"cacheKey":"7d6cb3c11a58e6e27bf60590bf4ca9a57631686bb1c8048498bae7b73cad1d2b","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-10 22:56:58"}
{"level":"info","message":"Session message exchanged","messageCount":2,"patientResponseLength":521,"responseTime":5509,"service":"psycho-trainer","sessionUuid":"957eb7c0-6c93-4991-b8c2-627a140a0210","therapistMessageLength":11,"timestamp":"2025-06-10 22:56:58"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:57:51"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:57:51"}
{"level":"info","message":"Received SIGINT, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-10 22:57:55"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-10 22:57:55"}
00:02:42 [[32MINFO[39M]: Initializing PsychoTrainer Bot v3.0... {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Database schema loaded successfully {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Database initialized successfully {"service":"psycho-trainer","path":"./data/psycho_trainer.db","pragma":{"journal_mode":"WAL","synchronous":"NORMAL","cache_size":-64000,"temp_store":"MEMORY","mmap_size":268435456}}
00:02:42 [[32MINFO[39M]: Database initialized successfully {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Event handlers set up {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Error handlers set up {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Graceful shutdown handlers set up {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Inactivity callbacks set up {"service":"psycho-trainer"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
00:02:42 [[32MINFO[39M]: Bot commands menu set up {"service":"psycho-trainer","commandCount":13}
00:02:42 [[32MINFO[39M]: Bot initialized successfully {"service":"psycho-trainer"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"data":"invite_patient_101","level":"info","message":"Processing patient invitation callback","parsedPatientId":101,"patientId":101,"service":"psycho-trainer","telegramId":434085347,"timestamp":"2025-06-12 00:02:42","userId":1}
00:02:42 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":434085347,"userId":1,"patientId":101,"data":"invite_patient_101","parsedPatientId":101}
00:02:42 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":101,"patientFound":true,"patientCreatedBy":1,"userId":1,"accessAllowed":true}
00:02:42 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":434085347,"userId":1,"patientId":101,"data":"invite_patient_101","parsedPatientId":101}
00:02:42 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":101,"patientFound":true,"patientCreatedBy":1,"userId":1,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":1,"patientFound":true,"patientId":101,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:42","userId":1}
{"data":"invite_patient_101","level":"info","message":"Processing patient invitation callback","parsedPatientId":101,"patientId":101,"service":"psycho-trainer","telegramId":434085347,"timestamp":"2025-06-12 00:02:42","userId":1}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":1,"patientFound":true,"patientId":101,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:42","userId":1}
{"level":"info","message":"Session created","patientId":101,"service":"psycho-trainer","sessionId":94,"sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","timestamp":"2025-06-12 00:02:42","userId":1}
00:02:42 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":94,"sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","userId":1,"patientId":101}
00:02:42 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":828,"messageCount":1,"minRequired":1024}
00:02:42 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:02:42 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:02:42 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3312}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":828,"timestamp":"2025-06-12 00:02:42"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:02:42","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3312,"type":"text"}],"timestamp":"2025-06-12 00:02:42"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42"}
00:02:42 [[32MINFO[39M]: ü§ñ PsychoTrainer Bot v3.0 started successfully! {"service":"psycho-trainer","nodeEnv":"development","botUsername":"Intervisor_bot"}
{"data":"invite_patient_101","error":"ETELEGRAM: 400 Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message","level":"error","message":"Error handling patient invitation","service":"psycho-trainer","timestamp":"2025-06-12 00:02:42","userId":1}
00:02:42 [[31MERROR[39M]: Error handling patient invitation {"service":"psycho-trainer","error":"ETELEGRAM: 400 Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message","userId":1,"data":"invite_patient_101"}
{"cacheCreated":true,"cacheCreationTokens":1407,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":204,"responseTime":5550,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:48"}
00:02:48 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5550,"inputTokens":26,"outputTokens":204,"cacheCreationTokens":1407,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
00:02:48 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"7e2d8e7f0140e839a8af242f8e07deef721f77445f0926a891af90653f2a006c","cacheType":"conversation"}
{"cacheKey":"7e2d8e7f0140e839a8af242f8e07deef721f77445f0926a891af90653f2a006c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:02:48"}
{"data":"invite_patient_101","error":"ETELEGRAM: 400 Bad Request: query is too old and response timeout expired or query ID is invalid","level":"error","message":"Error handling patient invitation","service":"psycho-trainer","timestamp":"2025-06-12 00:02:48","userId":1}
00:02:48 [[31MERROR[39M]: Error handling patient invitation {"service":"psycho-trainer","error":"ETELEGRAM: 400 Bad Request: query is too old and response timeout expired or query ID is invalid","userId":1,"data":"invite_patient_101"}
{"error":"ETELEGRAM: 400 Bad Request: query is too old and response timeout expired or query ID is invalid","level":"error","message":"Callback query error","queryData":"invite_patient_101","service":"psycho-trainer","timestamp":"2025-06-12 00:02:48","userId":434085347}
00:02:48 [[31MERROR[39M]: Callback query error {"service":"psycho-trainer","error":"ETELEGRAM: 400 Bad Request: query is too old and response timeout expired or query ID is invalid","queryData":"invite_patient_101","userId":434085347}
{"level":"info","message":"Analyzing cache points","messageCount":3,"minRequired":1024,"service":"psycho-trainer","systemTokens":828,"timestamp":"2025-06-12 00:02:52"}
00:02:52 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":828,"messageCount":3,"minRequired":1024}
00:02:52 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:02:52 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:02:52 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3312}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":492},{"index":2,"role":"user","hasCache":false,"contentLength":8}]}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:02:52"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:02:52","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":492,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":8,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3312,"type":"text"}],"timestamp":"2025-06-12 00:02:52"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1407,"inputTokens":238,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":135,"responseTime":3067,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:55"}
00:02:55 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3067,"inputTokens":238,"outputTokens":135,"cacheCreationTokens":0,"cacheReadTokens":1407,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:02:55 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"46b442fa70d696426801a2b7b8dc2399342193cad25e2c279d8a4883a3a48ab7","cacheType":"conversation"}
{"cacheKey":"46b442fa70d696426801a2b7b8dc2399342193cad25e2c279d8a4883a3a48ab7","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:02:55"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":317,"responseTime":3070,"service":"psycho-trainer","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","therapistMessageLength":8,"timestamp":"2025-06-12 00:02:55"}
00:02:55 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","messageCount":4,"responseTime":3070,"therapistMessageLength":8,"patientResponseLength":317}
{"level":"info","message":"Analyzing cache points","messageCount":5,"minRequired":1024,"service":"psycho-trainer","systemTokens":828,"timestamp":"2025-06-12 00:02:56"}
00:02:56 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":828,"messageCount":5,"minRequired":1024}
00:02:56 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1042,"messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏. *–Ω–µ–º–Ω..."}
00:02:56 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1044,"messageContent":"asdfas..."}
00:02:56 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":4,"totalTokensCached":1044,"messagesInCache":5,"totalMessages":5}
00:02:56 [[32MINFO[39M]: Adding cache_control to message {"service":"psycho-trainer","messageIndex":4,"role":"user","contentPreview":"asdfas..."}
00:02:56 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":1}}
00:02:56 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3312}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":492},{"index":2,"role":"user","hasCache":false,"contentLength":8},{"index":3,"role":"assistant","hasCache":false,"contentLength":317},{"index":4,"role":"user","hasCache":true,"contentLength":6}]}
{"level":"info","message":"Cache point found","messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏. *–Ω–µ–º–Ω...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:56","totalTokens":1042}
{"level":"info","message":"Cache point found","messageContent":"asdfas...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:56","totalTokens":1044}
{"cacheIndex":4,"level":"info","message":"Using cache point","messagesInCache":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:56","totalMessages":5,"totalTokensCached":1044}
{"contentPreview":"asdfas...","level":"info","message":"Adding cache_control to message","messageIndex":4,"role":"user","service":"psycho-trainer","timestamp":"2025-06-12 00:02:56"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":1,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:02:56","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":492,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":8,"hasCache":false,"index":2,"role":"user"},{"contentLength":317,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":6,"hasCache":true,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3312,"type":"text"}],"timestamp":"2025-06-12 00:02:56"}
{"error":"400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.4.cache_control: Extra inputs are not permitted\"}}","level":"error","message":"Claude API error","messageCount":5,"responseTime":170,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:56","userId":1}
00:02:56 [[31MERROR[39M]: Claude API error {"service":"psycho-trainer","error":"400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.4.cache_control: Extra inputs are not permitted\"}}","responseTime":170,"userId":1,"messageCount":5}
00:02:56 [[31MERROR[39M]: Error sending message {"service":"psycho-trainer","error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.4.cache_control: Extra inputs are not permitted\"}}","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","sender":"therapist"}
00:02:56 [[31MERROR[39M]: Session message error {"service":"psycho-trainer","error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.4.cache_control: Extra inputs are not permitted\"}}","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe"}
{"error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.4.cache_control: Extra inputs are not permitted\"}}","level":"error","message":"Error sending message","sender":"therapist","service":"psycho-trainer","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","timestamp":"2025-06-12 00:02:56"}
{"error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.4.cache_control: Extra inputs are not permitted\"}}","level":"error","message":"Session message error","service":"psycho-trainer","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","timestamp":"2025-06-12 00:02:56"}
{"level":"info","message":"Analyzing cache points","messageCount":6,"minRequired":1024,"service":"psycho-trainer","systemTokens":828,"timestamp":"2025-06-12 00:02:58"}
00:02:58 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":828,"messageCount":6,"minRequired":1024}
00:02:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1042,"messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏. *–Ω–µ–º–Ω..."}
00:02:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1044,"messageContent":"asdfas..."}
00:02:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1045,"messageContent":"asdf..."}
00:02:58 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":5,"totalTokensCached":1045,"messagesInCache":6,"totalMessages":6}
00:02:58 [[32MINFO[39M]: Adding cache_control to message {"service":"psycho-trainer","messageIndex":5,"role":"user","contentPreview":"asdf..."}
00:02:58 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":6,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":1}}
00:02:58 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3312}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":492},{"index":2,"role":"user","hasCache":false,"contentLength":8},{"index":3,"role":"assistant","hasCache":false,"contentLength":317},{"index":4,"role":"user","hasCache":false,"contentLength":6},{"index":5,"role":"user","hasCache":true,"contentLength":4}]}
{"level":"info","message":"Cache point found","messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏. *–Ω–µ–º–Ω...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:58","totalTokens":1042}
{"level":"info","message":"Cache point found","messageContent":"asdfas...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:58","totalTokens":1044}
{"level":"info","message":"Cache point found","messageContent":"asdf...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:58","totalTokens":1045}
{"cacheIndex":5,"level":"info","message":"Using cache point","messagesInCache":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:58","totalMessages":6,"totalTokensCached":1045}
{"contentPreview":"asdf...","level":"info","message":"Adding cache_control to message","messageIndex":5,"role":"user","service":"psycho-trainer","timestamp":"2025-06-12 00:02:58"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":6,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":1,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:02:58","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":492,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":8,"hasCache":false,"index":2,"role":"user"},{"contentLength":317,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":6,"hasCache":false,"index":4,"role":"user"},{"contentLength":4,"hasCache":true,"index":5,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3312,"type":"text"}],"timestamp":"2025-06-12 00:02:58"}
{"error":"400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.5.cache_control: Extra inputs are not permitted\"}}","level":"error","message":"Claude API error","messageCount":6,"responseTime":174,"service":"psycho-trainer","timestamp":"2025-06-12 00:02:58","userId":1}
00:02:58 [[31MERROR[39M]: Claude API error {"service":"psycho-trainer","error":"400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.5.cache_control: Extra inputs are not permitted\"}}","responseTime":174,"userId":1,"messageCount":6}
00:02:58 [[31MERROR[39M]: Error sending message {"service":"psycho-trainer","error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.5.cache_control: Extra inputs are not permitted\"}}","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","sender":"therapist"}
00:02:58 [[31MERROR[39M]: Session message error {"service":"psycho-trainer","error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.5.cache_control: Extra inputs are not permitted\"}}","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe"}
{"error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.5.cache_control: Extra inputs are not permitted\"}}","level":"error","message":"Error sending message","sender":"therapist","service":"psycho-trainer","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","timestamp":"2025-06-12 00:02:58"}
{"error":"Claude API error: 400 {\"type\":\"error\",\"error\":{\"type\":\"invalid_request_error\",\"message\":\"messages.5.cache_control: Extra inputs are not permitted\"}}","level":"error","message":"Session message error","service":"psycho-trainer","sessionUuid":"407b920a-cfd5-4398-8a52-631c492d18fe","timestamp":"2025-06-12 00:02:58"}
00:04:36 [[32MINFO[39M]: Received SIGTERM, starting graceful shutdown... {"service":"psycho-trainer"}
00:04:36 [[32MINFO[39M]: Starting graceful shutdown... {"service":"psycho-trainer"}
{"level":"info","message":"Received SIGTERM, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-12 00:04:36"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-12 00:04:36"}
00:04:37 [[32MINFO[39M]: Initializing PsychoTrainer Bot v3.0... {"service":"psycho-trainer"}
00:04:37 [[32MINFO[39M]: Database schema loaded successfully {"service":"psycho-trainer"}
00:04:37 [[32MINFO[39M]: Database initialized successfully {"service":"psycho-trainer","path":"./data/psycho_trainer.db","pragma":{"journal_mode":"WAL","synchronous":"NORMAL","cache_size":-64000,"temp_store":"MEMORY","mmap_size":268435456}}
00:04:37 [[32MINFO[39M]: Database initialized successfully {"service":"psycho-trainer"}
00:04:37 [[32MINFO[39M]: Event handlers set up {"service":"psycho-trainer"}
00:04:37 [[32MINFO[39M]: Error handlers set up {"service":"psycho-trainer"}
00:04:37 [[32MINFO[39M]: Graceful shutdown handlers set up {"service":"psycho-trainer"}
00:04:37 [[32MINFO[39M]: Inactivity callbacks set up {"service":"psycho-trainer"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
00:04:37 [[32MINFO[39M]: Bot commands menu set up {"service":"psycho-trainer","commandCount":13}
00:04:37 [[32MINFO[39M]: Bot initialized successfully {"service":"psycho-trainer"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:04:37"}
{"code":"ETELEGRAM","error":"ETELEGRAM: 409 Conflict: terminated by other getUpdates request; make sure that only one bot instance is running","level":"error","message":"Polling error","service":"psycho-trainer","timestamp":"2025-06-12 00:04:41"}
00:04:41 [[31MERROR[39M]: Polling error {"service":"psycho-trainer","error":"ETELEGRAM: 409 Conflict: terminated by other getUpdates request; make sure that only one bot instance is running","code":"ETELEGRAM"}
00:04:41 [[32MINFO[39M]: Bot polling stopped {"service":"psycho-trainer"}
00:04:41 [[32MINFO[39M]: Database connection closed {"service":"psycho-trainer"}
00:04:41 [[32MINFO[39M]: Database connection closed {"service":"psycho-trainer"}
00:04:41 [[32MINFO[39M]: Graceful shutdown completed {"service":"psycho-trainer"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-12 00:04:51"}
00:04:51 [[32MINFO[39M]: ü§ñ PsychoTrainer Bot v3.0 started successfully! {"service":"psycho-trainer","nodeEnv":"development","botUsername":"Intervisor_bot"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 00:05:01","userId":1}
00:05:01 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":1,"hasCustomDescription":false}
00:05:01 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":0,"messageCount":1,"minRequired":1024}
00:05:01 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:05:01 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":1,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
00:05:01 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-12 00:05:01"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:05:01"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 00:05:01","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 00:05:01"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":753,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":869,"responseTime":12960,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:14"}
00:05:14 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":12960,"inputTokens":753,"outputTokens":869,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
00:05:14 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":102,"uuid":"7b902a68-e8dd-49c8-8546-0f922d7b1ec8","name":"–ê—Ä—Ç—ë–º –°–æ–∫–æ–ª–æ–≤"}
{"level":"info","message":"Patient created successfully","name":"–ê—Ä—Ç—ë–º –°–æ–∫–æ–ª–æ–≤","patientId":102,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:14","uuid":"7b902a68-e8dd-49c8-8546-0f922d7b1ec8"}
{"callbackData":"invite_patient_102","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":1,"patientId":102,"patientName":"–ê—Ä—Ç—ë–º –°–æ–∫–æ–ª–æ–≤","service":"psycho-trainer","timestamp":"2025-06-12 00:05:14","userId":1}
00:05:14 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":1,"patientId":102,"patientName":"–ê—Ä—Ç—ë–º –°–æ–∫–æ–ª–æ–≤","patientCreatedBy":1,"callbackData":"invite_patient_102"}
{"data":"invite_patient_102","level":"info","message":"Processing patient invitation callback","parsedPatientId":102,"patientId":102,"service":"psycho-trainer","telegramId":434085347,"timestamp":"2025-06-12 00:05:15","userId":1}
00:05:15 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":434085347,"userId":1,"patientId":102,"data":"invite_patient_102","parsedPatientId":102}
00:05:15 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":102,"patientFound":true,"patientCreatedBy":1,"userId":1,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":1,"patientFound":true,"patientId":102,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:15","userId":1}
{"level":"info","message":"Session created","patientId":102,"service":"psycho-trainer","sessionId":95,"sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","timestamp":"2025-06-12 00:05:15","userId":1}
00:05:15 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":95,"sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","userId":1,"patientId":102}
00:05:15 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":1,"minRequired":1024}
00:05:15 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:05:15 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:05:15 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:05:15"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:05:15"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:05:15","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:05:15"}
{"cacheCreated":true,"cacheCreationTokens":1505,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":137,"responseTime":3345,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:19"}
00:05:19 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3345,"inputTokens":26,"outputTokens":137,"cacheCreationTokens":1505,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
00:05:19 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"9a95865594af1394660cc804886b51bca7b0c0a73fb5cc97b160eb3b8b38bb07","cacheType":"conversation"}
{"cacheKey":"9a95865594af1394660cc804886b51bca7b0c0a73fb5cc97b160eb3b8b38bb07","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:05:19"}
{"level":"info","message":"Patient invited and session started","patientId":102,"service":"psycho-trainer","sessionId":95,"timestamp":"2025-06-12 00:05:19","userId":1}
00:05:19 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":1,"patientId":102,"sessionId":95}
{"level":"info","message":"Analyzing cache points","messageCount":3,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:05:40"}
00:05:40 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":3,"minRequired":1024}
00:05:40 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:05:40 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:05:40 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":329},{"index":2,"role":"user","hasCache":false,"contentLength":11}]}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:05:40"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:05:40","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":329,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":11,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:05:40"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1505,"inputTokens":170,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":198,"responseTime":4751,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:44"}
00:05:44 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4751,"inputTokens":170,"outputTokens":198,"cacheCreationTokens":0,"cacheReadTokens":1505,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:05:44 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"f2e6d2677bf7421085d0f758a0a60b519b084b29738d276c1f26fc2d8814dd8a","cacheType":"conversation"}
{"cacheKey":"f2e6d2677bf7421085d0f758a0a60b519b084b29738d276c1f26fc2d8814dd8a","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:05:44"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":464,"responseTime":4752,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","therapistMessageLength":11,"timestamp":"2025-06-12 00:05:45"}
00:05:45 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","messageCount":4,"responseTime":4752,"therapistMessageLength":11,"patientResponseLength":464}
{"level":"info","message":"Analyzing cache points","messageCount":5,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:05:49"}
00:05:49 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":5,"minRequired":1024}
00:05:49 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1124,"messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ..."}
00:05:49 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1125,"messageContent":"–≤—ã—Ñ–∞..."}
00:05:49 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":4,"totalTokensCached":1125,"messagesInCache":5,"totalMessages":5}
00:05:49 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:05:49 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":329},{"index":2,"role":"user","hasCache":false,"contentLength":11},{"index":3,"role":"assistant","hasCache":false,"contentLength":464},{"index":4,"role":"user","hasCache":false,"contentLength":4}]}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:49","totalTokens":1124}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã—Ñ–∞...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:49","totalTokens":1125}
{"cacheIndex":4,"level":"info","message":"Using cache point","messagesInCache":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:49","totalMessages":5,"totalTokensCached":1125}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:05:49","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":329,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":11,"hasCache":false,"index":2,"role":"user"},{"contentLength":464,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:05:49"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1505,"inputTokens":374,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":133,"responseTime":4992,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:54"}
00:05:54 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4992,"inputTokens":374,"outputTokens":133,"cacheCreationTokens":0,"cacheReadTokens":1505,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:05:54 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"927143175d7f30426a33ff4d51a899d4d0a752dba58c8f41e22f26487c541ded","cacheType":"conversation"}
{"cacheKey":"927143175d7f30426a33ff4d51a899d4d0a752dba58c8f41e22f26487c541ded","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:05:54"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":295,"responseTime":4993,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","therapistMessageLength":4,"timestamp":"2025-06-12 00:05:54"}
00:05:54 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","messageCount":6,"responseTime":4993,"therapistMessageLength":4,"patientResponseLength":295}
{"level":"info","message":"Analyzing cache points","messageCount":7,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:05:56"}
00:05:56 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":7,"minRequired":1024}
00:05:56 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1124,"messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ..."}
00:05:56 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1125,"messageContent":"–≤—ã—Ñ–∞..."}
00:05:56 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1199,"messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞..."}
00:05:56 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1201,"messageContent":"fdafsa..."}
00:05:56 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":6,"totalTokensCached":1201,"messagesInCache":7,"totalMessages":7}
00:05:56 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":7,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:05:56 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":329},{"index":2,"role":"user","hasCache":false,"contentLength":11},{"index":3,"role":"assistant","hasCache":false,"contentLength":464},{"index":4,"role":"user","hasCache":false,"contentLength":4},{"index":5,"role":"assistant","hasCache":false,"contentLength":295},{"index":6,"role":"user","hasCache":false,"contentLength":6}]}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:56","totalTokens":1124}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã—Ñ–∞...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:56","totalTokens":1125}
{"level":"info","message":"Cache point found","messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:56","totalTokens":1199}
{"level":"info","message":"Cache point found","messageContent":"fdafsa...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:56","totalTokens":1201}
{"cacheIndex":6,"level":"info","message":"Using cache point","messagesInCache":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:05:56","totalMessages":7,"totalTokensCached":1201}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:05:56","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":329,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":11,"hasCache":false,"index":2,"role":"user"},{"contentLength":464,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":4,"role":"user"},{"contentLength":295,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":6,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:05:56"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1505,"inputTokens":513,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":160,"responseTime":4568,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:01"}
00:06:01 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4568,"inputTokens":513,"outputTokens":160,"cacheCreationTokens":0,"cacheReadTokens":1505,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:06:01 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"cd9bc52f6efceae336648cbcbd7a5b1a56518d39b156c13e0e8d5c158f2cccf5","cacheType":"conversation"}
{"cacheKey":"cd9bc52f6efceae336648cbcbd7a5b1a56518d39b156c13e0e8d5c158f2cccf5","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:06:01"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":365,"responseTime":4571,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","therapistMessageLength":6,"timestamp":"2025-06-12 00:06:01"}
00:06:01 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","messageCount":8,"responseTime":4571,"therapistMessageLength":6,"patientResponseLength":365}
{"level":"info","message":"Analyzing cache points","messageCount":9,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:06:18"}
00:06:18 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":9,"minRequired":1024}
00:06:18 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1124,"messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ..."}
00:06:18 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1125,"messageContent":"–≤—ã—Ñ–∞..."}
00:06:18 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1199,"messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞..."}
00:06:18 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1201,"messageContent":"fdafsa..."}
00:06:18 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":7,"totalTokens":1293,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—É–ª–µ, –∑–∞–º–µ—Ç–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è—Å—å*\n\n–ü—Ä–æ—Å—Ç..."}
00:06:18 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":8,"totalTokens":1294,"messageContent":"adfa..."}
00:06:18 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":8,"totalTokensCached":1294,"messagesInCache":9,"totalMessages":9}
00:06:18 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":9,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:06:18 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":329},{"index":2,"role":"user","hasCache":false,"contentLength":11},{"index":3,"role":"assistant","hasCache":false,"contentLength":464},{"index":4,"role":"user","hasCache":false,"contentLength":4},{"index":5,"role":"assistant","hasCache":false,"contentLength":295},{"index":6,"role":"user","hasCache":false,"contentLength":6},{"index":7,"role":"assistant","hasCache":false,"contentLength":365},{"index":8,"role":"user","hasCache":false,"contentLength":4}]}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalTokens":1124}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã—Ñ–∞...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalTokens":1125}
{"level":"info","message":"Cache point found","messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalTokens":1199}
{"level":"info","message":"Cache point found","messageContent":"fdafsa...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalTokens":1201}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—É–ª–µ, –∑–∞–º–µ—Ç–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è—Å—å*\n\n–ü—Ä–æ—Å—Ç...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalTokens":1293}
{"level":"info","message":"Cache point found","messageContent":"adfa...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalTokens":1294}
{"cacheIndex":8,"level":"info","message":"Using cache point","messagesInCache":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:18","totalMessages":9,"totalTokensCached":1294}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:06:18","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":329,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":11,"hasCache":false,"index":2,"role":"user"},{"contentLength":464,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":4,"role":"user"},{"contentLength":295,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":6,"hasCache":false,"index":6,"role":"user"},{"contentLength":365,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:06:18"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1505,"inputTokens":678,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":144,"responseTime":4376,"service":"psycho-trainer","timestamp":"2025-06-12 00:06:22"}
00:06:22 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4376,"inputTokens":678,"outputTokens":144,"cacheCreationTokens":0,"cacheReadTokens":1505,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:06:22 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"63d3f2215e2f6daa56da9c2c365de9aec3a680307728d661328d622618dcb73e","cacheType":"conversation"}
{"cacheKey":"63d3f2215e2f6daa56da9c2c365de9aec3a680307728d661328d622618dcb73e","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:06:22"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":315,"responseTime":4378,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","therapistMessageLength":4,"timestamp":"2025-06-12 00:06:22"}
00:06:22 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","messageCount":10,"responseTime":4378,"therapistMessageLength":4,"patientResponseLength":315}
{"level":"info","message":"Analyzing cache points","messageCount":11,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:09:55"}
00:09:55 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":11,"minRequired":1024}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1124,"messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1125,"messageContent":"–≤—ã—Ñ–∞..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1199,"messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1201,"messageContent":"fdafsa..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":7,"totalTokens":1293,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—É–ª–µ, –∑–∞–º–µ—Ç–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è—Å—å*\n\n–ü—Ä–æ—Å—Ç..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":8,"totalTokens":1294,"messageContent":"adfa..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":9,"totalTokens":1373,"messageContent":"*–≤—Å—Ç–∞—ë—Ç, –∫—Ä–µ–ø–∫–æ –ø—Ä–∏–∂–∏–º–∞—è —Ä—é–∫–∑–∞–∫ –∫ –≥—Ä—É–¥–∏*\n\n–ò–∑–≤–∏–Ω–∏—Ç–µ..."}
00:09:55 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":10,"totalTokens":1376,"messageContent":"adfasdfadf..."}
00:09:55 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":10,"totalTokensCached":1376,"messagesInCache":11,"totalMessages":11}
00:09:55 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":11,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:09:55 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":329},{"index":2,"role":"user","hasCache":false,"contentLength":11},{"index":3,"role":"assistant","hasCache":false,"contentLength":464},{"index":4,"role":"user","hasCache":false,"contentLength":4},{"index":5,"role":"assistant","hasCache":false,"contentLength":295},{"index":6,"role":"user","hasCache":false,"contentLength":6},{"index":7,"role":"assistant","hasCache":false,"contentLength":365},{"index":8,"role":"user","hasCache":false,"contentLength":4},{"index":9,"role":"assistant","hasCache":false,"contentLength":315},{"index":10,"role":"user","hasCache":false,"contentLength":10}]}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1124}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã—Ñ–∞...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1125}
{"level":"info","message":"Cache point found","messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1199}
{"level":"info","message":"Cache point found","messageContent":"fdafsa...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1201}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—É–ª–µ, –∑–∞–º–µ—Ç–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è—Å—å*\n\n–ü—Ä–æ—Å—Ç...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1293}
{"level":"info","message":"Cache point found","messageContent":"adfa...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1294}
{"level":"info","message":"Cache point found","messageContent":"*–≤—Å—Ç–∞—ë—Ç, –∫—Ä–µ–ø–∫–æ –ø—Ä–∏–∂–∏–º–∞—è —Ä—é–∫–∑–∞–∫ –∫ –≥—Ä—É–¥–∏*\n\n–ò–∑–≤–∏–Ω–∏—Ç–µ...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1373}
{"level":"info","message":"Cache point found","messageContent":"adfasdfadf...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalTokens":1376}
{"cacheIndex":10,"level":"info","message":"Using cache point","messagesInCache":11,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:55","totalMessages":11,"totalTokensCached":1376}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:09:55","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":329,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":11,"hasCache":false,"index":2,"role":"user"},{"contentLength":464,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":4,"role":"user"},{"contentLength":295,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":6,"hasCache":false,"index":6,"role":"user"},{"contentLength":365,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":8,"role":"user"},{"contentLength":315,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":10,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:09:55"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1505,"inputTokens":831,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":168,"responseTime":3603,"service":"psycho-trainer","timestamp":"2025-06-12 00:09:58"}
00:09:58 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3603,"inputTokens":831,"outputTokens":168,"cacheCreationTokens":0,"cacheReadTokens":1505,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:09:58 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"c2d7d94edaad3027f88265434229c1edbe0cd576aeb170b725942d8fafc75ca5","cacheType":"conversation"}
{"cacheKey":"c2d7d94edaad3027f88265434229c1edbe0cd576aeb170b725942d8fafc75ca5","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:09:58"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":390,"responseTime":3604,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","therapistMessageLength":10,"timestamp":"2025-06-12 00:09:59"}
00:09:59 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","messageCount":12,"responseTime":3604,"therapistMessageLength":10,"patientResponseLength":390}
{"level":"info","message":"Analyzing cache points","messageCount":13,"minRequired":1024,"service":"psycho-trainer","systemTokens":913,"timestamp":"2025-06-12 00:10:05"}
00:10:05 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":913,"messageCount":13,"minRequired":1024}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1124,"messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1125,"messageContent":"–≤—ã—Ñ–∞..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1199,"messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1201,"messageContent":"fdafsa..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":7,"totalTokens":1293,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—É–ª–µ, –∑–∞–º–µ—Ç–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è—Å—å*\n\n–ü—Ä–æ—Å—Ç..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":8,"totalTokens":1294,"messageContent":"adfa..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":9,"totalTokens":1373,"messageContent":"*–≤—Å—Ç–∞—ë—Ç, –∫—Ä–µ–ø–∫–æ –ø—Ä–∏–∂–∏–º–∞—è —Ä—é–∫–∑–∞–∫ –∫ –≥—Ä—É–¥–∏*\n\n–ò–∑–≤–∏–Ω–∏—Ç–µ..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":10,"totalTokens":1376,"messageContent":"adfasdfadf..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":11,"totalTokens":1474,"messageContent":"*—É–∂–µ —É –¥–≤–µ—Ä–∏, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –≤ –≥–æ–ª–æ—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä..."}
00:10:05 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":12,"totalTokens":1477,"messageContent":"asdfadsfa..."}
00:10:05 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":12,"totalTokensCached":1477,"messagesInCache":13,"totalMessages":13}
00:10:05 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":13,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:10:05 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3649}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":329},{"index":2,"role":"user","hasCache":false,"contentLength":11},{"index":3,"role":"assistant","hasCache":false,"contentLength":464},{"index":4,"role":"user","hasCache":false,"contentLength":4},{"index":5,"role":"assistant","hasCache":false,"contentLength":295},{"index":6,"role":"user","hasCache":false,"contentLength":6},{"index":7,"role":"assistant","hasCache":false,"contentLength":365},{"index":8,"role":"user","hasCache":false,"contentLength":4},{"index":9,"role":"assistant","hasCache":false,"contentLength":315},{"index":10,"role":"user","hasCache":false,"contentLength":10},{"index":11,"role":"assistant","hasCache":false,"contentLength":390},{"index":12,"role":"user","hasCache":false,"contentLength":9}]}
{"level":"info","message":"Cache point found","messageContent":"*—Å–ª–∞–±–æ —É–ª—ã–±–∞–µ—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Ç–µ—Ä–µ–±–∏—Ç—å —Ä—é–∫–∑–∞–∫*\n\n–î–∞, ...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1124}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã—Ñ–∞...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1125}
{"level":"info","message":"Cache point found","messageContent":"–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏... *–Ω–∞...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1199}
{"level":"info","message":"Cache point found","messageContent":"fdafsa...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1201}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—É–ª–µ, –∑–∞–º–µ—Ç–Ω–æ –Ω–∞–ø—Ä—è–≥–∞—è—Å—å*\n\n–ü—Ä–æ—Å—Ç...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1293}
{"level":"info","message":"Cache point found","messageContent":"adfa...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1294}
{"level":"info","message":"Cache point found","messageContent":"*–≤—Å—Ç–∞—ë—Ç, –∫—Ä–µ–ø–∫–æ –ø—Ä–∏–∂–∏–º–∞—è —Ä—é–∫–∑–∞–∫ –∫ –≥—Ä—É–¥–∏*\n\n–ò–∑–≤–∏–Ω–∏—Ç–µ...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1373}
{"level":"info","message":"Cache point found","messageContent":"adfasdfadf...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1376}
{"level":"info","message":"Cache point found","messageContent":"*—É–∂–µ —É –¥–≤–µ—Ä–∏, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –≤ –≥–æ–ª–æ—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä...","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1474}
{"level":"info","message":"Cache point found","messageContent":"asdfadsfa...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalTokens":1477}
{"cacheIndex":12,"level":"info","message":"Using cache point","messagesInCache":13,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:05","totalMessages":13,"totalTokensCached":1477}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:10:05","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":329,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":11,"hasCache":false,"index":2,"role":"user"},{"contentLength":464,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":4,"role":"user"},{"contentLength":295,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":6,"hasCache":false,"index":6,"role":"user"},{"contentLength":365,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":4,"hasCache":false,"index":8,"role":"user"},{"contentLength":315,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":10,"hasCache":false,"index":10,"role":"user"},{"contentLength":390,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3649,"type":"text"}],"timestamp":"2025-06-12 00:10:05"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1505,"inputTokens":1006,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":97,"responseTime":3391,"service":"psycho-trainer","timestamp":"2025-06-12 00:10:08"}
00:10:08 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3391,"inputTokens":1006,"outputTokens":97,"cacheCreationTokens":0,"cacheReadTokens":1505,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:10:08 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"bb9b65ba7f20ab3d3ae570aa28aa43a34bb7bf2741717e149ad644d94376d330","cacheType":"conversation"}
{"cacheKey":"bb9b65ba7f20ab3d3ae570aa28aa43a34bb7bf2741717e149ad644d94376d330","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:10:08"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":233,"responseTime":3393,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","therapistMessageLength":9,"timestamp":"2025-06-12 00:10:08"}
00:10:08 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","messageCount":14,"responseTime":3393,"therapistMessageLength":9,"patientResponseLength":233}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 00:13:34","userId":1}
00:13:34 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":1,"hasCustomDescription":false}
00:13:34 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":0,"messageCount":1,"minRequired":1024}
00:13:34 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:13:34 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":1,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
00:13:34 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":0,"timestamp":"2025-06-12 00:13:34"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:13:34"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 00:13:34","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 00:13:34"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":752,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":812,"responseTime":13891,"service":"psycho-trainer","timestamp":"2025-06-12 00:13:48"}
00:13:48 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":13891,"inputTokens":752,"outputTokens":812,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
00:13:48 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":103,"uuid":"f30a0168-5f55-4ae5-80b3-800235f617e4","name":"–ö–ª–∞–≤–¥–∏—è –ü–µ—Ç—Ä–æ–≤–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞"}
{"level":"info","message":"Patient created successfully","name":"–ö–ª–∞–≤–¥–∏—è –ü–µ—Ç—Ä–æ–≤–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientId":103,"service":"psycho-trainer","timestamp":"2025-06-12 00:13:48","uuid":"f30a0168-5f55-4ae5-80b3-800235f617e4"}
{"callbackData":"invite_patient_103","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":1,"patientId":103,"patientName":"–ö–ª–∞–≤–¥–∏—è –ü–µ—Ç—Ä–æ–≤–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","service":"psycho-trainer","timestamp":"2025-06-12 00:13:48","userId":1}
00:13:48 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":1,"patientId":103,"patientName":"–ö–ª–∞–≤–¥–∏—è –ü–µ—Ç—Ä–æ–≤–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞","patientCreatedBy":1,"callbackData":"invite_patient_103"}
{"data":"invite_patient_103","level":"info","message":"Processing patient invitation callback","parsedPatientId":103,"patientId":103,"service":"psycho-trainer","telegramId":434085347,"timestamp":"2025-06-12 00:13:50","userId":1}
00:13:50 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":434085347,"userId":1,"patientId":103,"data":"invite_patient_103","parsedPatientId":103}
00:13:50 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":103,"patientFound":true,"patientCreatedBy":1,"userId":1,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":1,"patientFound":true,"patientId":103,"service":"psycho-trainer","timestamp":"2025-06-12 00:13:50","userId":1}
{"duration":9,"level":"info","message":"Session ended","messageCount":14,"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","timestamp":"2025-06-12 00:13:50"}
00:13:50 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","duration":9,"messageCount":14}
00:13:50 [[32MINFO[39M]: Previous session ended automatically {"service":"psycho-trainer","userId":1,"sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36"}
00:13:50 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":96,"sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","userId":1,"patientId":103}
00:13:50 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":1,"minRequired":1024}
00:13:50 [[32MINFO[39M]: No cache points found, using simple system prompt cache {"service":"psycho-trainer"}
00:13:50 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:13:50 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Previous session ended automatically","service":"psycho-trainer","sessionUuid":"91f1801d-9ea6-49b1-9e58-1c658355ca36","timestamp":"2025-06-12 00:13:50","userId":1}
{"level":"info","message":"Session created","patientId":103,"service":"psycho-trainer","sessionId":96,"sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","timestamp":"2025-06-12 00:13:50","userId":1}
{"level":"info","message":"Analyzing cache points","messageCount":1,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:13:50"}
{"level":"info","message":"No cache points found, using simple system prompt cache","service":"psycho-trainer","timestamp":"2025-06-12 00:13:50"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:13:50","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:13:50"}
{"cacheCreated":true,"cacheCreationTokens":1456,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":248,"responseTime":6056,"service":"psycho-trainer","timestamp":"2025-06-12 00:13:56"}
00:13:56 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6056,"inputTokens":26,"outputTokens":248,"cacheCreationTokens":1456,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
00:13:56 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"5ea14a30381fb1cdd536139390c1c2b9e89b4b8b5c4a254da0623c93ed3df5a7","cacheType":"conversation"}
{"cacheKey":"5ea14a30381fb1cdd536139390c1c2b9e89b4b8b5c4a254da0623c93ed3df5a7","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:13:56"}
{"level":"info","message":"Patient invited and session started","patientId":103,"service":"psycho-trainer","sessionId":96,"timestamp":"2025-06-12 00:13:56","userId":1}
00:13:56 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":1,"patientId":103,"sessionId":96}
{"level":"info","message":"Analyzing cache points","messageCount":3,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:14:06"}
00:14:06 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":3,"minRequired":1024}
00:14:06 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":2,"totalTokens":1025,"messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏..."}
00:14:06 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":2,"totalTokensCached":1025,"messagesInCache":3,"totalMessages":3}
00:14:06 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:14:06 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":557},{"index":2,"role":"user","hasCache":false,"contentLength":18}]}
{"level":"info","message":"Cache point found","messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏...","messageIndex":2,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:06","totalTokens":1025}
{"cacheIndex":2,"level":"info","message":"Using cache point","messagesInCache":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:06","totalMessages":3,"totalTokensCached":1025}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:14:06","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":557,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":18,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:14:06"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1456,"inputTokens":284,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":261,"responseTime":5858,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:11"}
00:14:11 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5858,"inputTokens":284,"outputTokens":261,"cacheCreationTokens":0,"cacheReadTokens":1456,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:14:11 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"29395af39dd13d6556073c0d3bdae9eada927f99a85ddde97e504f329028647a","cacheType":"conversation"}
{"cacheKey":"29395af39dd13d6556073c0d3bdae9eada927f99a85ddde97e504f329028647a","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:14:11"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":616,"responseTime":5860,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","therapistMessageLength":18,"timestamp":"2025-06-12 00:14:12"}
00:14:12 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","messageCount":4,"responseTime":5860,"therapistMessageLength":18,"patientResponseLength":616}
{"level":"info","message":"Analyzing cache points","messageCount":5,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:14:16"}
00:14:16 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":5,"minRequired":1024}
00:14:16 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":2,"totalTokens":1025,"messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏..."}
00:14:16 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1179,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç..."}
00:14:16 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1184,"messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è..."}
00:14:16 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":4,"totalTokensCached":1184,"messagesInCache":5,"totalMessages":5}
00:14:16 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:14:16 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":557},{"index":2,"role":"user","hasCache":false,"contentLength":18},{"index":3,"role":"assistant","hasCache":false,"contentLength":616},{"index":4,"role":"user","hasCache":false,"contentLength":19}]}
{"level":"info","message":"Cache point found","messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏...","messageIndex":2,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:16","totalTokens":1025}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:16","totalTokens":1179}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:16","totalTokens":1184}
{"cacheIndex":4,"level":"info","message":"Using cache point","messagesInCache":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:16","totalMessages":5,"totalTokensCached":1184}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:14:16","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":557,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":18,"hasCache":false,"index":2,"role":"user"},{"contentLength":616,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":19,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:14:16"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1456,"inputTokens":555,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":257,"responseTime":6280,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:23"}
00:14:23 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6280,"inputTokens":555,"outputTokens":257,"cacheCreationTokens":0,"cacheReadTokens":1456,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:14:23 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"9269a6b13e6cd89d52666780fd9d0e16fee40b98c88e54302293559eb0c5b755","cacheType":"conversation"}
{"cacheKey":"9269a6b13e6cd89d52666780fd9d0e16fee40b98c88e54302293559eb0c5b755","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:14:23"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":582,"responseTime":6283,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","therapistMessageLength":19,"timestamp":"2025-06-12 00:14:23"}
00:14:23 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","messageCount":6,"responseTime":6283,"therapistMessageLength":19,"patientResponseLength":582}
{"level":"info","message":"Analyzing cache points","messageCount":7,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:14:32"}
00:14:32 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":7,"minRequired":1024}
00:14:32 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":2,"totalTokens":1025,"messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏..."}
00:14:32 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1179,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç..."}
00:14:32 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1184,"messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è..."}
00:14:32 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1330,"messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ..."}
00:14:32 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1335,"messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ..."}
00:14:32 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":6,"totalTokensCached":1335,"messagesInCache":7,"totalMessages":7}
00:14:32 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":7,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:14:32 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":557},{"index":2,"role":"user","hasCache":false,"contentLength":18},{"index":3,"role":"assistant","hasCache":false,"contentLength":616},{"index":4,"role":"user","hasCache":false,"contentLength":19},{"index":5,"role":"assistant","hasCache":false,"contentLength":582},{"index":6,"role":"user","hasCache":false,"contentLength":20}]}
{"level":"info","message":"Cache point found","messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏...","messageIndex":2,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:32","totalTokens":1025}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:32","totalTokens":1179}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:32","totalTokens":1184}
{"level":"info","message":"Cache point found","messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:32","totalTokens":1330}
{"level":"info","message":"Cache point found","messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:32","totalTokens":1335}
{"cacheIndex":6,"level":"info","message":"Using cache point","messagesInCache":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:32","totalMessages":7,"totalTokensCached":1335}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:14:32","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":557,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":18,"hasCache":false,"index":2,"role":"user"},{"contentLength":616,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":19,"hasCache":false,"index":4,"role":"user"},{"contentLength":582,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":20,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:14:32"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1456,"inputTokens":823,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":298,"responseTime":7243,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:39"}
00:14:39 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7243,"inputTokens":823,"outputTokens":298,"cacheCreationTokens":0,"cacheReadTokens":1456,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:14:39 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"6dd08e3ad58dc25c58161ef5f8f7835e06c8522ebccb4cdd6374efc6aa59d7a2","cacheType":"conversation"}
{"cacheKey":"6dd08e3ad58dc25c58161ef5f8f7835e06c8522ebccb4cdd6374efc6aa59d7a2","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:14:39"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":644,"responseTime":7246,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","therapistMessageLength":20,"timestamp":"2025-06-12 00:14:39"}
00:14:39 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","messageCount":8,"responseTime":7246,"therapistMessageLength":20,"patientResponseLength":644}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 00:14:51"}
00:14:51 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
00:14:51 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"95MB","heapUsed":"23MB"},"database":null,"uptime":"10min"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"95MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 00:14:51","uptime":"10min"}
{"level":"info","message":"Analyzing cache points","messageCount":9,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:14:58"}
00:14:58 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":9,"minRequired":1024}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":2,"totalTokens":1025,"messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏..."}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1179,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç..."}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1184,"messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è..."}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1330,"messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ..."}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1335,"messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ..."}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":7,"totalTokens":1496,"messageContent":"*–≤–Ω–µ–∑–∞–ø–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –ª–∏—Ü–µ, –≥–æ–ª–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂..."}
00:14:58 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":8,"totalTokens":1499,"messageContent":"–Ω–µ –±–æ–π—Ç–µ—Å—å..."}
00:14:58 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":8,"totalTokensCached":1499,"messagesInCache":9,"totalMessages":9}
00:14:58 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":9,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:14:58 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":557},{"index":2,"role":"user","hasCache":false,"contentLength":18},{"index":3,"role":"assistant","hasCache":false,"contentLength":616},{"index":4,"role":"user","hasCache":false,"contentLength":19},{"index":5,"role":"assistant","hasCache":false,"contentLength":582},{"index":6,"role":"user","hasCache":false,"contentLength":20},{"index":7,"role":"assistant","hasCache":false,"contentLength":644},{"index":8,"role":"user","hasCache":false,"contentLength":10}]}
{"level":"info","message":"Cache point found","messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏...","messageIndex":2,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1025}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1179}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1184}
{"level":"info","message":"Cache point found","messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1330}
{"level":"info","message":"Cache point found","messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1335}
{"level":"info","message":"Cache point found","messageContent":"*–≤–Ω–µ–∑–∞–ø–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –ª–∏—Ü–µ, –≥–æ–ª–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1496}
{"level":"info","message":"Cache point found","messageContent":"–Ω–µ –±–æ–π—Ç–µ—Å—å...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalTokens":1499}
{"cacheIndex":8,"level":"info","message":"Using cache point","messagesInCache":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:14:58","totalMessages":9,"totalTokensCached":1499}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:14:58","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":557,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":18,"hasCache":false,"index":2,"role":"user"},{"contentLength":616,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":19,"hasCache":false,"index":4,"role":"user"},{"contentLength":582,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":20,"hasCache":false,"index":6,"role":"user"},{"contentLength":644,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":10,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:14:58"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1456,"inputTokens":1130,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":315,"responseTime":6847,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:05"}
00:15:05 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6847,"inputTokens":1130,"outputTokens":315,"cacheCreationTokens":0,"cacheReadTokens":1456,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:15:05 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"7147f48798bf70ed841a552584afaaaccfccde198a8eb334a8e7134790f91b4e","cacheType":"conversation"}
{"cacheKey":"7147f48798bf70ed841a552584afaaaccfccde198a8eb334a8e7134790f91b4e","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:15:05"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":728,"responseTime":6848,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","therapistMessageLength":10,"timestamp":"2025-06-12 00:15:05"}
00:15:05 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","messageCount":10,"responseTime":6848,"therapistMessageLength":10,"patientResponseLength":728}
{"level":"info","message":"Analyzing cache points","messageCount":11,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:15:20"}
00:15:20 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":11,"minRequired":1024}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":2,"totalTokens":1025,"messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1179,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1184,"messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1330,"messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1335,"messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":7,"totalTokens":1496,"messageContent":"*–≤–Ω–µ–∑–∞–ø–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –ª–∏—Ü–µ, –≥–æ–ª–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":8,"totalTokens":1499,"messageContent":"–Ω–µ –±–æ–π—Ç–µ—Å—å..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":9,"totalTokens":1681,"messageContent":"*—Ä–µ–∑–∫–æ –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è, –≤ –≥–æ–ª–æ—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω..."}
00:15:20 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":10,"totalTokens":1687,"messageContent":"–í—ã –Ω–µ –º–∞–ª—å–µ–Ω—å–∫–∞—è –¥–µ–≤–æ—á–∫–∞..."}
00:15:20 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":10,"totalTokensCached":1687,"messagesInCache":11,"totalMessages":11}
00:15:20 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":11,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:15:20 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":557},{"index":2,"role":"user","hasCache":false,"contentLength":18},{"index":3,"role":"assistant","hasCache":false,"contentLength":616},{"index":4,"role":"user","hasCache":false,"contentLength":19},{"index":5,"role":"assistant","hasCache":false,"contentLength":582},{"index":6,"role":"user","hasCache":false,"contentLength":20},{"index":7,"role":"assistant","hasCache":false,"contentLength":644},{"index":8,"role":"user","hasCache":false,"contentLength":10},{"index":9,"role":"assistant","hasCache":false,"contentLength":728},{"index":10,"role":"user","hasCache":false,"contentLength":24}]}
{"level":"info","message":"Cache point found","messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏...","messageIndex":2,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1025}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1179}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1184}
{"level":"info","message":"Cache point found","messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1330}
{"level":"info","message":"Cache point found","messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1335}
{"level":"info","message":"Cache point found","messageContent":"*–≤–Ω–µ–∑–∞–ø–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –ª–∏—Ü–µ, –≥–æ–ª–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1496}
{"level":"info","message":"Cache point found","messageContent":"–Ω–µ –±–æ–π—Ç–µ—Å—å...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1499}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è, –≤ –≥–æ–ª–æ—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1681}
{"level":"info","message":"Cache point found","messageContent":"–í—ã –Ω–µ –º–∞–ª—å–µ–Ω—å–∫–∞—è –¥–µ–≤–æ—á–∫–∞...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalTokens":1687}
{"cacheIndex":10,"level":"info","message":"Using cache point","messagesInCache":11,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:20","totalMessages":11,"totalTokensCached":1687}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:15:20","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":557,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":18,"hasCache":false,"index":2,"role":"user"},{"contentLength":616,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":19,"hasCache":false,"index":4,"role":"user"},{"contentLength":582,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":20,"hasCache":false,"index":6,"role":"user"},{"contentLength":644,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":10,"hasCache":false,"index":8,"role":"user"},{"contentLength":728,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":24,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:15:20"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1456,"inputTokens":1460,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":292,"responseTime":6390,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:26"}
00:15:26 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6390,"inputTokens":1460,"outputTokens":292,"cacheCreationTokens":0,"cacheReadTokens":1456,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:15:26 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"b057db04ae1a16fb279ee6035e73a07352a8ef3c025183a060cfb84a3c8e1b85","cacheType":"conversation"}
{"cacheKey":"b057db04ae1a16fb279ee6035e73a07352a8ef3c025183a060cfb84a3c8e1b85","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:15:26"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":645,"responseTime":6392,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","therapistMessageLength":24,"timestamp":"2025-06-12 00:15:27"}
00:15:27 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","messageCount":12,"responseTime":6392,"therapistMessageLength":24,"patientResponseLength":645}
{"level":"info","message":"Analyzing cache points","messageCount":13,"minRequired":1024,"service":"psycho-trainer","systemTokens":871,"timestamp":"2025-06-12 00:15:59"}
00:15:59 [[32MINFO[39M]: Analyzing cache points {"service":"psycho-trainer","systemTokens":871,"messageCount":13,"minRequired":1024}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":2,"totalTokens":1025,"messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":3,"totalTokens":1179,"messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":4,"totalTokens":1184,"messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":5,"totalTokens":1330,"messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":6,"totalTokens":1335,"messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":7,"totalTokens":1496,"messageContent":"*–≤–Ω–µ–∑–∞–ø–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –ª–∏—Ü–µ, –≥–æ–ª–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":8,"totalTokens":1499,"messageContent":"–Ω–µ –±–æ–π—Ç–µ—Å—å..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":9,"totalTokens":1681,"messageContent":"*—Ä–µ–∑–∫–æ –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è, –≤ –≥–æ–ª–æ—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":10,"totalTokens":1687,"messageContent":"–í—ã –Ω–µ –º–∞–ª—å–µ–Ω—å–∫–∞—è –¥–µ–≤–æ—á–∫–∞..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":11,"totalTokens":1849,"messageContent":"*—Å–º—è–≥—á–∞–µ—Ç—Å—è, —Å –ª–µ–≥–∫–æ–π —É–ª—ã–±–∫–æ–π*\n\n–í–æ—Ç —ç—Ç–æ –ø—Ä–∞–≤–¥–∞. –Ø ..."}
00:15:59 [[32MINFO[39M]: Cache point found {"service":"psycho-trainer","messageIndex":12,"totalTokens":1853,"messageContent":"–¥—É–º–∞—é –Ω–æ—Ä–º–∞–ª—å–Ω–æ..."}
00:15:59 [[32MINFO[39M]: Using cache point {"service":"psycho-trainer","cacheIndex":12,"totalTokensCached":1853,"messagesInCache":13,"totalMessages":13}
00:15:59 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":13,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:15:59 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3482}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":557},{"index":2,"role":"user","hasCache":false,"contentLength":18},{"index":3,"role":"assistant","hasCache":false,"contentLength":616},{"index":4,"role":"user","hasCache":false,"contentLength":19},{"index":5,"role":"assistant","hasCache":false,"contentLength":582},{"index":6,"role":"user","hasCache":false,"contentLength":20},{"index":7,"role":"assistant","hasCache":false,"contentLength":644},{"index":8,"role":"user","hasCache":false,"contentLength":10},{"index":9,"role":"assistant","hasCache":false,"contentLength":728},{"index":10,"role":"user","hasCache":false,"contentLength":24},{"index":11,"role":"assistant","hasCache":false,"contentLength":645},{"index":12,"role":"user","hasCache":false,"contentLength":15}]}
{"level":"info","message":"Cache point found","messageContent":"–æ—Ç–ª–∏—á–Ω–æ —á—Ç–æ –ø—Ä–∏—à–ª–∏...","messageIndex":2,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1025}
{"level":"info","message":"Cache point found","messageContent":"*–≤—ã–ø—Ä—è–º–ª—è–µ—Ç —Å–ø–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—Ç —Å –ª–µ–≥–∫–æ–π –Ω–∞–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç...","messageIndex":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1179}
{"level":"info","message":"Cache point found","messageContent":"–≤—ã —Ç–æ—á–Ω–æ –Ω–µ –±–æ–ª—å–Ω–∞—è...","messageIndex":4,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1184}
{"level":"info","message":"Cache point found","messageContent":"*–æ–∂–∏–≤–ª—è–µ—Ç—Å—è, —Å —è–≤–Ω—ã–º –æ–±–ª–µ–≥—á–µ–Ω–∏–µ–º*\n\n–ù—É –≤–æ—Ç –∏ —è –æ —Ç–æ...","messageIndex":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1330}
{"level":"info","message":"Cache point found","messageContent":"—Å –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ...","messageIndex":6,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1335}
{"level":"info","message":"Cache point found","messageContent":"*–≤–Ω–µ–∑–∞–ø–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –ª–∏—Ü–µ, –≥–æ–ª–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–∂...","messageIndex":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1496}
{"level":"info","message":"Cache point found","messageContent":"–Ω–µ –±–æ–π—Ç–µ—Å—å...","messageIndex":8,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1499}
{"level":"info","message":"Cache point found","messageContent":"*—Ä–µ–∑–∫–æ –≤—ã–ø—Ä—è–º–ª—è–µ—Ç—Å—è, –≤ –≥–æ–ª–æ—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω...","messageIndex":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1681}
{"level":"info","message":"Cache point found","messageContent":"–í—ã –Ω–µ –º–∞–ª—å–µ–Ω—å–∫–∞—è –¥–µ–≤–æ—á–∫–∞...","messageIndex":10,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1687}
{"level":"info","message":"Cache point found","messageContent":"*—Å–º—è–≥—á–∞–µ—Ç—Å—è, —Å –ª–µ–≥–∫–æ–π —É–ª—ã–±–∫–æ–π*\n\n–í–æ—Ç —ç—Ç–æ –ø—Ä–∞–≤–¥–∞. –Ø ...","messageIndex":11,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1849}
{"level":"info","message":"Cache point found","messageContent":"–¥—É–º–∞—é –Ω–æ—Ä–º–∞–ª—å–Ω–æ...","messageIndex":12,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalTokens":1853}
{"cacheIndex":12,"level":"info","message":"Using cache point","messagesInCache":13,"service":"psycho-trainer","timestamp":"2025-06-12 00:15:59","totalMessages":13,"totalTokensCached":1853}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:15:59","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":557,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":18,"hasCache":false,"index":2,"role":"user"},{"contentLength":616,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":19,"hasCache":false,"index":4,"role":"user"},{"contentLength":582,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":20,"hasCache":false,"index":6,"role":"user"},{"contentLength":644,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":10,"hasCache":false,"index":8,"role":"user"},{"contentLength":728,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":24,"hasCache":false,"index":10,"role":"user"},{"contentLength":645,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":15,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3482,"type":"text"}],"timestamp":"2025-06-12 00:15:59"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1456,"inputTokens":1761,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":329,"responseTime":7168,"service":"psycho-trainer","timestamp":"2025-06-12 00:16:06"}
00:16:06 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7168,"inputTokens":1761,"outputTokens":329,"cacheCreationTokens":0,"cacheReadTokens":1456,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:16:06 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"162a00f24423c6a13f5779ea7c8cc23d8950c158c951cd25382f6fcb2bade6b3","cacheType":"conversation"}
{"cacheKey":"162a00f24423c6a13f5779ea7c8cc23d8950c158c951cd25382f6fcb2bade6b3","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:16:06"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":731,"responseTime":7169,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","therapistMessageLength":15,"timestamp":"2025-06-12 00:16:06"}
00:16:06 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","messageCount":14,"responseTime":7169,"therapistMessageLength":15,"patientResponseLength":731}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","timestamp":"2025-06-12 00:20:59","userId":1}
00:20:59 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":1,"sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d"}
00:20:59 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","userId":1}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","timestamp":"2025-06-12 00:20:59","userId":1}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 00:24:51"}
00:24:51 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
00:24:51 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"96MB","heapUsed":"24MB"},"database":null,"uptime":"20min"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"96MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 00:24:51","uptime":"20min"}
{"duration":12,"level":"info","message":"Session ended","messageCount":14,"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","timestamp":"2025-06-12 00:25:59"}
00:25:59 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","duration":12,"messageCount":14}
00:25:59 [[31MERROR[39M]: Cannot send inactivity end notification - no chat ID found {"service":"psycho-trainer","userId":1,"sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d"}
00:25:59 [[32MINFO[39M]: Session ended due to inactivity {"service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","userId":1}
{"level":"error","message":"Cannot send inactivity end notification - no chat ID found","service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","timestamp":"2025-06-12 00:25:59","userId":1}
{"level":"info","message":"Session ended due to inactivity","service":"psycho-trainer","sessionUuid":"1d1f5bf3-f7ea-4577-b31c-8ff4a64e265d","timestamp":"2025-06-12 00:25:59","userId":1}
{"level":"info","message":"Received SIGTERM, starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-12 00:32:23"}
00:32:23 [[32MINFO[39M]: Received SIGTERM, starting graceful shutdown... {"service":"psycho-trainer"}
00:32:23 [[32MINFO[39M]: Starting graceful shutdown... {"service":"psycho-trainer"}
{"level":"info","message":"Starting graceful shutdown...","service":"psycho-trainer","timestamp":"2025-06-12 00:32:23"}
{"level":"info","message":"Bot polling stopped","service":"psycho-trainer","timestamp":"2025-06-12 00:32:23"}
00:32:23 [[32MINFO[39M]: Bot polling stopped {"service":"psycho-trainer"}
00:32:23 [[32MINFO[39M]: Database connection closed {"service":"psycho-trainer"}
00:32:23 [[32MINFO[39M]: Database connection closed {"service":"psycho-trainer"}
00:32:23 [[32MINFO[39M]: Graceful shutdown completed {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Initializing PsychoTrainer Bot v3.0... {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Database schema loaded successfully {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Database initialized successfully {"service":"psycho-trainer","path":"./data/psycho_trainer.db","pragma":{"journal_mode":"WAL","synchronous":"NORMAL","cache_size":-64000,"temp_store":"MEMORY","mmap_size":268435456}}
00:32:25 [[32MINFO[39M]: Database initialized successfully {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Event handlers set up {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Error handlers set up {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Graceful shutdown handlers set up {"service":"psycho-trainer"}
00:32:25 [[32MINFO[39M]: Inactivity callbacks set up {"service":"psycho-trainer"}
{"level":"info","message":"Initializing PsychoTrainer Bot v3.0...","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Database schema loaded successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Database initialized successfully","path":"./data/psycho_trainer.db","pragma":{"cache_size":-64000,"journal_mode":"WAL","mmap_size":268435456,"synchronous":"NORMAL","temp_store":"MEMORY"},"service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Database initialized successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Event handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Error handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Graceful shutdown handlers set up","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"level":"info","message":"Inactivity callbacks set up","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"commandCount":13,"level":"info","message":"Bot commands menu set up","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
00:32:25 [[32MINFO[39M]: Bot commands menu set up {"service":"psycho-trainer","commandCount":13}
00:32:25 [[32MINFO[39M]: Bot initialized successfully {"service":"psycho-trainer"}
{"level":"info","message":"Bot initialized successfully","service":"psycho-trainer","timestamp":"2025-06-12 00:32:25"}
{"botUsername":"Intervisor_bot","level":"info","message":"ü§ñ PsychoTrainer Bot v3.0 started successfully!","nodeEnv":"development","service":"psycho-trainer","timestamp":"2025-06-12 00:32:35"}
00:32:35 [[32MINFO[39M]: ü§ñ PsychoTrainer Bot v3.0 started successfully! {"service":"psycho-trainer","nodeEnv":"development","botUsername":"Intervisor_bot"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 00:41:17","userId":8}
00:41:17 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":8,"hasCustomDescription":false}
00:41:17 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
00:41:17 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":8,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
00:41:17 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 00:41:17"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 00:41:17","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 00:41:17"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":753,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":859,"responseTime":12649,"service":"psycho-trainer","timestamp":"2025-06-12 00:41:30"}
00:41:30 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":12649,"inputTokens":753,"outputTokens":859,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
00:41:30 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":104,"uuid":"74703e9c-dfdc-4a53-a2ff-429b1c8e61e0","name":"–ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á –°–µ–ª–µ–∑–Ω–µ–≤"}
{"level":"info","message":"Patient created successfully","name":"–ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á –°–µ–ª–µ–∑–Ω–µ–≤","patientId":104,"service":"psycho-trainer","timestamp":"2025-06-12 00:41:30","uuid":"74703e9c-dfdc-4a53-a2ff-429b1c8e61e0"}
{"callbackData":"invite_patient_104","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":8,"patientId":104,"patientName":"–ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á –°–µ–ª–µ–∑–Ω–µ–≤","service":"psycho-trainer","timestamp":"2025-06-12 00:41:30","userId":8}
00:41:30 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":8,"patientId":104,"patientName":"–ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á –°–µ–ª–µ–∑–Ω–µ–≤","patientCreatedBy":8,"callbackData":"invite_patient_104"}
{"data":"invite_patient_104","level":"info","message":"Processing patient invitation callback","parsedPatientId":104,"patientId":104,"service":"psycho-trainer","telegramId":866170039,"timestamp":"2025-06-12 00:41:46","userId":8}
00:41:46 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":866170039,"userId":8,"patientId":104,"data":"invite_patient_104","parsedPatientId":104}
00:41:46 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":104,"patientFound":true,"patientCreatedBy":8,"userId":8,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":8,"patientFound":true,"patientId":104,"service":"psycho-trainer","timestamp":"2025-06-12 00:41:46","userId":8}
{"level":"info","message":"Session created","patientId":104,"service":"psycho-trainer","sessionId":97,"sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","timestamp":"2025-06-12 00:41:46","userId":8}
00:41:46 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":97,"sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","userId":8,"patientId":104}
00:41:46 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
00:41:46 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:41:46 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 00:41:46"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:41:46","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:41:46"}
{"cacheCreated":true,"cacheCreationTokens":1507,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":148,"responseTime":4400,"service":"psycho-trainer","timestamp":"2025-06-12 00:41:50"}
00:41:50 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4400,"inputTokens":26,"outputTokens":148,"cacheCreationTokens":1507,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
00:41:50 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"3bc6a79c352fdd8f7aeaed155e0465162374545b5ebf28c76ade653174ee53ea","cacheType":"conversation"}
{"cacheKey":"3bc6a79c352fdd8f7aeaed155e0465162374545b5ebf28c76ade653174ee53ea","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:41:50"}
{"level":"info","message":"Patient invited and session started","patientId":104,"service":"psycho-trainer","sessionId":97,"timestamp":"2025-06-12 00:41:50","userId":8}
00:41:50 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":8,"patientId":104,"sessionId":97}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 00:42:35"}
00:42:35 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
00:42:35 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"95MB","heapUsed":"21MB"},"database":null,"uptime":"10min"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"95MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 00:42:35","uptime":"10min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":3,"service":"psycho-trainer","timestamp":"2025-06-12 00:42:49"}
00:42:49 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":3}
00:42:49 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:42:49 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:42:49","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:42:49"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":202,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":123,"responseTime":3147,"service":"psycho-trainer","timestamp":"2025-06-12 00:42:52"}
00:42:52 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3147,"inputTokens":202,"outputTokens":123,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:42:52 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"9f5f9109be6996af3aaa026beed65c93925667c75c69f65b0ff921ed990500db","cacheType":"conversation"}
{"cacheKey":"9f5f9109be6996af3aaa026beed65c93925667c75c69f65b0ff921ed990500db","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:42:52"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":279,"responseTime":3149,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":54,"timestamp":"2025-06-12 00:42:52"}
00:42:52 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":4,"responseTime":3149,"therapistMessageLength":54,"patientResponseLength":279}
{"level":"info","message":"Using simple system prompt cache only","messageCount":5,"service":"psycho-trainer","timestamp":"2025-06-12 00:44:16"}
00:44:16 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":5}
00:44:16 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:44:16 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:44:16","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:44:16"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":391,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":304,"responseTime":6201,"service":"psycho-trainer","timestamp":"2025-06-12 00:44:22"}
00:44:22 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6201,"inputTokens":391,"outputTokens":304,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:44:22 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"d7f55adc5c68871b58eea8e05eb6b66c73420b14e674ccbea56385fe4d0238f3","cacheType":"conversation"}
{"cacheKey":"d7f55adc5c68871b58eea8e05eb6b66c73420b14e674ccbea56385fe4d0238f3","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:44:22"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":775,"responseTime":6202,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":162,"timestamp":"2025-06-12 00:44:22"}
00:44:22 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":6,"responseTime":6202,"therapistMessageLength":162,"patientResponseLength":775}
{"level":"info","message":"Using simple system prompt cache only","messageCount":7,"service":"psycho-trainer","timestamp":"2025-06-12 00:46:06"}
00:46:06 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":7}
00:46:06 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":7,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:46:06 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:46:06","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:46:06"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":761,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":429,"responseTime":8430,"service":"psycho-trainer","timestamp":"2025-06-12 00:46:14"}
00:46:14 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":8430,"inputTokens":761,"outputTokens":429,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:46:14 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"a355002dd48f2531c496a20d02144b8a70bc2f3226bad1e7678605cbc1f37743","cacheType":"conversation"}
{"cacheKey":"a355002dd48f2531c496a20d02144b8a70bc2f3226bad1e7678605cbc1f37743","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:46:14"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":987,"responseTime":8431,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":135,"timestamp":"2025-06-12 00:46:14"}
00:46:14 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":8,"responseTime":8431,"therapistMessageLength":135,"patientResponseLength":987}
{"level":"info","message":"Using simple system prompt cache only","messageCount":9,"service":"psycho-trainer","timestamp":"2025-06-12 00:48:16"}
00:48:16 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":9}
00:48:16 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":9,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:48:16 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:48:16","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:48:16"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":1199,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":305,"responseTime":7445,"service":"psycho-trainer","timestamp":"2025-06-12 00:48:24"}
00:48:24 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7445,"inputTokens":1199,"outputTokens":305,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:48:24 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"d148b65ea227190dfd83a906776f75f5c65398cea89d7c12f48c4ad9551693ad","cacheType":"conversation"}
{"cacheKey":"d148b65ea227190dfd83a906776f75f5c65398cea89d7c12f48c4ad9551693ad","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:48:24"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":769,"responseTime":7447,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":7,"timestamp":"2025-06-12 00:48:24"}
00:48:24 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":10,"responseTime":7447,"therapistMessageLength":7,"patientResponseLength":769}
{"level":"info","message":"Using simple system prompt cache only","messageCount":11,"service":"psycho-trainer","timestamp":"2025-06-12 00:50:09"}
00:50:09 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":11}
00:50:09 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":11,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:50:09 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:50:09","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:50:09"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":1557,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":322,"responseTime":6981,"service":"psycho-trainer","timestamp":"2025-06-12 00:50:16"}
00:50:16 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6981,"inputTokens":1557,"outputTokens":322,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:50:16 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"cfd94dc75404b499758dac6d38eef6348d4be01c031885ed537623b3034e7b6d","cacheType":"conversation"}
{"cacheKey":"cfd94dc75404b499758dac6d38eef6348d4be01c031885ed537623b3034e7b6d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:50:16"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":722,"responseTime":6983,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":124,"timestamp":"2025-06-12 00:50:16"}
00:50:16 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":12,"responseTime":6983,"therapistMessageLength":124,"patientResponseLength":722}
{"level":"info","message":"Using simple system prompt cache only","messageCount":13,"service":"psycho-trainer","timestamp":"2025-06-12 00:51:09"}
00:51:09 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":13}
00:51:09 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":13,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:51:09 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:51:09","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:51:09"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":1904,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":309,"responseTime":6446,"service":"psycho-trainer","timestamp":"2025-06-12 00:51:15"}
00:51:15 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6446,"inputTokens":1904,"outputTokens":309,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:51:15 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"4412444ac56b0a0b4ad1e9170a678eeacd87573a58edfe6bc397965e5fec8fe4","cacheType":"conversation"}
{"cacheKey":"4412444ac56b0a0b4ad1e9170a678eeacd87573a58edfe6bc397965e5fec8fe4","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:51:15"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":746,"responseTime":6448,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":46,"timestamp":"2025-06-12 00:51:15"}
00:51:15 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":14,"responseTime":6448,"therapistMessageLength":46,"patientResponseLength":746}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 00:52:35"}
00:52:35 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
00:52:35 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"98MB","heapUsed":"23MB"},"database":null,"uptime":"20min"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"98MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 00:52:35","uptime":"20min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":15,"service":"psycho-trainer","timestamp":"2025-06-12 00:53:45"}
00:53:45 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":15}
00:53:45 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":15,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:53:45 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":15,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:53:45","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:53:45"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":2276,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":315,"responseTime":8195,"service":"psycho-trainer","timestamp":"2025-06-12 00:53:53"}
00:53:53 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":8195,"inputTokens":2276,"outputTokens":315,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:53:53 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"34434074c75cbfdda6502f1c5f1106e595b5d7a23fa9716df765751e54c77a48","cacheType":"conversation"}
{"cacheKey":"34434074c75cbfdda6502f1c5f1106e595b5d7a23fa9716df765751e54c77a48","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:53:53"}
{"level":"info","message":"Session message exchanged","messageCount":16,"patientResponseLength":767,"responseTime":8197,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":146,"timestamp":"2025-06-12 00:53:53"}
00:53:53 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":16,"responseTime":8197,"therapistMessageLength":146,"patientResponseLength":767}
{"level":"info","message":"Using simple system prompt cache only","messageCount":17,"service":"psycho-trainer","timestamp":"2025-06-12 00:57:29"}
00:57:29 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":17}
00:57:29 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":17,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
00:57:29 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":17,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 00:57:29","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 00:57:29"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":2743,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":371,"responseTime":7854,"service":"psycho-trainer","timestamp":"2025-06-12 00:57:37"}
00:57:37 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7854,"inputTokens":2743,"outputTokens":371,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
00:57:37 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"47bbcfb303da32b2633966ec06d964bdf8f1684aaa614df91bbbc8060aa0113c","cacheType":"conversation"}
{"cacheKey":"47bbcfb303da32b2633966ec06d964bdf8f1684aaa614df91bbbc8060aa0113c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 00:57:37"}
{"level":"info","message":"Session message exchanged","messageCount":18,"patientResponseLength":900,"responseTime":7855,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":370,"timestamp":"2025-06-12 00:57:37"}
00:57:37 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":18,"responseTime":7855,"therapistMessageLength":370,"patientResponseLength":900}
{"level":"info","message":"Using simple system prompt cache only","messageCount":19,"service":"psycho-trainer","timestamp":"2025-06-12 01:00:33"}
01:00:33 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":19}
01:00:33 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":19,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:00:33 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":19,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:00:33","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:00:33"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":3273,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":358,"responseTime":8279,"service":"psycho-trainer","timestamp":"2025-06-12 01:00:41"}
01:00:41 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":8279,"inputTokens":3273,"outputTokens":358,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:00:41 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"6aa393379137967e968c17625925fade7b99ffaee77b80be23ff7731e75ee182","cacheType":"conversation"}
{"cacheKey":"6aa393379137967e968c17625925fade7b99ffaee77b80be23ff7731e75ee182","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:00:41"}
{"level":"info","message":"Session message exchanged","messageCount":20,"patientResponseLength":831,"responseTime":8281,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":392,"timestamp":"2025-06-12 01:00:41"}
01:00:41 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":20,"responseTime":8281,"therapistMessageLength":392,"patientResponseLength":831}
{"level":"info","message":"Cleaned 42 expired cache entries","service":"psycho-trainer","timestamp":"2025-06-12 01:02:25"}
01:02:25 [[32MINFO[39M]: Cleaned 42 expired cache entries {"service":"psycho-trainer"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 01:02:35"}
01:02:35 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
01:02:35 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"102MB","heapUsed":"25MB"},"database":null,"uptime":"30min"}
{"database":null,"level":"info","memory":{"heapUsed":"25MB","rss":"102MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 01:02:35","uptime":"30min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":21,"service":"psycho-trainer","timestamp":"2025-06-12 01:05:29"}
01:05:29 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":21}
01:05:29 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":21,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:05:29 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":21,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:05:29","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:05:29"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":3662,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":326,"responseTime":6662,"service":"psycho-trainer","timestamp":"2025-06-12 01:05:36"}
01:05:36 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6662,"inputTokens":3662,"outputTokens":326,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:05:36 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"e8c17dd998359e6b78632a283c511a37a9faca673e027426ecc2f69770057cab","cacheType":"conversation"}
{"cacheKey":"e8c17dd998359e6b78632a283c511a37a9faca673e027426ecc2f69770057cab","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:05:36"}
{"level":"info","message":"Session message exchanged","messageCount":22,"patientResponseLength":744,"responseTime":6663,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":78,"timestamp":"2025-06-12 01:05:36"}
01:05:36 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":22,"responseTime":6663,"therapistMessageLength":78,"patientResponseLength":744}
{"level":"info","message":"Using simple system prompt cache only","messageCount":23,"service":"psycho-trainer","timestamp":"2025-06-12 01:06:13"}
01:06:13 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":23}
01:06:13 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":23,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:06:13 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":23,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:06:13","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:06:13"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":4014,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":328,"responseTime":6962,"service":"psycho-trainer","timestamp":"2025-06-12 01:06:20"}
01:06:20 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6962,"inputTokens":4014,"outputTokens":328,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:06:20 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"52a053a1d6da0b03d26b97b2e417496f5d625fa7a7ac074443b3b6f95f4caca3","cacheType":"conversation"}
{"cacheKey":"52a053a1d6da0b03d26b97b2e417496f5d625fa7a7ac074443b3b6f95f4caca3","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:06:20"}
{"level":"info","message":"Session message exchanged","messageCount":24,"patientResponseLength":796,"responseTime":6963,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":50,"timestamp":"2025-06-12 01:06:20"}
01:06:20 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":24,"responseTime":6963,"therapistMessageLength":50,"patientResponseLength":796}
{"level":"info","message":"Using simple system prompt cache only","messageCount":25,"service":"psycho-trainer","timestamp":"2025-06-12 01:07:57"}
01:07:57 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":25}
01:07:57 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":25,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:07:57 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":25,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:07:57","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:07:57"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":4428,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":320,"responseTime":7541,"service":"psycho-trainer","timestamp":"2025-06-12 01:08:05"}
01:08:05 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7541,"inputTokens":4428,"outputTokens":320,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:08:05 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"e240346784e9922cd0e8447f6f40e394bd76746365ba4d19ed9fc2bdf66ed94d","cacheType":"conversation"}
{"cacheKey":"e240346784e9922cd0e8447f6f40e394bd76746365ba4d19ed9fc2bdf66ed94d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:08:05"}
{"level":"info","message":"Session message exchanged","messageCount":26,"patientResponseLength":722,"responseTime":7543,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":198,"timestamp":"2025-06-12 01:08:05"}
01:08:05 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":26,"responseTime":7543,"therapistMessageLength":198,"patientResponseLength":722}
{"level":"info","message":"Using simple system prompt cache only","messageCount":27,"service":"psycho-trainer","timestamp":"2025-06-12 01:08:58"}
01:08:58 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":27}
01:08:58 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":27,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:08:58 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":27,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:08:58","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:08:58"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":4772,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":360,"responseTime":7670,"service":"psycho-trainer","timestamp":"2025-06-12 01:09:06"}
01:09:06 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7670,"inputTokens":4772,"outputTokens":360,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:09:06 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"619bc853a56abded5d8562611a1c47a55a9411a9ad95d7e2033c27abcc667224","cacheType":"conversation"}
{"cacheKey":"619bc853a56abded5d8562611a1c47a55a9411a9ad95d7e2033c27abcc667224","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:09:06"}
{"level":"info","message":"Session message exchanged","messageCount":28,"patientResponseLength":840,"responseTime":7671,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":49,"timestamp":"2025-06-12 01:09:06"}
01:09:06 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":28,"responseTime":7671,"therapistMessageLength":49,"patientResponseLength":840}
{"level":"info","message":"Using simple system prompt cache only","messageCount":29,"service":"psycho-trainer","timestamp":"2025-06-12 01:11:16"}
01:11:16 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":29}
01:11:16 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":29,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:11:16 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49},{"index":27,"role":"assistant","hasCache":false,"contentLength":840},{"index":28,"role":"user","hasCache":false,"contentLength":203}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":29,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:11:16","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"},{"contentLength":840,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":203,"hasCache":false,"index":28,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:11:16"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":5231,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":320,"responseTime":7779,"service":"psycho-trainer","timestamp":"2025-06-12 01:11:24"}
01:11:24 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7779,"inputTokens":5231,"outputTokens":320,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:11:24 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"85c797baeaa797ad2c04110d5220492789e375a9e33b2cdaa6b8653b71b72cbd","cacheType":"conversation"}
{"cacheKey":"85c797baeaa797ad2c04110d5220492789e375a9e33b2cdaa6b8653b71b72cbd","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:11:24"}
{"level":"info","message":"Session message exchanged","messageCount":30,"patientResponseLength":751,"responseTime":7780,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":203,"timestamp":"2025-06-12 01:11:24"}
01:11:24 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":30,"responseTime":7780,"therapistMessageLength":203,"patientResponseLength":751}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 01:12:35"}
01:12:35 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
01:12:35 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"102MB","heapUsed":"23MB"},"database":null,"uptime":"40min"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"102MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 01:12:35","uptime":"40min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":31,"service":"psycho-trainer","timestamp":"2025-06-12 01:15:16"}
01:15:16 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":31}
01:15:16 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":31,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:15:16 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49},{"index":27,"role":"assistant","hasCache":false,"contentLength":840},{"index":28,"role":"user","hasCache":false,"contentLength":203},{"index":29,"role":"assistant","hasCache":false,"contentLength":751},{"index":30,"role":"user","hasCache":false,"contentLength":352}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":31,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:15:16","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"},{"contentLength":840,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":203,"hasCache":false,"index":28,"role":"user"},{"contentLength":751,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":352,"hasCache":false,"index":30,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:15:16"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":5719,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":365,"responseTime":8704,"service":"psycho-trainer","timestamp":"2025-06-12 01:15:25"}
01:15:25 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":8704,"inputTokens":5719,"outputTokens":365,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:15:25 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"e0a3c8b3c5fcbd8c7ec4f6f24d8603d02a1c1684719aad1da7aa0c4b9167da3f","cacheType":"conversation"}
{"cacheKey":"e0a3c8b3c5fcbd8c7ec4f6f24d8603d02a1c1684719aad1da7aa0c4b9167da3f","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:15:25"}
{"level":"info","message":"Session message exchanged","messageCount":32,"patientResponseLength":853,"responseTime":8705,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":352,"timestamp":"2025-06-12 01:15:25"}
01:15:25 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":32,"responseTime":8705,"therapistMessageLength":352,"patientResponseLength":853}
{"level":"info","message":"Using simple system prompt cache only","messageCount":33,"service":"psycho-trainer","timestamp":"2025-06-12 01:16:45"}
01:16:45 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":33}
01:16:45 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":33,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:16:45 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49},{"index":27,"role":"assistant","hasCache":false,"contentLength":840},{"index":28,"role":"user","hasCache":false,"contentLength":203},{"index":29,"role":"assistant","hasCache":false,"contentLength":751},{"index":30,"role":"user","hasCache":false,"contentLength":352},{"index":31,"role":"assistant","hasCache":false,"contentLength":853},{"index":32,"role":"user","hasCache":false,"contentLength":72}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":33,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:16:45","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"},{"contentLength":840,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":203,"hasCache":false,"index":28,"role":"user"},{"contentLength":751,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":352,"hasCache":false,"index":30,"role":"user"},{"contentLength":853,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":72,"hasCache":false,"index":32,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:16:45"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":6122,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":223,"responseTime":4981,"service":"psycho-trainer","timestamp":"2025-06-12 01:16:50"}
01:16:50 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4981,"inputTokens":6122,"outputTokens":223,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:16:50 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"818f635ca5195b58bf6b5548559be0e0ba6ccbfd0bc5fc3cbf294dd0a146f4c3","cacheType":"conversation"}
{"cacheKey":"818f635ca5195b58bf6b5548559be0e0ba6ccbfd0bc5fc3cbf294dd0a146f4c3","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:16:50"}
{"level":"info","message":"Session message exchanged","messageCount":34,"patientResponseLength":526,"responseTime":4982,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":72,"timestamp":"2025-06-12 01:16:50"}
01:16:50 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":34,"responseTime":4982,"therapistMessageLength":72,"patientResponseLength":526}
{"level":"info","message":"Using simple system prompt cache only","messageCount":35,"service":"psycho-trainer","timestamp":"2025-06-12 01:17:30"}
01:17:30 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":35}
01:17:30 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":35,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:17:30 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49},{"index":27,"role":"assistant","hasCache":false,"contentLength":840},{"index":28,"role":"user","hasCache":false,"contentLength":203},{"index":29,"role":"assistant","hasCache":false,"contentLength":751},{"index":30,"role":"user","hasCache":false,"contentLength":352},{"index":31,"role":"assistant","hasCache":false,"contentLength":853},{"index":32,"role":"user","hasCache":false,"contentLength":72},{"index":33,"role":"assistant","hasCache":false,"contentLength":526},{"index":34,"role":"user","hasCache":false,"contentLength":64}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":35,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:17:30","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"},{"contentLength":840,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":203,"hasCache":false,"index":28,"role":"user"},{"contentLength":751,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":352,"hasCache":false,"index":30,"role":"user"},{"contentLength":853,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":72,"hasCache":false,"index":32,"role":"user"},{"contentLength":526,"hasCache":false,"index":33,"role":"assistant"},{"contentLength":64,"hasCache":false,"index":34,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:17:30"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":6378,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":128,"responseTime":4246,"service":"psycho-trainer","timestamp":"2025-06-12 01:17:34"}
01:17:34 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4246,"inputTokens":6378,"outputTokens":128,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:17:34 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"5ea99a3618c764107eafa3ef07af2d6878683f7ce0a14904e3d617d23ca901c6","cacheType":"conversation"}
{"cacheKey":"5ea99a3618c764107eafa3ef07af2d6878683f7ce0a14904e3d617d23ca901c6","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:17:34"}
{"level":"info","message":"Session message exchanged","messageCount":36,"patientResponseLength":286,"responseTime":4248,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":64,"timestamp":"2025-06-12 01:17:34"}
01:17:34 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":36,"responseTime":4248,"therapistMessageLength":64,"patientResponseLength":286}
{"level":"info","message":"Using simple system prompt cache only","messageCount":37,"service":"psycho-trainer","timestamp":"2025-06-12 01:18:21"}
01:18:21 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":37}
01:18:21 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":37,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:18:21 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49},{"index":27,"role":"assistant","hasCache":false,"contentLength":840},{"index":28,"role":"user","hasCache":false,"contentLength":203},{"index":29,"role":"assistant","hasCache":false,"contentLength":751},{"index":30,"role":"user","hasCache":false,"contentLength":352},{"index":31,"role":"assistant","hasCache":false,"contentLength":853},{"index":32,"role":"user","hasCache":false,"contentLength":72},{"index":33,"role":"assistant","hasCache":false,"contentLength":526},{"index":34,"role":"user","hasCache":false,"contentLength":64},{"index":35,"role":"assistant","hasCache":false,"contentLength":286},{"index":36,"role":"user","hasCache":false,"contentLength":82}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":37,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:18:21","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"},{"contentLength":840,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":203,"hasCache":false,"index":28,"role":"user"},{"contentLength":751,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":352,"hasCache":false,"index":30,"role":"user"},{"contentLength":853,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":72,"hasCache":false,"index":32,"role":"user"},{"contentLength":526,"hasCache":false,"index":33,"role":"assistant"},{"contentLength":64,"hasCache":false,"index":34,"role":"user"},{"contentLength":286,"hasCache":false,"index":35,"role":"assistant"},{"contentLength":82,"hasCache":false,"index":36,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:18:21"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":6548,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":249,"responseTime":5868,"service":"psycho-trainer","timestamp":"2025-06-12 01:18:27"}
01:18:27 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5868,"inputTokens":6548,"outputTokens":249,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:18:27 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"a3b6d0401680d1c6b8a1070e0daf33374b2d74d20f11455f81ca88df508fb96f","cacheType":"conversation"}
{"cacheKey":"a3b6d0401680d1c6b8a1070e0daf33374b2d74d20f11455f81ca88df508fb96f","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:18:27"}
{"level":"info","message":"Session message exchanged","messageCount":38,"patientResponseLength":571,"responseTime":5869,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":82,"timestamp":"2025-06-12 01:18:27"}
01:18:27 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":38,"responseTime":5869,"therapistMessageLength":82,"patientResponseLength":571}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 01:22:35"}
01:22:35 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
01:22:35 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"102MB","heapUsed":"23MB"},"database":null,"uptime":"50min"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"102MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 01:22:35","uptime":"50min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":39,"service":"psycho-trainer","timestamp":"2025-06-12 01:23:20"}
01:23:20 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":39}
01:23:20 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":39,"hasSystemPrompt":true,"userId":8,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:23:20 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3601}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":353},{"index":2,"role":"user","hasCache":false,"contentLength":54},{"index":3,"role":"assistant","hasCache":false,"contentLength":279},{"index":4,"role":"user","hasCache":false,"contentLength":162},{"index":5,"role":"assistant","hasCache":false,"contentLength":775},{"index":6,"role":"user","hasCache":false,"contentLength":135},{"index":7,"role":"assistant","hasCache":false,"contentLength":987},{"index":8,"role":"user","hasCache":false,"contentLength":7},{"index":9,"role":"assistant","hasCache":false,"contentLength":769},{"index":10,"role":"user","hasCache":false,"contentLength":124},{"index":11,"role":"assistant","hasCache":false,"contentLength":722},{"index":12,"role":"user","hasCache":false,"contentLength":46},{"index":13,"role":"assistant","hasCache":false,"contentLength":746},{"index":14,"role":"user","hasCache":false,"contentLength":146},{"index":15,"role":"assistant","hasCache":false,"contentLength":767},{"index":16,"role":"user","hasCache":false,"contentLength":370},{"index":17,"role":"assistant","hasCache":false,"contentLength":900},{"index":18,"role":"user","hasCache":false,"contentLength":392},{"index":19,"role":"assistant","hasCache":false,"contentLength":831},{"index":20,"role":"user","hasCache":false,"contentLength":78},{"index":21,"role":"assistant","hasCache":false,"contentLength":744},{"index":22,"role":"user","hasCache":false,"contentLength":50},{"index":23,"role":"assistant","hasCache":false,"contentLength":796},{"index":24,"role":"user","hasCache":false,"contentLength":198},{"index":25,"role":"assistant","hasCache":false,"contentLength":722},{"index":26,"role":"user","hasCache":false,"contentLength":49},{"index":27,"role":"assistant","hasCache":false,"contentLength":840},{"index":28,"role":"user","hasCache":false,"contentLength":203},{"index":29,"role":"assistant","hasCache":false,"contentLength":751},{"index":30,"role":"user","hasCache":false,"contentLength":352},{"index":31,"role":"assistant","hasCache":false,"contentLength":853},{"index":32,"role":"user","hasCache":false,"contentLength":72},{"index":33,"role":"assistant","hasCache":false,"contentLength":526},{"index":34,"role":"user","hasCache":false,"contentLength":64},{"index":35,"role":"assistant","hasCache":false,"contentLength":286},{"index":36,"role":"user","hasCache":false,"contentLength":82},{"index":37,"role":"assistant","hasCache":false,"contentLength":571},{"index":38,"role":"user","hasCache":false,"contentLength":15}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":39,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:23:20","userId":8}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":353,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":54,"hasCache":false,"index":2,"role":"user"},{"contentLength":279,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":162,"hasCache":false,"index":4,"role":"user"},{"contentLength":775,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":135,"hasCache":false,"index":6,"role":"user"},{"contentLength":987,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":7,"hasCache":false,"index":8,"role":"user"},{"contentLength":769,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":124,"hasCache":false,"index":10,"role":"user"},{"contentLength":722,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":46,"hasCache":false,"index":12,"role":"user"},{"contentLength":746,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":14,"role":"user"},{"contentLength":767,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":370,"hasCache":false,"index":16,"role":"user"},{"contentLength":900,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":392,"hasCache":false,"index":18,"role":"user"},{"contentLength":831,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":78,"hasCache":false,"index":20,"role":"user"},{"contentLength":744,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":50,"hasCache":false,"index":22,"role":"user"},{"contentLength":796,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":24,"role":"user"},{"contentLength":722,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":26,"role":"user"},{"contentLength":840,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":203,"hasCache":false,"index":28,"role":"user"},{"contentLength":751,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":352,"hasCache":false,"index":30,"role":"user"},{"contentLength":853,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":72,"hasCache":false,"index":32,"role":"user"},{"contentLength":526,"hasCache":false,"index":33,"role":"assistant"},{"contentLength":64,"hasCache":false,"index":34,"role":"user"},{"contentLength":286,"hasCache":false,"index":35,"role":"assistant"},{"contentLength":82,"hasCache":false,"index":36,"role":"user"},{"contentLength":571,"hasCache":false,"index":37,"role":"assistant"},{"contentLength":15,"hasCache":false,"index":38,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3601,"type":"text"}],"timestamp":"2025-06-12 01:23:20"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1507,"inputTokens":6809,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":175,"responseTime":5148,"service":"psycho-trainer","timestamp":"2025-06-12 01:23:25"}
01:23:25 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5148,"inputTokens":6809,"outputTokens":175,"cacheCreationTokens":0,"cacheReadTokens":1507,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:23:25 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"f20724df3ee50bb3ef45572a975df5418fd4be029f68a8f157ef5a2254b97634","cacheType":"conversation"}
{"cacheKey":"f20724df3ee50bb3ef45572a975df5418fd4be029f68a8f157ef5a2254b97634","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:23:25"}
{"level":"info","message":"Session message exchanged","messageCount":40,"patientResponseLength":397,"responseTime":5149,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","therapistMessageLength":15,"timestamp":"2025-06-12 01:23:25"}
01:23:25 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","messageCount":40,"responseTime":5149,"therapistMessageLength":15,"patientResponseLength":397}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","timestamp":"2025-06-12 01:28:20","userId":8}
01:28:20 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":8,"sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1"}
01:28:20 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","userId":8}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","timestamp":"2025-06-12 01:28:20","userId":8}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 01:32:36"}
01:32:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
01:32:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"109MB","heapUsed":"24MB"},"database":null,"uptime":"60min"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"109MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 01:32:36","uptime":"60min"}
{"duration":52,"level":"info","message":"Session ended","messageCount":40,"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","timestamp":"2025-06-12 01:33:20"}
01:33:20 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","duration":52,"messageCount":40}
01:33:20 [[31MERROR[39M]: Cannot send inactivity end notification - no chat ID found {"service":"psycho-trainer","userId":8,"sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1"}
01:33:20 [[32MINFO[39M]: Session ended due to inactivity {"service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","userId":8}
{"level":"error","message":"Cannot send inactivity end notification - no chat ID found","service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","timestamp":"2025-06-12 01:33:20","userId":8}
{"level":"info","message":"Session ended due to inactivity","service":"psycho-trainer","sessionUuid":"8397320b-a3b7-4563-b7c9-f69ebcd200b1","timestamp":"2025-06-12 01:33:20","userId":8}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 01:42:36"}
01:42:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
01:42:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"110MB","heapUsed":"25MB"},"database":null,"uptime":"70min"}
{"database":null,"level":"info","memory":{"heapUsed":"25MB","rss":"110MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 01:42:36","uptime":"70min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 01:52:36"}
01:52:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
01:52:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"110MB","heapUsed":"26MB"},"database":null,"uptime":"80min"}
{"database":null,"level":"info","memory":{"heapUsed":"26MB","rss":"110MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 01:52:36","uptime":"80min"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 01:57:29","userId":32}
01:57:29 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":32,"hasCustomDescription":false}
01:57:29 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
01:57:29 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":32,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
01:57:29 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 01:57:29"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 01:57:29","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 01:57:29"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":752,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":832,"responseTime":12274,"service":"psycho-trainer","timestamp":"2025-06-12 01:57:41"}
01:57:41 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":12274,"inputTokens":752,"outputTokens":832,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
01:57:41 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":105,"uuid":"a91bb1de-9ea5-4b36-9518-e9e047f10621","name":"–°–≤–µ—Ç–ª–∞–Ω–∞ –ë–æ—Ä–∏—Å–æ–≤–Ω–∞ –ï–≥–æ—Ä–æ–≤–∞"}
{"level":"info","message":"Patient created successfully","name":"–°–≤–µ—Ç–ª–∞–Ω–∞ –ë–æ—Ä–∏—Å–æ–≤–Ω–∞ –ï–≥–æ—Ä–æ–≤–∞","patientId":105,"service":"psycho-trainer","timestamp":"2025-06-12 01:57:41","uuid":"a91bb1de-9ea5-4b36-9518-e9e047f10621"}
{"callbackData":"invite_patient_105","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":32,"patientId":105,"patientName":"–°–≤–µ—Ç–ª–∞–Ω–∞ –ë–æ—Ä–∏—Å–æ–≤–Ω–∞ –ï–≥–æ—Ä–æ–≤–∞","service":"psycho-trainer","timestamp":"2025-06-12 01:57:41","userId":32}
01:57:41 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":32,"patientId":105,"patientName":"–°–≤–µ—Ç–ª–∞–Ω–∞ –ë–æ—Ä–∏—Å–æ–≤–Ω–∞ –ï–≥–æ—Ä–æ–≤–∞","patientCreatedBy":32,"callbackData":"invite_patient_105"}
{"data":"invite_patient_105","level":"info","message":"Processing patient invitation callback","parsedPatientId":105,"patientId":105,"service":"psycho-trainer","telegramId":937099423,"timestamp":"2025-06-12 01:57:52","userId":32}
01:57:52 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":937099423,"userId":32,"patientId":105,"data":"invite_patient_105","parsedPatientId":105}
01:57:52 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":105,"patientFound":true,"patientCreatedBy":32,"userId":32,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":32,"patientFound":true,"patientId":105,"service":"psycho-trainer","timestamp":"2025-06-12 01:57:52","userId":32}
{"level":"info","message":"Session created","patientId":105,"service":"psycho-trainer","sessionId":98,"sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","timestamp":"2025-06-12 01:57:52","userId":32}
01:57:52 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":98,"sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","userId":32,"patientId":105}
01:57:52 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
01:57:52 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:57:52 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 01:57:52"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:57:52","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 01:57:52"}
{"cacheCreated":true,"cacheCreationTokens":1481,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":172,"responseTime":4717,"service":"psycho-trainer","timestamp":"2025-06-12 01:57:57"}
01:57:57 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4717,"inputTokens":26,"outputTokens":172,"cacheCreationTokens":1481,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
01:57:57 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"2bfe597a2964f6740a624a466c2440fde1f9d22f0a344082c61dfa6039ed2f36","cacheType":"conversation"}
{"cacheKey":"2bfe597a2964f6740a624a466c2440fde1f9d22f0a344082c61dfa6039ed2f36","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:57:57"}
{"level":"info","message":"Patient invited and session started","patientId":105,"service":"psycho-trainer","sessionId":98,"timestamp":"2025-06-12 01:57:57","userId":32}
01:57:57 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":32,"patientId":105,"sessionId":98}
{"level":"info","message":"Using simple system prompt cache only","messageCount":3,"service":"psycho-trainer","timestamp":"2025-06-12 01:59:24"}
01:59:24 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":3}
01:59:24 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
01:59:24 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":379},{"index":2,"role":"user","hasCache":false,"contentLength":152}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 01:59:24","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":379,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":152,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 01:59:24"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1481,"inputTokens":270,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":225,"responseTime":4799,"service":"psycho-trainer","timestamp":"2025-06-12 01:59:28"}
01:59:28 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4799,"inputTokens":270,"outputTokens":225,"cacheCreationTokens":0,"cacheReadTokens":1481,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
01:59:28 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"b8b7a063af9a6d75b87cb502d80e453969836c4aa49a1af845fbac29340c9e03","cacheType":"conversation"}
{"cacheKey":"b8b7a063af9a6d75b87cb502d80e453969836c4aa49a1af845fbac29340c9e03","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 01:59:28"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":505,"responseTime":4800,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","therapistMessageLength":152,"timestamp":"2025-06-12 01:59:29"}
01:59:29 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","messageCount":4,"responseTime":4800,"therapistMessageLength":152,"patientResponseLength":505}
{"level":"info","message":"Using simple system prompt cache only","messageCount":5,"service":"psycho-trainer","timestamp":"2025-06-12 02:00:12"}
02:00:12 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":5}
02:00:12 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:00:12 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":379},{"index":2,"role":"user","hasCache":false,"contentLength":152},{"index":3,"role":"assistant","hasCache":false,"contentLength":505},{"index":4,"role":"user","hasCache":false,"contentLength":45}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:00:12","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":379,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":152,"hasCache":false,"index":2,"role":"user"},{"contentLength":505,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":45,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 02:00:12"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1481,"inputTokens":522,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":195,"responseTime":4351,"service":"psycho-trainer","timestamp":"2025-06-12 02:00:16"}
02:00:16 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4351,"inputTokens":522,"outputTokens":195,"cacheCreationTokens":0,"cacheReadTokens":1481,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
02:00:16 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"4f63bc17fa5d32192a994f66d176b88a6e56c667482142c65fe38d9aa7b931e7","cacheType":"conversation"}
{"cacheKey":"4f63bc17fa5d32192a994f66d176b88a6e56c667482142c65fe38d9aa7b931e7","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:00:16"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":441,"responseTime":4352,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","therapistMessageLength":45,"timestamp":"2025-06-12 02:00:16"}
02:00:16 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","messageCount":6,"responseTime":4352,"therapistMessageLength":45,"patientResponseLength":441}
{"level":"info","message":"Using simple system prompt cache only","messageCount":7,"service":"psycho-trainer","timestamp":"2025-06-12 02:01:07"}
02:01:07 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":7}
02:01:07 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":7,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:01:07 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":379},{"index":2,"role":"user","hasCache":false,"contentLength":152},{"index":3,"role":"assistant","hasCache":false,"contentLength":505},{"index":4,"role":"user","hasCache":false,"contentLength":45},{"index":5,"role":"assistant","hasCache":false,"contentLength":441},{"index":6,"role":"user","hasCache":false,"contentLength":60}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:01:07","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":379,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":152,"hasCache":false,"index":2,"role":"user"},{"contentLength":505,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":45,"hasCache":false,"index":4,"role":"user"},{"contentLength":441,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":60,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 02:01:07"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1481,"inputTokens":746,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":242,"responseTime":4721,"service":"psycho-trainer","timestamp":"2025-06-12 02:01:12"}
02:01:12 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4721,"inputTokens":746,"outputTokens":242,"cacheCreationTokens":0,"cacheReadTokens":1481,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
02:01:12 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"a38791a6df863ffe940840ce8aabcab20924cd7e055c3b30e6b27e428f887164","cacheType":"conversation"}
{"cacheKey":"a38791a6df863ffe940840ce8aabcab20924cd7e055c3b30e6b27e428f887164","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:01:12"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":563,"responseTime":4730,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","therapistMessageLength":60,"timestamp":"2025-06-12 02:01:12"}
02:01:12 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","messageCount":8,"responseTime":4730,"therapistMessageLength":60,"patientResponseLength":563}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 02:02:36"}
02:02:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
02:02:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"112MB","heapUsed":"26MB"},"database":null,"uptime":"90min"}
{"database":null,"level":"info","memory":{"heapUsed":"26MB","rss":"112MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 02:02:36","uptime":"90min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":9,"service":"psycho-trainer","timestamp":"2025-06-12 02:02:49"}
02:02:49 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":9}
02:02:49 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":9,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:02:49 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":379},{"index":2,"role":"user","hasCache":false,"contentLength":152},{"index":3,"role":"assistant","hasCache":false,"contentLength":505},{"index":4,"role":"user","hasCache":false,"contentLength":45},{"index":5,"role":"assistant","hasCache":false,"contentLength":441},{"index":6,"role":"user","hasCache":false,"contentLength":60},{"index":7,"role":"assistant","hasCache":false,"contentLength":563},{"index":8,"role":"user","hasCache":false,"contentLength":198}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:02:49","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":379,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":152,"hasCache":false,"index":2,"role":"user"},{"contentLength":505,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":45,"hasCache":false,"index":4,"role":"user"},{"contentLength":441,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":60,"hasCache":false,"index":6,"role":"user"},{"contentLength":563,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 02:02:49"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1481,"inputTokens":1065,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":283,"responseTime":5704,"service":"psycho-trainer","timestamp":"2025-06-12 02:02:55"}
02:02:55 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5704,"inputTokens":1065,"outputTokens":283,"cacheCreationTokens":0,"cacheReadTokens":1481,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
02:02:55 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"ffb481a33fd69563f2b7f9bee2019317f2e1e15d6077ccf9d9bd750b7ada1ff9","cacheType":"conversation"}
{"cacheKey":"ffb481a33fd69563f2b7f9bee2019317f2e1e15d6077ccf9d9bd750b7ada1ff9","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:02:55"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":623,"responseTime":5705,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","therapistMessageLength":198,"timestamp":"2025-06-12 02:02:55"}
02:02:55 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","messageCount":10,"responseTime":5705,"therapistMessageLength":198,"patientResponseLength":623}
{"level":"info","message":"Using simple system prompt cache only","messageCount":11,"service":"psycho-trainer","timestamp":"2025-06-12 02:04:04"}
02:04:04 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":11}
02:04:04 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":11,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:04:04 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":379},{"index":2,"role":"user","hasCache":false,"contentLength":152},{"index":3,"role":"assistant","hasCache":false,"contentLength":505},{"index":4,"role":"user","hasCache":false,"contentLength":45},{"index":5,"role":"assistant","hasCache":false,"contentLength":441},{"index":6,"role":"user","hasCache":false,"contentLength":60},{"index":7,"role":"assistant","hasCache":false,"contentLength":563},{"index":8,"role":"user","hasCache":false,"contentLength":198},{"index":9,"role":"assistant","hasCache":false,"contentLength":623},{"index":10,"role":"user","hasCache":false,"contentLength":130}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:04:04","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":379,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":152,"hasCache":false,"index":2,"role":"user"},{"contentLength":505,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":45,"hasCache":false,"index":4,"role":"user"},{"contentLength":441,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":60,"hasCache":false,"index":6,"role":"user"},{"contentLength":563,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":8,"role":"user"},{"contentLength":623,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":130,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 02:04:04"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1481,"inputTokens":1401,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":280,"responseTime":5454,"service":"psycho-trainer","timestamp":"2025-06-12 02:04:10"}
02:04:10 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5454,"inputTokens":1401,"outputTokens":280,"cacheCreationTokens":0,"cacheReadTokens":1481,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
02:04:10 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"c9908e73961863a22549270ccc049ee8d580969977b13667cf5289d168cc3a65","cacheType":"conversation"}
{"cacheKey":"c9908e73961863a22549270ccc049ee8d580969977b13667cf5289d168cc3a65","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:04:10"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":622,"responseTime":5455,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","therapistMessageLength":130,"timestamp":"2025-06-12 02:04:10"}
02:04:10 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","messageCount":12,"responseTime":5455,"therapistMessageLength":130,"patientResponseLength":622}
{"level":"info","message":"Using simple system prompt cache only","messageCount":13,"service":"psycho-trainer","timestamp":"2025-06-12 02:05:24"}
02:05:24 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":13}
02:05:24 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":13,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:05:24 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3576}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":379},{"index":2,"role":"user","hasCache":false,"contentLength":152},{"index":3,"role":"assistant","hasCache":false,"contentLength":505},{"index":4,"role":"user","hasCache":false,"contentLength":45},{"index":5,"role":"assistant","hasCache":false,"contentLength":441},{"index":6,"role":"user","hasCache":false,"contentLength":60},{"index":7,"role":"assistant","hasCache":false,"contentLength":563},{"index":8,"role":"user","hasCache":false,"contentLength":198},{"index":9,"role":"assistant","hasCache":false,"contentLength":623},{"index":10,"role":"user","hasCache":false,"contentLength":130},{"index":11,"role":"assistant","hasCache":false,"contentLength":622},{"index":12,"role":"user","hasCache":false,"contentLength":137}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:05:24","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":379,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":152,"hasCache":false,"index":2,"role":"user"},{"contentLength":505,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":45,"hasCache":false,"index":4,"role":"user"},{"contentLength":441,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":60,"hasCache":false,"index":6,"role":"user"},{"contentLength":563,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":198,"hasCache":false,"index":8,"role":"user"},{"contentLength":623,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":130,"hasCache":false,"index":10,"role":"user"},{"contentLength":622,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":137,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3576,"type":"text"}],"timestamp":"2025-06-12 02:05:24"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1481,"inputTokens":1745,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":279,"responseTime":6282,"service":"psycho-trainer","timestamp":"2025-06-12 02:05:31"}
02:05:31 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6282,"inputTokens":1745,"outputTokens":279,"cacheCreationTokens":0,"cacheReadTokens":1481,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
02:05:31 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"bfc5ca4edf5ed02f957c0d998c1a530bdffb0cd9e173c2bdd5a376de7884a993","cacheType":"conversation"}
{"cacheKey":"bfc5ca4edf5ed02f957c0d998c1a530bdffb0cd9e173c2bdd5a376de7884a993","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:05:31"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":672,"responseTime":6285,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","therapistMessageLength":137,"timestamp":"2025-06-12 02:05:31"}
02:05:31 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","messageCount":14,"responseTime":6285,"therapistMessageLength":137,"patientResponseLength":672}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","timestamp":"2025-06-12 02:10:24","userId":32}
02:10:24 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":32,"sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc"}
02:10:24 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","userId":32}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","timestamp":"2025-06-12 02:10:24","userId":32}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 02:12:36"}
02:12:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
02:12:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"28MB"},"database":null,"uptime":"100min"}
{"database":null,"level":"info","memory":{"heapUsed":"28MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 02:12:36","uptime":"100min"}
{"duration":18,"level":"info","message":"Session ended","messageCount":14,"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","timestamp":"2025-06-12 02:15:24"}
02:15:24 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","duration":18,"messageCount":14}
02:15:24 [[31MERROR[39M]: Cannot send inactivity end notification - no chat ID found {"service":"psycho-trainer","userId":32,"sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc"}
02:15:24 [[32MINFO[39M]: Session ended due to inactivity {"service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","userId":32}
{"level":"error","message":"Cannot send inactivity end notification - no chat ID found","service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","timestamp":"2025-06-12 02:15:24","userId":32}
{"level":"info","message":"Session ended due to inactivity","service":"psycho-trainer","sessionUuid":"8d595ae7-2015-4cbc-a89d-b3e34e4fedcc","timestamp":"2025-06-12 02:15:24","userId":32}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 02:22:36"}
02:22:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
02:22:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"21MB"},"database":null,"uptime":"110min"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 02:22:36","uptime":"110min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 02:32:36"}
02:32:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
02:32:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"105MB","heapUsed":"20MB"},"database":null,"uptime":"120min"}
{"database":null,"level":"info","memory":{"heapUsed":"20MB","rss":"105MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 02:32:36","uptime":"120min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 02:42:36"}
02:42:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
02:42:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"105MB","heapUsed":"20MB"},"database":null,"uptime":"130min"}
{"database":null,"level":"info","memory":{"heapUsed":"20MB","rss":"105MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 02:42:36","uptime":"130min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 02:52:36"}
02:52:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
02:52:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"106MB","heapUsed":"21MB"},"database":null,"uptime":"140min"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"106MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 02:52:36","uptime":"140min"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 02:55:15","userId":32}
02:55:15 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":32,"hasCustomDescription":false}
02:55:15 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
02:55:15 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":32,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
02:55:15 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 02:55:15"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 02:55:15","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 02:55:15"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":753,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":842,"responseTime":12406,"service":"psycho-trainer","timestamp":"2025-06-12 02:55:27"}
02:55:27 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":12406,"inputTokens":753,"outputTokens":842,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
02:55:27 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":106,"uuid":"4945bc66-5b3e-4ffc-a623-2fe727859796","name":"–õ–µ–æ–Ω–∏–¥ –ê—Ä–∫–∞–¥—å–µ–≤–∏—á –ì–æ–ª—å–¥—à—Ç–µ–π–Ω"}
{"level":"info","message":"Patient created successfully","name":"–õ–µ–æ–Ω–∏–¥ –ê—Ä–∫–∞–¥—å–µ–≤–∏—á –ì–æ–ª—å–¥—à—Ç–µ–π–Ω","patientId":106,"service":"psycho-trainer","timestamp":"2025-06-12 02:55:27","uuid":"4945bc66-5b3e-4ffc-a623-2fe727859796"}
{"callbackData":"invite_patient_106","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":32,"patientId":106,"patientName":"–õ–µ–æ–Ω–∏–¥ –ê—Ä–∫–∞–¥—å–µ–≤–∏—á –ì–æ–ª—å–¥—à—Ç–µ–π–Ω","service":"psycho-trainer","timestamp":"2025-06-12 02:55:27","userId":32}
02:55:27 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":32,"patientId":106,"patientName":"–õ–µ–æ–Ω–∏–¥ –ê—Ä–∫–∞–¥—å–µ–≤–∏—á –ì–æ–ª—å–¥—à—Ç–µ–π–Ω","patientCreatedBy":32,"callbackData":"invite_patient_106"}
{"data":"invite_patient_106","level":"info","message":"Processing patient invitation callback","parsedPatientId":106,"patientId":106,"service":"psycho-trainer","telegramId":937099423,"timestamp":"2025-06-12 02:55:42","userId":32}
02:55:42 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":937099423,"userId":32,"patientId":106,"data":"invite_patient_106","parsedPatientId":106}
02:55:42 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":106,"patientFound":true,"patientCreatedBy":32,"userId":32,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":32,"patientFound":true,"patientId":106,"service":"psycho-trainer","timestamp":"2025-06-12 02:55:42","userId":32}
{"level":"info","message":"Session created","patientId":106,"service":"psycho-trainer","sessionId":99,"sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 02:55:42","userId":32}
02:55:42 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":99,"sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","userId":32,"patientId":106}
02:55:42 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
02:55:42 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:55:42 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 02:55:42"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:55:42","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 02:55:42"}
{"cacheCreated":true,"cacheCreationTokens":1498,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":179,"responseTime":5020,"service":"psycho-trainer","timestamp":"2025-06-12 02:55:47"}
02:55:47 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5020,"inputTokens":26,"outputTokens":179,"cacheCreationTokens":1498,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
02:55:47 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"3ee7bbcf1ec085886fd323f6cd149a594eb1ffc2fe840bafb15a054bd16de6f6","cacheType":"conversation"}
{"cacheKey":"3ee7bbcf1ec085886fd323f6cd149a594eb1ffc2fe840bafb15a054bd16de6f6","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:55:47"}
{"level":"info","message":"Patient invited and session started","patientId":106,"service":"psycho-trainer","sessionId":99,"timestamp":"2025-06-12 02:55:47","userId":32}
02:55:47 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":32,"patientId":106,"sessionId":99}
{"level":"info","message":"Using simple system prompt cache only","messageCount":3,"service":"psycho-trainer","timestamp":"2025-06-12 02:58:27"}
02:58:27 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":3}
02:58:27 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
02:58:27 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 02:58:27","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 02:58:27"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":323,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":279,"responseTime":6804,"service":"psycho-trainer","timestamp":"2025-06-12 02:58:33"}
02:58:33 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6804,"inputTokens":323,"outputTokens":279,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
02:58:33 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"27ee18c6e6f183adede5354efe1a4a73bbc59498480828b8006697e768a4073d","cacheType":"conversation"}
{"cacheKey":"27ee18c6e6f183adede5354efe1a4a73bbc59498480828b8006697e768a4073d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 02:58:33"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":628,"responseTime":6805,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":250,"timestamp":"2025-06-12 02:58:33"}
02:58:33 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":4,"responseTime":6805,"therapistMessageLength":250,"patientResponseLength":628}
{"level":"info","message":"Using simple system prompt cache only","messageCount":5,"service":"psycho-trainer","timestamp":"2025-06-12 03:01:10"}
03:01:10 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":5}
03:01:10 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:01:10 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:01:10","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:01:10"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":653,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":343,"responseTime":8362,"service":"psycho-trainer","timestamp":"2025-06-12 03:01:19"}
03:01:19 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":8362,"inputTokens":653,"outputTokens":343,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:01:19 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"2c5cc35eacd49f6e352e8ce1c15e88ca03f7ba2b81fda0bfb813ebf3104c0f5d","cacheType":"conversation"}
{"cacheKey":"2c5cc35eacd49f6e352e8ce1c15e88ca03f7ba2b81fda0bfb813ebf3104c0f5d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:01:19"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":837,"responseTime":8363,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":117,"timestamp":"2025-06-12 03:01:19"}
03:01:19 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":6,"responseTime":8363,"therapistMessageLength":117,"patientResponseLength":837}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 03:02:36"}
03:02:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
03:02:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"107MB","heapUsed":"22MB"},"database":null,"uptime":"150min"}
{"database":null,"level":"info","memory":{"heapUsed":"22MB","rss":"107MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 03:02:36","uptime":"150min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":7,"service":"psycho-trainer","timestamp":"2025-06-12 03:03:57"}
03:03:57 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":7}
03:03:57 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":7,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:03:57 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:03:57","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:03:57"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":1036,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":353,"responseTime":8114,"service":"psycho-trainer","timestamp":"2025-06-12 03:04:05"}
03:04:05 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":8114,"inputTokens":1036,"outputTokens":353,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:04:05 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"c1bfdbbf82229acbc0aa435fe1b5c69dd48841f6c4ddcf6ef73b7d9b8ee20b42","cacheType":"conversation"}
{"cacheKey":"c1bfdbbf82229acbc0aa435fe1b5c69dd48841f6c4ddcf6ef73b7d9b8ee20b42","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:04:05"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":822,"responseTime":8115,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":84,"timestamp":"2025-06-12 03:04:05"}
03:04:05 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":8,"responseTime":8115,"therapistMessageLength":84,"patientResponseLength":822}
{"level":"info","message":"Using simple system prompt cache only","messageCount":9,"service":"psycho-trainer","timestamp":"2025-06-12 03:05:43"}
03:05:43 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":9}
03:05:43 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":9,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:05:43 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:05:43","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:05:43"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":1449,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":315,"responseTime":9297,"service":"psycho-trainer","timestamp":"2025-06-12 03:05:53"}
03:05:53 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":9297,"inputTokens":1449,"outputTokens":315,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:05:53 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"e370e143c735c5f4afb40fad12c9e3f081723f2cac1a9f920fb814cbb8214fa1","cacheType":"conversation"}
{"cacheKey":"e370e143c735c5f4afb40fad12c9e3f081723f2cac1a9f920fb814cbb8214fa1","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:05:53"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":767,"responseTime":9299,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":146,"timestamp":"2025-06-12 03:05:53"}
03:05:53 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":10,"responseTime":9299,"therapistMessageLength":146,"patientResponseLength":767}
{"level":"info","message":"Using simple system prompt cache only","messageCount":11,"service":"psycho-trainer","timestamp":"2025-06-12 03:07:37"}
03:07:37 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":11}
03:07:37 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":11,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:07:37 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:07:37","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:07:37"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":1789,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":361,"responseTime":7047,"service":"psycho-trainer","timestamp":"2025-06-12 03:07:44"}
03:07:44 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7047,"inputTokens":1789,"outputTokens":361,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:07:44 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"279eebb95e9968be6dc08e6f8b987c50274063fe07a99466e456a0bc49ddd015","cacheType":"conversation"}
{"cacheKey":"279eebb95e9968be6dc08e6f8b987c50274063fe07a99466e456a0bc49ddd015","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:07:44"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":847,"responseTime":7049,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":49,"timestamp":"2025-06-12 03:07:44"}
03:07:44 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":12,"responseTime":7049,"therapistMessageLength":49,"patientResponseLength":847}
{"level":"info","message":"Using simple system prompt cache only","messageCount":13,"service":"psycho-trainer","timestamp":"2025-06-12 03:09:08"}
03:09:08 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":13}
03:09:08 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":13,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:09:08 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:09:08","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:09:08"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":2164,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":354,"responseTime":6990,"service":"psycho-trainer","timestamp":"2025-06-12 03:09:15"}
03:09:15 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6990,"inputTokens":2164,"outputTokens":354,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:09:15 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"b75c97e5fbaa2e6a8d7bea67cf72eaabc709c68e490e281ce6de2021807b9301","cacheType":"conversation"}
{"cacheKey":"b75c97e5fbaa2e6a8d7bea67cf72eaabc709c68e490e281ce6de2021807b9301","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:09:15"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":810,"responseTime":6993,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":22,"timestamp":"2025-06-12 03:09:15"}
03:09:15 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":14,"responseTime":6993,"therapistMessageLength":22,"patientResponseLength":810}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 03:12:36"}
03:12:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
03:12:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"109MB","heapUsed":"23MB"},"database":null,"uptime":"160min"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"109MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 03:12:36","uptime":"160min"}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:14:08","userId":32}
03:14:08 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":32,"sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3"}
03:14:08 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","userId":32}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:14:08","userId":32}
{"level":"info","message":"Using simple system prompt cache only","messageCount":15,"service":"psycho-trainer","timestamp":"2025-06-12 03:14:12"}
03:14:12 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":15}
03:14:12 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":15,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:14:12 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":15,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:14:12","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:14:12"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":2650,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":336,"responseTime":6660,"service":"psycho-trainer","timestamp":"2025-06-12 03:14:19"}
03:14:19 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6660,"inputTokens":2650,"outputTokens":336,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:14:19 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"eea06393b5580cb43891a7ca089a3f1cb69b2fa0ac960d7094fb4d94ffb621cd","cacheType":"conversation"}
{"cacheKey":"eea06393b5580cb43891a7ca089a3f1cb69b2fa0ac960d7094fb4d94ffb621cd","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:14:19"}
{"level":"info","message":"Session message exchanged","messageCount":16,"patientResponseLength":756,"responseTime":6662,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":302,"timestamp":"2025-06-12 03:14:19"}
03:14:19 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":16,"responseTime":6662,"therapistMessageLength":302,"patientResponseLength":756}
{"level":"info","message":"Using simple system prompt cache only","messageCount":17,"service":"psycho-trainer","timestamp":"2025-06-12 03:16:17"}
03:16:17 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":17}
03:16:17 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":17,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:16:17 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":17,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:16:17","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:16:17"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":3038,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":279,"responseTime":5293,"service":"psycho-trainer","timestamp":"2025-06-12 03:16:22"}
03:16:22 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5293,"inputTokens":3038,"outputTokens":279,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:16:22 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"bf122330753f634159a8f5db47aff1dd821009b9c07ab47263cf0efa00ec86db","cacheType":"conversation"}
{"cacheKey":"bf122330753f634159a8f5db47aff1dd821009b9c07ab47263cf0efa00ec86db","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:16:22"}
{"level":"info","message":"Session message exchanged","messageCount":18,"patientResponseLength":651,"responseTime":5295,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":111,"timestamp":"2025-06-12 03:16:22"}
03:16:22 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":18,"responseTime":5295,"therapistMessageLength":111,"patientResponseLength":651}
{"level":"info","message":"Using simple system prompt cache only","messageCount":19,"service":"psycho-trainer","timestamp":"2025-06-12 03:17:12"}
03:17:12 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":19}
03:17:12 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":19,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:17:12 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":19,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:17:12","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:17:12"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":3332,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":317,"responseTime":7202,"service":"psycho-trainer","timestamp":"2025-06-12 03:17:19"}
03:17:19 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7202,"inputTokens":3332,"outputTokens":317,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:17:19 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"daefefbafd1ded835775ccb7f15d1e1f54a93472be5843b3d48cf6a4aa0d129c","cacheType":"conversation"}
{"cacheKey":"daefefbafd1ded835775ccb7f15d1e1f54a93472be5843b3d48cf6a4aa0d129c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:17:19"}
{"level":"info","message":"Session message exchanged","messageCount":20,"patientResponseLength":767,"responseTime":7205,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":23,"timestamp":"2025-06-12 03:17:19"}
03:17:19 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":20,"responseTime":7205,"therapistMessageLength":23,"patientResponseLength":767}
{"level":"info","message":"Using simple system prompt cache only","messageCount":21,"service":"psycho-trainer","timestamp":"2025-06-12 03:18:23"}
03:18:23 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":21}
03:18:23 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":21,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:18:23 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":21,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:18:23","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:18:23"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":3674,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":289,"responseTime":7205,"service":"psycho-trainer","timestamp":"2025-06-12 03:18:30"}
03:18:30 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7205,"inputTokens":3674,"outputTokens":289,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:18:30 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"403f2a2e0dec09d34495b5453d3cd9dec5041a845228b1e0019c2f0bd5575b88","cacheType":"conversation"}
{"cacheKey":"403f2a2e0dec09d34495b5453d3cd9dec5041a845228b1e0019c2f0bd5575b88","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:18:30"}
{"level":"info","message":"Session message exchanged","messageCount":22,"patientResponseLength":682,"responseTime":7208,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":37,"timestamp":"2025-06-12 03:18:31"}
03:18:31 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":22,"responseTime":7208,"therapistMessageLength":37,"patientResponseLength":682}
{"level":"info","message":"Using simple system prompt cache only","messageCount":23,"service":"psycho-trainer","timestamp":"2025-06-12 03:19:59"}
03:19:59 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":23}
03:19:59 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":23,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:19:59 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":23,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:19:59","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:19:59"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":4005,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":272,"responseTime":5783,"service":"psycho-trainer","timestamp":"2025-06-12 03:20:04"}
03:20:04 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5783,"inputTokens":4005,"outputTokens":272,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:20:04 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"eb46e813d47f632fd5a8cc2c2973c8f455e190d748f5000111d97a91eef622b2","cacheType":"conversation"}
{"cacheKey":"eb46e813d47f632fd5a8cc2c2973c8f455e190d748f5000111d97a91eef622b2","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:20:04"}
{"level":"info","message":"Session message exchanged","messageCount":24,"patientResponseLength":633,"responseTime":5784,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":87,"timestamp":"2025-06-12 03:20:04"}
03:20:04 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":24,"responseTime":5784,"therapistMessageLength":87,"patientResponseLength":633}
{"level":"info","message":"Using simple system prompt cache only","messageCount":25,"service":"psycho-trainer","timestamp":"2025-06-12 03:22:30"}
03:22:30 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":25}
03:22:30 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":25,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:22:30 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":25,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:22:30","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:22:30"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 03:22:36"}
03:22:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
03:22:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"111MB","heapUsed":"24MB"},"database":null,"uptime":"170min"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"111MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 03:22:36","uptime":"170min"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":4353,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":259,"responseTime":6821,"service":"psycho-trainer","timestamp":"2025-06-12 03:22:37"}
03:22:37 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6821,"inputTokens":4353,"outputTokens":259,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:22:37 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"24dbcd5e26a9f71655cf2308ccad24e2d826056ca8126c63b7284a9eda0e30b4","cacheType":"conversation"}
{"cacheKey":"24dbcd5e26a9f71655cf2308ccad24e2d826056ca8126c63b7284a9eda0e30b4","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:22:37"}
{"level":"info","message":"Session message exchanged","messageCount":26,"patientResponseLength":625,"responseTime":6822,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":163,"timestamp":"2025-06-12 03:22:37"}
03:22:37 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":26,"responseTime":6822,"therapistMessageLength":163,"patientResponseLength":625}
{"level":"info","message":"Using simple system prompt cache only","messageCount":27,"service":"psycho-trainer","timestamp":"2025-06-12 03:25:34"}
03:25:34 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":27}
03:25:34 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":27,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:25:34 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163},{"index":25,"role":"assistant","hasCache":false,"contentLength":625},{"index":26,"role":"user","hasCache":false,"contentLength":272}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":27,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:25:34","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"},{"contentLength":625,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":272,"hasCache":false,"index":26,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:25:34"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":4721,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":329,"responseTime":7011,"service":"psycho-trainer","timestamp":"2025-06-12 03:25:41"}
03:25:41 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7011,"inputTokens":4721,"outputTokens":329,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:25:41 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"82314206139f5679f719597632a2f26d6a656ce1ee81d0abb4e074384ecb2fdf","cacheType":"conversation"}
{"cacheKey":"82314206139f5679f719597632a2f26d6a656ce1ee81d0abb4e074384ecb2fdf","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:25:41"}
{"level":"info","message":"Session message exchanged","messageCount":28,"patientResponseLength":787,"responseTime":7012,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":272,"timestamp":"2025-06-12 03:25:41"}
03:25:41 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":28,"responseTime":7012,"therapistMessageLength":272,"patientResponseLength":787}
03:27:21 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":29}
{"level":"info","message":"Using simple system prompt cache only","messageCount":29,"service":"psycho-trainer","timestamp":"2025-06-12 03:27:21"}
03:27:21 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":29,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:27:21 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163},{"index":25,"role":"assistant","hasCache":false,"contentLength":625},{"index":26,"role":"user","hasCache":false,"contentLength":272},{"index":27,"role":"assistant","hasCache":false,"contentLength":787},{"index":28,"role":"user","hasCache":false,"contentLength":186}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":29,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:27:21","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"},{"contentLength":625,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":272,"hasCache":false,"index":26,"role":"user"},{"contentLength":787,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":186,"hasCache":false,"index":28,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:27:21"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":5130,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":240,"responseTime":5412,"service":"psycho-trainer","timestamp":"2025-06-12 03:27:27"}
03:27:27 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5412,"inputTokens":5130,"outputTokens":240,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:27:27 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"d580c40cd7d4a9ffa163ddba5a5d1318142f810797c20cc88399a47d953b0f33","cacheType":"conversation"}
{"cacheKey":"d580c40cd7d4a9ffa163ddba5a5d1318142f810797c20cc88399a47d953b0f33","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:27:27"}
{"level":"info","message":"Session message exchanged","messageCount":30,"patientResponseLength":587,"responseTime":5413,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":186,"timestamp":"2025-06-12 03:27:27"}
03:27:27 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":30,"responseTime":5413,"therapistMessageLength":186,"patientResponseLength":587}
{"level":"info","message":"Using simple system prompt cache only","messageCount":31,"service":"psycho-trainer","timestamp":"2025-06-12 03:28:25"}
03:28:25 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":31}
03:28:25 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":31,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:28:25 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163},{"index":25,"role":"assistant","hasCache":false,"contentLength":625},{"index":26,"role":"user","hasCache":false,"contentLength":272},{"index":27,"role":"assistant","hasCache":false,"contentLength":787},{"index":28,"role":"user","hasCache":false,"contentLength":186},{"index":29,"role":"assistant","hasCache":false,"contentLength":587},{"index":30,"role":"user","hasCache":false,"contentLength":105}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":31,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:28:25","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"},{"contentLength":625,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":272,"hasCache":false,"index":26,"role":"user"},{"contentLength":787,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":186,"hasCache":false,"index":28,"role":"user"},{"contentLength":587,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":105,"hasCache":false,"index":30,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:28:25"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":5421,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":152,"responseTime":3583,"service":"psycho-trainer","timestamp":"2025-06-12 03:28:28"}
03:28:28 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3583,"inputTokens":5421,"outputTokens":152,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:28:28 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"2a5bcb8cacffefa028e276299fccb34389cbe08903bfdc64efd82ddc3e43cd03","cacheType":"conversation"}
{"cacheKey":"2a5bcb8cacffefa028e276299fccb34389cbe08903bfdc64efd82ddc3e43cd03","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:28:28"}
{"level":"info","message":"Session message exchanged","messageCount":32,"patientResponseLength":342,"responseTime":3585,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":105,"timestamp":"2025-06-12 03:28:28"}
03:28:28 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":32,"responseTime":3585,"therapistMessageLength":105,"patientResponseLength":342}
{"level":"info","message":"Using simple system prompt cache only","messageCount":33,"service":"psycho-trainer","timestamp":"2025-06-12 03:29:01"}
03:29:01 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":33}
03:29:01 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":33,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:29:01 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163},{"index":25,"role":"assistant","hasCache":false,"contentLength":625},{"index":26,"role":"user","hasCache":false,"contentLength":272},{"index":27,"role":"assistant","hasCache":false,"contentLength":787},{"index":28,"role":"user","hasCache":false,"contentLength":186},{"index":29,"role":"assistant","hasCache":false,"contentLength":587},{"index":30,"role":"user","hasCache":false,"contentLength":105},{"index":31,"role":"assistant","hasCache":false,"contentLength":342},{"index":32,"role":"user","hasCache":false,"contentLength":49}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":33,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:29:01","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"},{"contentLength":625,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":272,"hasCache":false,"index":26,"role":"user"},{"contentLength":787,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":186,"hasCache":false,"index":28,"role":"user"},{"contentLength":587,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":105,"hasCache":false,"index":30,"role":"user"},{"contentLength":342,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":32,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:29:01"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":5602,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":192,"responseTime":4143,"service":"psycho-trainer","timestamp":"2025-06-12 03:29:06"}
03:29:06 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4143,"inputTokens":5602,"outputTokens":192,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:29:06 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"8f24d68a33d25c683175a0bbdc5c5f27716184a3ce76831704d080da5112d082","cacheType":"conversation"}
{"cacheKey":"8f24d68a33d25c683175a0bbdc5c5f27716184a3ce76831704d080da5112d082","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:29:06"}
{"level":"info","message":"Session message exchanged","messageCount":34,"patientResponseLength":411,"responseTime":4144,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":49,"timestamp":"2025-06-12 03:29:06"}
03:29:06 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":34,"responseTime":4144,"therapistMessageLength":49,"patientResponseLength":411}
{"level":"info","message":"Using simple system prompt cache only","messageCount":35,"service":"psycho-trainer","timestamp":"2025-06-12 03:29:41"}
03:29:41 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":35}
03:29:41 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":35,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:29:41 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163},{"index":25,"role":"assistant","hasCache":false,"contentLength":625},{"index":26,"role":"user","hasCache":false,"contentLength":272},{"index":27,"role":"assistant","hasCache":false,"contentLength":787},{"index":28,"role":"user","hasCache":false,"contentLength":186},{"index":29,"role":"assistant","hasCache":false,"contentLength":587},{"index":30,"role":"user","hasCache":false,"contentLength":105},{"index":31,"role":"assistant","hasCache":false,"contentLength":342},{"index":32,"role":"user","hasCache":false,"contentLength":49},{"index":33,"role":"assistant","hasCache":false,"contentLength":411},{"index":34,"role":"user","hasCache":false,"contentLength":29}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":35,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:29:41","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"},{"contentLength":625,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":272,"hasCache":false,"index":26,"role":"user"},{"contentLength":787,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":186,"hasCache":false,"index":28,"role":"user"},{"contentLength":587,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":105,"hasCache":false,"index":30,"role":"user"},{"contentLength":342,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":32,"role":"user"},{"contentLength":411,"hasCache":false,"index":33,"role":"assistant"},{"contentLength":29,"hasCache":false,"index":34,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:29:41"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":5813,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":107,"responseTime":3096,"service":"psycho-trainer","timestamp":"2025-06-12 03:29:44"}
03:29:44 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3096,"inputTokens":5813,"outputTokens":107,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:29:44 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"90d9ad31ddba69629a4fad5286fae7f5fed12db262b06d1c6682e83378632282","cacheType":"conversation"}
{"cacheKey":"90d9ad31ddba69629a4fad5286fae7f5fed12db262b06d1c6682e83378632282","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:29:44"}
{"level":"info","message":"Session message exchanged","messageCount":36,"patientResponseLength":249,"responseTime":3098,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":29,"timestamp":"2025-06-12 03:29:44"}
03:29:44 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":36,"responseTime":3098,"therapistMessageLength":29,"patientResponseLength":249}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 03:32:36"}
03:32:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
03:32:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"112MB","heapUsed":"25MB"},"database":null,"uptime":"180min"}
{"database":null,"level":"info","memory":{"heapUsed":"25MB","rss":"112MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 03:32:36","uptime":"180min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":37,"service":"psycho-trainer","timestamp":"2025-06-12 03:33:31"}
03:33:31 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":37}
03:33:31 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":37,"hasSystemPrompt":true,"userId":32,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
03:33:31 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3552}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":468},{"index":2,"role":"user","hasCache":false,"contentLength":250},{"index":3,"role":"assistant","hasCache":false,"contentLength":628},{"index":4,"role":"user","hasCache":false,"contentLength":117},{"index":5,"role":"assistant","hasCache":false,"contentLength":837},{"index":6,"role":"user","hasCache":false,"contentLength":84},{"index":7,"role":"assistant","hasCache":false,"contentLength":822},{"index":8,"role":"user","hasCache":false,"contentLength":146},{"index":9,"role":"assistant","hasCache":false,"contentLength":767},{"index":10,"role":"user","hasCache":false,"contentLength":49},{"index":11,"role":"assistant","hasCache":false,"contentLength":847},{"index":12,"role":"user","hasCache":false,"contentLength":22},{"index":13,"role":"assistant","hasCache":false,"contentLength":810},{"index":14,"role":"user","hasCache":false,"contentLength":302},{"index":15,"role":"assistant","hasCache":false,"contentLength":756},{"index":16,"role":"user","hasCache":false,"contentLength":111},{"index":17,"role":"assistant","hasCache":false,"contentLength":651},{"index":18,"role":"user","hasCache":false,"contentLength":23},{"index":19,"role":"assistant","hasCache":false,"contentLength":767},{"index":20,"role":"user","hasCache":false,"contentLength":37},{"index":21,"role":"assistant","hasCache":false,"contentLength":682},{"index":22,"role":"user","hasCache":false,"contentLength":87},{"index":23,"role":"assistant","hasCache":false,"contentLength":633},{"index":24,"role":"user","hasCache":false,"contentLength":163},{"index":25,"role":"assistant","hasCache":false,"contentLength":625},{"index":26,"role":"user","hasCache":false,"contentLength":272},{"index":27,"role":"assistant","hasCache":false,"contentLength":787},{"index":28,"role":"user","hasCache":false,"contentLength":186},{"index":29,"role":"assistant","hasCache":false,"contentLength":587},{"index":30,"role":"user","hasCache":false,"contentLength":105},{"index":31,"role":"assistant","hasCache":false,"contentLength":342},{"index":32,"role":"user","hasCache":false,"contentLength":49},{"index":33,"role":"assistant","hasCache":false,"contentLength":411},{"index":34,"role":"user","hasCache":false,"contentLength":29},{"index":35,"role":"assistant","hasCache":false,"contentLength":249},{"index":36,"role":"user","hasCache":false,"contentLength":5}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":37,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 03:33:31","userId":32}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":468,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":250,"hasCache":false,"index":2,"role":"user"},{"contentLength":628,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":117,"hasCache":false,"index":4,"role":"user"},{"contentLength":837,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":84,"hasCache":false,"index":6,"role":"user"},{"contentLength":822,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":146,"hasCache":false,"index":8,"role":"user"},{"contentLength":767,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":10,"role":"user"},{"contentLength":847,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":22,"hasCache":false,"index":12,"role":"user"},{"contentLength":810,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":302,"hasCache":false,"index":14,"role":"user"},{"contentLength":756,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":111,"hasCache":false,"index":16,"role":"user"},{"contentLength":651,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":23,"hasCache":false,"index":18,"role":"user"},{"contentLength":767,"hasCache":false,"index":19,"role":"assistant"},{"contentLength":37,"hasCache":false,"index":20,"role":"user"},{"contentLength":682,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":87,"hasCache":false,"index":22,"role":"user"},{"contentLength":633,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":163,"hasCache":false,"index":24,"role":"user"},{"contentLength":625,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":272,"hasCache":false,"index":26,"role":"user"},{"contentLength":787,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":186,"hasCache":false,"index":28,"role":"user"},{"contentLength":587,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":105,"hasCache":false,"index":30,"role":"user"},{"contentLength":342,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":49,"hasCache":false,"index":32,"role":"user"},{"contentLength":411,"hasCache":false,"index":33,"role":"assistant"},{"contentLength":29,"hasCache":false,"index":34,"role":"user"},{"contentLength":249,"hasCache":false,"index":35,"role":"assistant"},{"contentLength":5,"hasCache":false,"index":36,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3552,"type":"text"}],"timestamp":"2025-06-12 03:33:31"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1498,"inputTokens":5927,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":71,"responseTime":3171,"service":"psycho-trainer","timestamp":"2025-06-12 03:33:34"}
03:33:34 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3171,"inputTokens":5927,"outputTokens":71,"cacheCreationTokens":0,"cacheReadTokens":1498,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
03:33:34 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"3df95febaa1df83cc06159e5e0fb9a4dbe6492ca0c6d4c76d4cbec62bc8cc0e0","cacheType":"conversation"}
{"cacheKey":"3df95febaa1df83cc06159e5e0fb9a4dbe6492ca0c6d4c76d4cbec62bc8cc0e0","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 03:33:34"}
{"level":"info","message":"Session message exchanged","messageCount":38,"patientResponseLength":165,"responseTime":3173,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","therapistMessageLength":5,"timestamp":"2025-06-12 03:33:34"}
03:33:34 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","messageCount":38,"responseTime":3173,"therapistMessageLength":5,"patientResponseLength":165}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:38:31","userId":32}
03:38:31 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":32,"sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3"}
03:38:31 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","userId":32}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:38:31","userId":32}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 03:42:36"}
03:42:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
03:42:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"20MB"},"database":null,"uptime":"190min"}
{"database":null,"level":"info","memory":{"heapUsed":"20MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 03:42:36","uptime":"190min"}
{"duration":48,"level":"info","message":"Session ended","messageCount":38,"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:43:31"}
03:43:31 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","duration":48,"messageCount":38}
03:43:31 [[31MERROR[39M]: Cannot send inactivity end notification - no chat ID found {"service":"psycho-trainer","userId":32,"sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3"}
03:43:31 [[32MINFO[39M]: Session ended due to inactivity {"service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","userId":32}
{"level":"error","message":"Cannot send inactivity end notification - no chat ID found","service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:43:31","userId":32}
{"level":"info","message":"Session ended due to inactivity","service":"psycho-trainer","sessionUuid":"2ddc0bd4-fd50-49d1-846e-34c216c9c6b3","timestamp":"2025-06-12 03:43:31","userId":32}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 03:52:36"}
03:52:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
03:52:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"21MB"},"database":null,"uptime":"200min"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 03:52:36","uptime":"200min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 04:02:36"}
04:02:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
04:02:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"21MB"},"database":null,"uptime":"210min"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 04:02:36","uptime":"210min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 04:12:36"}
04:12:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
04:12:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"22MB"},"database":null,"uptime":"220min"}
{"database":null,"level":"info","memory":{"heapUsed":"22MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 04:12:36","uptime":"220min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 04:22:36"}
04:22:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
04:22:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"22MB"},"database":null,"uptime":"230min"}
{"database":null,"level":"info","memory":{"heapUsed":"22MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 04:22:36","uptime":"230min"}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 04:32:36"}
04:32:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
04:32:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"23MB"},"database":null,"uptime":"240min"}
{"database":null,"level":"info","memory":{"heapUsed":"23MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 04:32:36","uptime":"240min"}
{"level":"info","message":"New user registered","service":"psycho-trainer","telegramId":764814673,"timestamp":"2025-06-12 04:40:38","userId":33,"username":"skorina_anastasiya"}
04:40:38 [[32MINFO[39M]: New user registered {"service":"psycho-trainer","userId":33,"telegramId":764814673,"username":"skorina_anastasiya"}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 04:40:58","userId":33}
04:40:58 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":33,"hasCustomDescription":false}
04:40:58 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
04:40:58 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":33,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
04:40:58 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 04:40:58"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 04:40:58","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 04:40:58"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":752,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":770,"responseTime":11262,"service":"psycho-trainer","timestamp":"2025-06-12 04:41:09"}
04:41:09 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":11262,"inputTokens":752,"outputTokens":770,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
04:41:09 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":107,"uuid":"fa62c170-9aaa-4d56-9751-b501cb80402c","name":"–ê–ª–∏–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞"}
{"level":"info","message":"Patient created successfully","name":"–ê–ª–∏–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞","patientId":107,"service":"psycho-trainer","timestamp":"2025-06-12 04:41:09","uuid":"fa62c170-9aaa-4d56-9751-b501cb80402c"}
{"callbackData":"invite_patient_107","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":33,"patientId":107,"patientName":"–ê–ª–∏–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞","service":"psycho-trainer","timestamp":"2025-06-12 04:41:09","userId":33}
04:41:09 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":33,"patientId":107,"patientName":"–ê–ª–∏–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞","patientCreatedBy":33,"callbackData":"invite_patient_107"}
{"data":"invite_patient_107","level":"info","message":"Processing patient invitation callback","parsedPatientId":107,"patientId":107,"service":"psycho-trainer","telegramId":764814673,"timestamp":"2025-06-12 04:41:19","userId":33}
04:41:19 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":764814673,"userId":33,"patientId":107,"data":"invite_patient_107","parsedPatientId":107}
04:41:19 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":107,"patientFound":true,"patientCreatedBy":33,"userId":33,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":33,"patientFound":true,"patientId":107,"service":"psycho-trainer","timestamp":"2025-06-12 04:41:19","userId":33}
{"level":"info","message":"Session created","patientId":107,"service":"psycho-trainer","sessionId":100,"sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","timestamp":"2025-06-12 04:41:20","userId":33}
04:41:20 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":100,"sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","userId":33,"patientId":107}
04:41:20 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
04:41:20 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:41:20 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 04:41:20"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:41:20","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:41:20"}
{"cacheCreated":true,"cacheCreationTokens":1432,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":165,"responseTime":4667,"service":"psycho-trainer","timestamp":"2025-06-12 04:41:24"}
04:41:24 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4667,"inputTokens":26,"outputTokens":165,"cacheCreationTokens":1432,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
04:41:24 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"bfc1f2266e25f687845b5273604c707f048d9331eb327985be0c45db831c5fc6","cacheType":"conversation"}
{"cacheKey":"bfc1f2266e25f687845b5273604c707f048d9331eb327985be0c45db831c5fc6","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:41:24"}
{"level":"info","message":"Patient invited and session started","patientId":107,"service":"psycho-trainer","sessionId":100,"timestamp":"2025-06-12 04:41:24","userId":33}
04:41:24 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":33,"patientId":107,"sessionId":100}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 04:42:36"}
04:42:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
04:42:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"24MB"},"database":null,"uptime":"250min"}
{"database":null,"level":"info","memory":{"heapUsed":"24MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 04:42:36","uptime":"250min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":3,"service":"psycho-trainer","timestamp":"2025-06-12 04:42:56"}
04:42:56 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":3}
04:42:56 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":3,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:42:56 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":3,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:42:56","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:42:56"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":252,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":338,"responseTime":6669,"service":"psycho-trainer","timestamp":"2025-06-12 04:43:03"}
04:43:03 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6669,"inputTokens":252,"outputTokens":338,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:43:03 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"7c4c67bd7c73ad4109fac661d4178d0263de5a3195adfb4930e4b4e4945f4152","cacheType":"conversation"}
{"cacheKey":"7c4c67bd7c73ad4109fac661d4178d0263de5a3195adfb4930e4b4e4945f4152","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:43:03"}
{"level":"info","message":"Session message exchanged","messageCount":4,"patientResponseLength":809,"responseTime":6677,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":148,"timestamp":"2025-06-12 04:43:03"}
04:43:03 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":4,"responseTime":6677,"therapistMessageLength":148,"patientResponseLength":809}
{"level":"info","message":"Using simple system prompt cache only","messageCount":5,"service":"psycho-trainer","timestamp":"2025-06-12 04:44:39"}
04:44:39 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":5}
04:44:39 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":5,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:44:39 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":5,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:44:39","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:44:39"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":620,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":265,"responseTime":5619,"service":"psycho-trainer","timestamp":"2025-06-12 04:44:45"}
04:44:45 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5619,"inputTokens":620,"outputTokens":265,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:44:45 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"03c5d1442ae3dcfd0117cdee06469b1ce046e931321a20bc211197932ce8ec31","cacheType":"conversation"}
{"cacheKey":"03c5d1442ae3dcfd0117cdee06469b1ce046e931321a20bc211197932ce8ec31","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:44:45"}
{"level":"info","message":"Session message exchanged","messageCount":6,"patientResponseLength":643,"responseTime":5620,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":69,"timestamp":"2025-06-12 04:44:45"}
04:44:45 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":6,"responseTime":5620,"therapistMessageLength":69,"patientResponseLength":643}
{"level":"info","message":"Using simple system prompt cache only","messageCount":7,"service":"psycho-trainer","timestamp":"2025-06-12 04:45:46"}
04:45:46 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":7}
04:45:46 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":7,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:45:46 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":7,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:45:46","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:45:46"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":920,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":264,"responseTime":6289,"service":"psycho-trainer","timestamp":"2025-06-12 04:45:53"}
04:45:53 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6289,"inputTokens":920,"outputTokens":264,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:45:53 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"cd58c264669f5c40fa8b10cb576fa2a28c3639653dafddbcd57e1d28fafeef0c","cacheType":"conversation"}
{"cacheKey":"cd58c264669f5c40fa8b10cb576fa2a28c3639653dafddbcd57e1d28fafeef0c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:45:53"}
{"level":"info","message":"Session message exchanged","messageCount":8,"patientResponseLength":634,"responseTime":6291,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":80,"timestamp":"2025-06-12 04:45:53"}
04:45:53 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":8,"responseTime":6291,"therapistMessageLength":80,"patientResponseLength":634}
{"level":"info","message":"Using simple system prompt cache only","messageCount":9,"service":"psycho-trainer","timestamp":"2025-06-12 04:46:48"}
04:46:48 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":9}
04:46:48 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":9,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:46:48 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":9,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:46:48","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:46:48"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":1208,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":299,"responseTime":5469,"service":"psycho-trainer","timestamp":"2025-06-12 04:46:54"}
04:46:54 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5469,"inputTokens":1208,"outputTokens":299,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:46:54 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"58eb99a97391c3e7f1f144c37dc41336fe23fba746f4e8481a0c02ac94c289d2","cacheType":"conversation"}
{"cacheKey":"58eb99a97391c3e7f1f144c37dc41336fe23fba746f4e8481a0c02ac94c289d2","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:46:54"}
{"level":"info","message":"Session message exchanged","messageCount":10,"patientResponseLength":666,"responseTime":5470,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":52,"timestamp":"2025-06-12 04:46:54"}
04:46:54 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":10,"responseTime":5470,"therapistMessageLength":52,"patientResponseLength":666}
04:49:25 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":11}
{"level":"info","message":"Using simple system prompt cache only","messageCount":11,"service":"psycho-trainer","timestamp":"2025-06-12 04:49:25"}
04:49:25 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":11,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:49:25 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":11,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:49:25","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:49:25"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":1647,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":314,"responseTime":6481,"service":"psycho-trainer","timestamp":"2025-06-12 04:49:31"}
04:49:31 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6481,"inputTokens":1647,"outputTokens":314,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:49:31 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"db494a7ad25c99862833c033d39b712b195ffa4f62dbdbf13a18fd76c4c4a085","cacheType":"conversation"}
{"cacheKey":"db494a7ad25c99862833c033d39b712b195ffa4f62dbdbf13a18fd76c4c4a085","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:49:31"}
{"level":"info","message":"Session message exchanged","messageCount":12,"patientResponseLength":746,"responseTime":6482,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":335,"timestamp":"2025-06-12 04:49:31"}
04:49:31 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":12,"responseTime":6482,"therapistMessageLength":335,"patientResponseLength":746}
{"level":"info","message":"Using simple system prompt cache only","messageCount":13,"service":"psycho-trainer","timestamp":"2025-06-12 04:50:50"}
04:50:50 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":13}
04:50:50 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":13,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:50:50 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":13,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:50:50","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:50:50"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":2015,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":299,"responseTime":6391,"service":"psycho-trainer","timestamp":"2025-06-12 04:50:56"}
04:50:56 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6391,"inputTokens":2015,"outputTokens":299,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:50:56 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"499c1086fb07cb0e9042d6526e771672712ad8dfa1cd549fbee8dd8d2da00ba2","cacheType":"conversation"}
{"cacheKey":"499c1086fb07cb0e9042d6526e771672712ad8dfa1cd549fbee8dd8d2da00ba2","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:50:56"}
{"level":"info","message":"Session message exchanged","messageCount":14,"patientResponseLength":682,"responseTime":6393,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":125,"timestamp":"2025-06-12 04:50:56"}
04:50:56 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":14,"responseTime":6393,"therapistMessageLength":125,"patientResponseLength":682}
{"level":"info","message":"Using simple system prompt cache only","messageCount":15,"service":"psycho-trainer","timestamp":"2025-06-12 04:51:27"}
04:51:27 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":15}
04:51:27 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":15,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:51:27 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":15,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:51:27","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:51:27"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":2322,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":245,"responseTime":6240,"service":"psycho-trainer","timestamp":"2025-06-12 04:51:33"}
04:51:33 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6240,"inputTokens":2322,"outputTokens":245,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:51:33 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"4d0efb630bea8474a223109caf024d7799e57e72f89fda4c33f02d50ca073cc8","cacheType":"conversation"}
{"cacheKey":"4d0efb630bea8474a223109caf024d7799e57e72f89fda4c33f02d50ca073cc8","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:51:33"}
{"level":"info","message":"Session message exchanged","messageCount":16,"patientResponseLength":574,"responseTime":6241,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":9,"timestamp":"2025-06-12 04:51:33"}
04:51:33 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":16,"responseTime":6241,"therapistMessageLength":9,"patientResponseLength":574}
{"level":"info","message":"Using simple system prompt cache only","messageCount":17,"service":"psycho-trainer","timestamp":"2025-06-12 04:52:05"}
04:52:05 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":17}
04:52:05 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":17,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:52:05 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":17,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:52:05","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:52:05"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":2581,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":298,"responseTime":6087,"service":"psycho-trainer","timestamp":"2025-06-12 04:52:11"}
04:52:11 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6087,"inputTokens":2581,"outputTokens":298,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:52:11 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"e9b56326fcbc05381004e44e6fae5a9fbfd952803faf72f70edd4b216e425f2d","cacheType":"conversation"}
{"cacheKey":"e9b56326fcbc05381004e44e6fae5a9fbfd952803faf72f70edd4b216e425f2d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:52:11"}
{"level":"info","message":"Session message exchanged","messageCount":18,"patientResponseLength":705,"responseTime":6089,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":28,"timestamp":"2025-06-12 04:52:11"}
04:52:11 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":18,"responseTime":6089,"therapistMessageLength":28,"patientResponseLength":705}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 04:52:36"}
04:52:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
04:52:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"25MB"},"database":null,"uptime":"260min"}
{"database":null,"level":"info","memory":{"heapUsed":"25MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 04:52:36","uptime":"260min"}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","timestamp":"2025-06-12 04:57:05","userId":33}
04:57:05 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":33,"sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a"}
04:57:05 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","userId":33}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","timestamp":"2025-06-12 04:57:05","userId":33}
{"level":"info","message":"Using simple system prompt cache only","messageCount":19,"service":"psycho-trainer","timestamp":"2025-06-12 04:57:43"}
04:57:43 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":19}
04:57:43 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":19,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:57:43 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":19,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:57:43","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:57:43"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":20,"service":"psycho-trainer","timestamp":"2025-06-12 04:57:47"}
04:57:47 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":20}
04:57:47 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":20,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:57:47 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":20,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:57:47","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:57:47"}
{"cacheCreated":true,"cacheCreationTokens":1432,"cacheHit":false,"cacheReadTokens":0,"inputTokens":3034,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":290,"responseTime":6573,"service":"psycho-trainer","timestamp":"2025-06-12 04:57:49"}
04:57:49 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":6573,"inputTokens":3034,"outputTokens":290,"cacheCreationTokens":1432,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
04:57:49 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"43b3f6a0bd047927c3d1eca6631707e284171f5b866f0b4378176512f8fccc1c","cacheType":"conversation"}
{"cacheKey":"43b3f6a0bd047927c3d1eca6631707e284171f5b866f0b4378176512f8fccc1c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:57:49"}
{"level":"info","message":"Session message exchanged","messageCount":21,"patientResponseLength":675,"responseTime":6574,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":356,"timestamp":"2025-06-12 04:57:50"}
04:57:50 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":21,"responseTime":6574,"therapistMessageLength":356,"patientResponseLength":675}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":3301,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":342,"responseTime":7502,"service":"psycho-trainer","timestamp":"2025-06-12 04:57:54"}
04:57:54 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7502,"inputTokens":3301,"outputTokens":342,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:57:54 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"3479db833ced41b40acaa942f4a701807600629fcfa52a1706f477fcfd4cf84c","cacheType":"conversation"}
{"cacheKey":"3479db833ced41b40acaa942f4a701807600629fcfa52a1706f477fcfd4cf84c","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:57:54"}
{"level":"info","message":"Session message exchanged","messageCount":22,"patientResponseLength":764,"responseTime":7504,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":671,"timestamp":"2025-06-12 04:57:54"}
04:57:54 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":22,"responseTime":7504,"therapistMessageLength":671,"patientResponseLength":764}
{"level":"info","message":"Using simple system prompt cache only","messageCount":23,"service":"psycho-trainer","timestamp":"2025-06-12 04:59:38"}
04:59:38 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":23}
04:59:38 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":23,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
04:59:38 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671},{"index":20,"role":"assistant","hasCache":false,"contentLength":675},{"index":21,"role":"assistant","hasCache":false,"contentLength":764},{"index":22,"role":"user","hasCache":false,"contentLength":182}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":23,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 04:59:38","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"},{"contentLength":675,"hasCache":false,"index":20,"role":"assistant"},{"contentLength":764,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":182,"hasCache":false,"index":22,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 04:59:38"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":4009,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":464,"responseTime":9526,"service":"psycho-trainer","timestamp":"2025-06-12 04:59:47"}
04:59:47 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":9526,"inputTokens":4009,"outputTokens":464,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
04:59:47 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"4030be2a242a530d9d59beec3820b0e2fb5f77a8cfd1e30490e364dd66b9e11d","cacheType":"conversation"}
{"cacheKey":"4030be2a242a530d9d59beec3820b0e2fb5f77a8cfd1e30490e364dd66b9e11d","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 04:59:47"}
{"level":"info","message":"Session message exchanged","messageCount":24,"patientResponseLength":1101,"responseTime":9527,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":182,"timestamp":"2025-06-12 04:59:47"}
04:59:47 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":24,"responseTime":9527,"therapistMessageLength":182,"patientResponseLength":1101}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 05:02:36"}
05:02:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
05:02:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"113MB","heapUsed":"26MB"},"database":null,"uptime":"270min"}
{"database":null,"level":"info","memory":{"heapUsed":"26MB","rss":"113MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 05:02:36","uptime":"270min"}
{"level":"info","message":"Using simple system prompt cache only","messageCount":25,"service":"psycho-trainer","timestamp":"2025-06-12 05:02:57"}
05:02:57 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":25}
05:02:57 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":25,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
05:02:57 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671},{"index":20,"role":"assistant","hasCache":false,"contentLength":675},{"index":21,"role":"assistant","hasCache":false,"contentLength":764},{"index":22,"role":"user","hasCache":false,"contentLength":182},{"index":23,"role":"assistant","hasCache":false,"contentLength":1101},{"index":24,"role":"user","hasCache":false,"contentLength":391}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":25,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 05:02:57","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"},{"contentLength":675,"hasCache":false,"index":20,"role":"assistant"},{"contentLength":764,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":182,"hasCache":false,"index":22,"role":"user"},{"contentLength":1101,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":391,"hasCache":false,"index":24,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 05:02:57"}
05:03:04 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":7145,"inputTokens":4641,"outputTokens":336,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
05:03:04 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"ee6ad276174b2e708671af635a57289204bab3317452d05bc263511a1186afc8","cacheType":"conversation"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":4641,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":336,"responseTime":7145,"service":"psycho-trainer","timestamp":"2025-06-12 05:03:04"}
{"cacheKey":"ee6ad276174b2e708671af635a57289204bab3317452d05bc263511a1186afc8","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:03:04"}
{"level":"info","message":"Session message exchanged","messageCount":26,"patientResponseLength":776,"responseTime":7146,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":391,"timestamp":"2025-06-12 05:03:05"}
05:03:05 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":26,"responseTime":7146,"therapistMessageLength":391,"patientResponseLength":776}
{"level":"info","message":"Using simple system prompt cache only","messageCount":27,"service":"psycho-trainer","timestamp":"2025-06-12 05:05:00"}
05:05:00 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":27}
05:05:00 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":27,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
05:05:00 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671},{"index":20,"role":"assistant","hasCache":false,"contentLength":675},{"index":21,"role":"assistant","hasCache":false,"contentLength":764},{"index":22,"role":"user","hasCache":false,"contentLength":182},{"index":23,"role":"assistant","hasCache":false,"contentLength":1101},{"index":24,"role":"user","hasCache":false,"contentLength":391},{"index":25,"role":"assistant","hasCache":false,"contentLength":776},{"index":26,"role":"user","hasCache":false,"contentLength":252}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":27,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 05:05:00","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"},{"contentLength":675,"hasCache":false,"index":20,"role":"assistant"},{"contentLength":764,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":182,"hasCache":false,"index":22,"role":"user"},{"contentLength":1101,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":391,"hasCache":false,"index":24,"role":"user"},{"contentLength":776,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":252,"hasCache":false,"index":26,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 05:05:00"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":5076,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":288,"responseTime":5980,"service":"psycho-trainer","timestamp":"2025-06-12 05:05:06"}
05:05:06 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5980,"inputTokens":5076,"outputTokens":288,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
05:05:06 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"7e081f1deae1fbe316d46385e26cbcd049d62c832b3da9c2ab27965cc24c50b7","cacheType":"conversation"}
{"cacheKey":"7e081f1deae1fbe316d46385e26cbcd049d62c832b3da9c2ab27965cc24c50b7","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:05:06"}
{"level":"info","message":"Session message exchanged","messageCount":28,"patientResponseLength":679,"responseTime":5981,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":252,"timestamp":"2025-06-12 05:05:06"}
05:05:06 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":28,"responseTime":5981,"therapistMessageLength":252,"patientResponseLength":679}
{"level":"info","message":"Using simple system prompt cache only","messageCount":29,"service":"psycho-trainer","timestamp":"2025-06-12 05:06:42"}
05:06:42 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":29}
05:06:42 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":29,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
05:06:42 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671},{"index":20,"role":"assistant","hasCache":false,"contentLength":675},{"index":21,"role":"assistant","hasCache":false,"contentLength":764},{"index":22,"role":"user","hasCache":false,"contentLength":182},{"index":23,"role":"assistant","hasCache":false,"contentLength":1101},{"index":24,"role":"user","hasCache":false,"contentLength":391},{"index":25,"role":"assistant","hasCache":false,"contentLength":776},{"index":26,"role":"user","hasCache":false,"contentLength":252},{"index":27,"role":"assistant","hasCache":false,"contentLength":679},{"index":28,"role":"user","hasCache":false,"contentLength":255}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":29,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 05:06:42","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"},{"contentLength":675,"hasCache":false,"index":20,"role":"assistant"},{"contentLength":764,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":182,"hasCache":false,"index":22,"role":"user"},{"contentLength":1101,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":391,"hasCache":false,"index":24,"role":"user"},{"contentLength":776,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":252,"hasCache":false,"index":26,"role":"user"},{"contentLength":679,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":255,"hasCache":false,"index":28,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 05:06:42"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":5465,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":274,"responseTime":5865,"service":"psycho-trainer","timestamp":"2025-06-12 05:06:48"}
05:06:48 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5865,"inputTokens":5465,"outputTokens":274,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
05:06:48 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"58d496882613e02122924e263c0eadc3f473d80e26271f0ba1d5b2800d58edcb","cacheType":"conversation"}
{"cacheKey":"58d496882613e02122924e263c0eadc3f473d80e26271f0ba1d5b2800d58edcb","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:06:48"}
{"level":"info","message":"Session message exchanged","messageCount":30,"patientResponseLength":641,"responseTime":5866,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":255,"timestamp":"2025-06-12 05:06:48"}
05:06:48 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":30,"responseTime":5866,"therapistMessageLength":255,"patientResponseLength":641}
{"level":"info","message":"Using simple system prompt cache only","messageCount":31,"service":"psycho-trainer","timestamp":"2025-06-12 05:07:33"}
05:07:33 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":31}
05:07:33 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":31,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
05:07:33 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671},{"index":20,"role":"assistant","hasCache":false,"contentLength":675},{"index":21,"role":"assistant","hasCache":false,"contentLength":764},{"index":22,"role":"user","hasCache":false,"contentLength":182},{"index":23,"role":"assistant","hasCache":false,"contentLength":1101},{"index":24,"role":"user","hasCache":false,"contentLength":391},{"index":25,"role":"assistant","hasCache":false,"contentLength":776},{"index":26,"role":"user","hasCache":false,"contentLength":252},{"index":27,"role":"assistant","hasCache":false,"contentLength":679},{"index":28,"role":"user","hasCache":false,"contentLength":255},{"index":29,"role":"assistant","hasCache":false,"contentLength":641},{"index":30,"role":"user","hasCache":false,"contentLength":57}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":31,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 05:07:33","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"},{"contentLength":675,"hasCache":false,"index":20,"role":"assistant"},{"contentLength":764,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":182,"hasCache":false,"index":22,"role":"user"},{"contentLength":1101,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":391,"hasCache":false,"index":24,"role":"user"},{"contentLength":776,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":252,"hasCache":false,"index":26,"role":"user"},{"contentLength":679,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":255,"hasCache":false,"index":28,"role":"user"},{"contentLength":641,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":57,"hasCache":false,"index":30,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 05:07:33"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":5765,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":191,"responseTime":4783,"service":"psycho-trainer","timestamp":"2025-06-12 05:07:38"}
05:07:38 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":4783,"inputTokens":5765,"outputTokens":191,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
05:07:38 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"b2d018f4d69c237db99e31e9057ad320828b1120ff182d1ba2ce305e82f1176a","cacheType":"conversation"}
{"cacheKey":"b2d018f4d69c237db99e31e9057ad320828b1120ff182d1ba2ce305e82f1176a","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:07:38"}
{"level":"info","message":"Session message exchanged","messageCount":32,"patientResponseLength":445,"responseTime":4785,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":57,"timestamp":"2025-06-12 05:07:38"}
05:07:38 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":32,"responseTime":4785,"therapistMessageLength":57,"patientResponseLength":445}
{"level":"info","message":"Using simple system prompt cache only","messageCount":33,"service":"psycho-trainer","timestamp":"2025-06-12 05:10:02"}
05:10:02 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":33}
05:10:02 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":33,"hasSystemPrompt":true,"userId":33,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
05:10:02 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3389}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36},{"index":1,"role":"assistant","hasCache":false,"contentLength":411},{"index":2,"role":"user","hasCache":false,"contentLength":148},{"index":3,"role":"assistant","hasCache":false,"contentLength":809},{"index":4,"role":"user","hasCache":false,"contentLength":69},{"index":5,"role":"assistant","hasCache":false,"contentLength":643},{"index":6,"role":"user","hasCache":false,"contentLength":80},{"index":7,"role":"assistant","hasCache":false,"contentLength":634},{"index":8,"role":"user","hasCache":false,"contentLength":52},{"index":9,"role":"assistant","hasCache":false,"contentLength":666},{"index":10,"role":"user","hasCache":false,"contentLength":335},{"index":11,"role":"assistant","hasCache":false,"contentLength":746},{"index":12,"role":"user","hasCache":false,"contentLength":125},{"index":13,"role":"assistant","hasCache":false,"contentLength":682},{"index":14,"role":"user","hasCache":false,"contentLength":9},{"index":15,"role":"assistant","hasCache":false,"contentLength":574},{"index":16,"role":"user","hasCache":false,"contentLength":28},{"index":17,"role":"assistant","hasCache":false,"contentLength":705},{"index":18,"role":"user","hasCache":false,"contentLength":356},{"index":19,"role":"user","hasCache":false,"contentLength":671},{"index":20,"role":"assistant","hasCache":false,"contentLength":675},{"index":21,"role":"assistant","hasCache":false,"contentLength":764},{"index":22,"role":"user","hasCache":false,"contentLength":182},{"index":23,"role":"assistant","hasCache":false,"contentLength":1101},{"index":24,"role":"user","hasCache":false,"contentLength":391},{"index":25,"role":"assistant","hasCache":false,"contentLength":776},{"index":26,"role":"user","hasCache":false,"contentLength":252},{"index":27,"role":"assistant","hasCache":false,"contentLength":679},{"index":28,"role":"user","hasCache":false,"contentLength":255},{"index":29,"role":"assistant","hasCache":false,"contentLength":641},{"index":30,"role":"user","hasCache":false,"contentLength":57},{"index":31,"role":"assistant","hasCache":false,"contentLength":445},{"index":32,"role":"user","hasCache":false,"contentLength":335}]}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":33,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 05:10:02","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"},{"contentLength":411,"hasCache":false,"index":1,"role":"assistant"},{"contentLength":148,"hasCache":false,"index":2,"role":"user"},{"contentLength":809,"hasCache":false,"index":3,"role":"assistant"},{"contentLength":69,"hasCache":false,"index":4,"role":"user"},{"contentLength":643,"hasCache":false,"index":5,"role":"assistant"},{"contentLength":80,"hasCache":false,"index":6,"role":"user"},{"contentLength":634,"hasCache":false,"index":7,"role":"assistant"},{"contentLength":52,"hasCache":false,"index":8,"role":"user"},{"contentLength":666,"hasCache":false,"index":9,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":10,"role":"user"},{"contentLength":746,"hasCache":false,"index":11,"role":"assistant"},{"contentLength":125,"hasCache":false,"index":12,"role":"user"},{"contentLength":682,"hasCache":false,"index":13,"role":"assistant"},{"contentLength":9,"hasCache":false,"index":14,"role":"user"},{"contentLength":574,"hasCache":false,"index":15,"role":"assistant"},{"contentLength":28,"hasCache":false,"index":16,"role":"user"},{"contentLength":705,"hasCache":false,"index":17,"role":"assistant"},{"contentLength":356,"hasCache":false,"index":18,"role":"user"},{"contentLength":671,"hasCache":false,"index":19,"role":"user"},{"contentLength":675,"hasCache":false,"index":20,"role":"assistant"},{"contentLength":764,"hasCache":false,"index":21,"role":"assistant"},{"contentLength":182,"hasCache":false,"index":22,"role":"user"},{"contentLength":1101,"hasCache":false,"index":23,"role":"assistant"},{"contentLength":391,"hasCache":false,"index":24,"role":"user"},{"contentLength":776,"hasCache":false,"index":25,"role":"assistant"},{"contentLength":252,"hasCache":false,"index":26,"role":"user"},{"contentLength":679,"hasCache":false,"index":27,"role":"assistant"},{"contentLength":255,"hasCache":false,"index":28,"role":"user"},{"contentLength":641,"hasCache":false,"index":29,"role":"assistant"},{"contentLength":57,"hasCache":false,"index":30,"role":"user"},{"contentLength":445,"hasCache":false,"index":31,"role":"assistant"},{"contentLength":335,"hasCache":false,"index":32,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3389,"type":"text"}],"timestamp":"2025-06-12 05:10:02"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":true,"cacheReadTokens":1432,"inputTokens":6095,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":168,"responseTime":3993,"service":"psycho-trainer","timestamp":"2025-06-12 05:10:06"}
05:10:06 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":3993,"inputTokens":6095,"outputTokens":168,"cacheCreationTokens":0,"cacheReadTokens":1432,"model":"claude-3-5-sonnet-20241022","cacheHit":true,"cacheCreated":false}
05:10:06 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"e44dcdaff4fb4f2eaef99bdbb642e0a5189cd24efa7adbd75e70d7885923b0ee","cacheType":"conversation"}
{"cacheKey":"e44dcdaff4fb4f2eaef99bdbb642e0a5189cd24efa7adbd75e70d7885923b0ee","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:10:06"}
{"level":"info","message":"Session message exchanged","messageCount":34,"patientResponseLength":388,"responseTime":3995,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","therapistMessageLength":335,"timestamp":"2025-06-12 05:10:06"}
05:10:06 [[32MINFO[39M]: Session message exchanged {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","messageCount":34,"responseTime":3995,"therapistMessageLength":335,"patientResponseLength":388}
{"duration":29,"level":"info","message":"Session ended","messageCount":34,"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","timestamp":"2025-06-12 05:10:38"}
05:10:38 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"6ec5a043-f97f-4653-9c75-9290cb70915a","duration":29,"messageCount":34}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 05:10:41"}
05:10:41 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
05:10:41 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":33,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
05:10:41 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":16425}]}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 05:10:41","userId":33}
{"level":"info","message":"Full request structure","messages":[{"contentLength":16425,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 05:10:41"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":6927,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":989,"responseTime":15603,"service":"psycho-trainer","timestamp":"2025-06-12 05:10:57"}
05:10:57 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":15603,"inputTokens":6927,"outputTokens":989,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
05:10:57 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"1faffe14c7210777f0a58502a3be9065bb0cc1df7c84ee1d0d33b441e5857d9d","cacheType":"analysis"}
05:10:57 [[32MINFO[39M]: Session analysis completed {"service":"psycho-trainer","sessionId":100,"rating":8}
{"cacheKey":"1faffe14c7210777f0a58502a3be9065bb0cc1df7c84ee1d0d33b441e5857d9d","cacheType":"analysis","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:10:57"}
{"level":"info","message":"Session analysis completed","rating":8,"service":"psycho-trainer","sessionId":100,"timestamp":"2025-06-12 05:10:57"}
{"averageRating":8,"level":"info","message":"User stats updated","service":"psycho-trainer","timestamp":"2025-06-12 05:10:57","totalSessions":1,"userId":33}
05:10:57 [[32MINFO[39M]: User stats updated {"service":"psycho-trainer","userId":33,"totalSessions":1,"averageRating":8}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 05:12:36"}
05:12:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
05:12:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"114MB","heapUsed":"20MB"},"database":null,"uptime":"280min"}
{"database":null,"level":"info","memory":{"heapUsed":"20MB","rss":"114MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 05:12:36","uptime":"280min"}
{"cacheKey":"1faffe14c7210777f0a58502a3be9065bb0cc1df7c84ee1d0d33b441e5857d9d","level":"info","message":"Cache hit for Claude API request","service":"psycho-trainer","timestamp":"2025-06-12 05:18:48"}
05:18:48 [[32MINFO[39M]: Cache hit for Claude API request {"service":"psycho-trainer","cacheKey":"1faffe14c7210777f0a58502a3be9065bb0cc1df7c84ee1d0d33b441e5857d9d"}
05:18:48 [[32MINFO[39M]: Session analysis completed {"service":"psycho-trainer","sessionId":100,"rating":8}
{"level":"info","message":"Session analysis completed","rating":8,"service":"psycho-trainer","sessionId":100,"timestamp":"2025-06-12 05:18:48"}
{"averageRating":8,"level":"info","message":"User stats updated","service":"psycho-trainer","timestamp":"2025-06-12 05:18:48","totalSessions":2,"userId":33}
05:18:48 [[32MINFO[39M]: User stats updated {"service":"psycho-trainer","userId":33,"totalSessions":2,"averageRating":8}
{"hasCustomDescription":false,"level":"info","message":"Generating random patient","service":"psycho-trainer","timestamp":"2025-06-12 05:20:46","userId":1}
05:20:46 [[32MINFO[39M]: Generating random patient {"service":"psycho-trainer","userId":1,"hasCustomDescription":false}
05:20:46 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
05:20:46 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":false,"userId":1,"hasCacheControl":false,"systemPromptPreview":"none","requestStructure":{"systemHasCacheControl":false,"messagesWithCache":0}}
05:20:46 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":1961}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 05:20:46"}
{"hasCacheControl":false,"hasSystemPrompt":false,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":false},"service":"psycho-trainer","systemPromptPreview":"none","timestamp":"2025-06-12 05:20:46","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":1961,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[],"timestamp":"2025-06-12 05:20:46"}
{"cacheCreated":false,"cacheCreationTokens":0,"cacheHit":false,"cacheReadTokens":0,"inputTokens":753,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":928,"responseTime":14121,"service":"psycho-trainer","timestamp":"2025-06-12 05:21:00"}
05:21:00 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":14121,"inputTokens":753,"outputTokens":928,"cacheCreationTokens":0,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":false}
05:21:00 [[32MINFO[39M]: Patient created successfully {"service":"psycho-trainer","patientId":108,"uuid":"b621eda0-d057-402b-a75e-dc7b3f8a857b","name":"–ë–æ—Ä–∏—Å –°–µ–º—ë–Ω–æ–≤–∏—á –®—Ç–µ–π–Ω–±–µ—Ä–≥"}
{"level":"info","message":"Patient created successfully","name":"–ë–æ—Ä–∏—Å –°–µ–º—ë–Ω–æ–≤–∏—á –®—Ç–µ–π–Ω–±–µ—Ä–≥","patientId":108,"service":"psycho-trainer","timestamp":"2025-06-12 05:21:00","uuid":"b621eda0-d057-402b-a75e-dc7b3f8a857b"}
{"callbackData":"invite_patient_108","level":"info","message":"Patient created, waiting for invitation","patientCreatedBy":1,"patientId":108,"patientName":"–ë–æ—Ä–∏—Å –°–µ–º—ë–Ω–æ–≤–∏—á –®—Ç–µ–π–Ω–±–µ—Ä–≥","service":"psycho-trainer","timestamp":"2025-06-12 05:21:00","userId":1}
05:21:00 [[32MINFO[39M]: Patient created, waiting for invitation {"service":"psycho-trainer","userId":1,"patientId":108,"patientName":"–ë–æ—Ä–∏—Å –°–µ–º—ë–Ω–æ–≤–∏—á –®—Ç–µ–π–Ω–±–µ—Ä–≥","patientCreatedBy":1,"callbackData":"invite_patient_108"}
{"data":"invite_patient_108","level":"info","message":"Processing patient invitation callback","parsedPatientId":108,"patientId":108,"service":"psycho-trainer","telegramId":434085347,"timestamp":"2025-06-12 05:21:03","userId":1}
05:21:03 [[32MINFO[39M]: Processing patient invitation callback {"service":"psycho-trainer","telegramId":434085347,"userId":1,"patientId":108,"data":"invite_patient_108","parsedPatientId":108}
05:21:03 [[32MINFO[39M]: Patient lookup result {"service":"psycho-trainer","patientId":108,"patientFound":true,"patientCreatedBy":1,"userId":1,"accessAllowed":true}
{"accessAllowed":true,"level":"info","message":"Patient lookup result","patientCreatedBy":1,"patientFound":true,"patientId":108,"service":"psycho-trainer","timestamp":"2025-06-12 05:21:03","userId":1}
{"level":"info","message":"Session created","patientId":108,"service":"psycho-trainer","sessionId":101,"sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","timestamp":"2025-06-12 05:21:03","userId":1}
05:21:03 [[32MINFO[39M]: Session created {"service":"psycho-trainer","sessionId":101,"sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","userId":1,"patientId":108}
05:21:03 [[32MINFO[39M]: Using simple system prompt cache only {"service":"psycho-trainer","messageCount":1}
05:21:03 [[32MINFO[39M]: Sending request to Claude API {"service":"psycho-trainer","model":"claude-3-5-sonnet-20241022","messageCount":1,"hasSystemPrompt":true,"userId":1,"hasCacheControl":{"type":"ephemeral"},"systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","requestStructure":{"systemHasCacheControl":true,"messagesWithCache":0}}
05:21:03 [[32MINFO[39M]: Full request structure {"service":"psycho-trainer","system":[{"type":"text","hasCache":true,"textLength":3708}],"messages":[{"index":0,"role":"user","hasCache":false,"contentLength":36}]}
{"level":"info","message":"Using simple system prompt cache only","messageCount":1,"service":"psycho-trainer","timestamp":"2025-06-12 05:21:03"}
{"hasCacheControl":{"type":"ephemeral"},"hasSystemPrompt":true,"level":"info","message":"Sending request to Claude API","messageCount":1,"model":"claude-3-5-sonnet-20241022","requestStructure":{"messagesWithCache":0,"systemHasCacheControl":true},"service":"psycho-trainer","systemPromptPreview":"–¢—ã –∏–≥—Ä–∞–µ—à—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏. –í–æ—Ç —Ç–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –∏ —Å–∏—Ç—É–∞—Ü–∏—è:\n\n–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û...","timestamp":"2025-06-12 05:21:03","userId":1}
{"level":"info","message":"Full request structure","messages":[{"contentLength":36,"hasCache":false,"index":0,"role":"user"}],"service":"psycho-trainer","system":[{"hasCache":true,"textLength":3708,"type":"text"}],"timestamp":"2025-06-12 05:21:03"}
{"cacheCreated":true,"cacheCreationTokens":1546,"cacheHit":false,"cacheReadTokens":0,"inputTokens":26,"level":"info","message":"Claude API response received","model":"claude-3-5-sonnet-20241022","outputTokens":209,"responseTime":5876,"service":"psycho-trainer","timestamp":"2025-06-12 05:21:09"}
05:21:09 [[32MINFO[39M]: Claude API response received {"service":"psycho-trainer","responseTime":5876,"inputTokens":26,"outputTokens":209,"cacheCreationTokens":1546,"cacheReadTokens":0,"model":"claude-3-5-sonnet-20241022","cacheHit":false,"cacheCreated":true}
05:21:09 [[32MINFO[39M]: Response cached {"service":"psycho-trainer","cacheKey":"72588ccaf25ba76909a93f348b9625b52880327aae097895fe019425f9e26654","cacheType":"conversation"}
{"cacheKey":"72588ccaf25ba76909a93f348b9625b52880327aae097895fe019425f9e26654","cacheType":"conversation","level":"info","message":"Response cached","service":"psycho-trainer","timestamp":"2025-06-12 05:21:09"}
{"level":"info","message":"Patient invited and session started","patientId":108,"service":"psycho-trainer","sessionId":101,"timestamp":"2025-06-12 05:21:09","userId":1}
05:21:09 [[32MINFO[39M]: Patient invited and session started {"service":"psycho-trainer","userId":1,"patientId":108,"sessionId":101}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 05:22:36"}
05:22:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
05:22:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"114MB","heapUsed":"21MB"},"database":null,"uptime":"290min"}
{"database":null,"level":"info","memory":{"heapUsed":"21MB","rss":"114MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 05:22:36","uptime":"290min"}
{"level":"error","message":"Cannot send inactivity warning - no chat ID found","service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","timestamp":"2025-06-12 05:26:03","userId":1}
05:26:03 [[31MERROR[39M]: Cannot send inactivity warning - no chat ID found {"service":"psycho-trainer","userId":1,"sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d"}
05:26:03 [[32MINFO[39M]: Inactivity warning triggered {"service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","userId":1}
{"level":"info","message":"Inactivity warning triggered","service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","timestamp":"2025-06-12 05:26:03","userId":1}
{"duration":10,"level":"info","message":"Session ended","messageCount":2,"service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","timestamp":"2025-06-12 05:31:03"}
05:31:03 [[32MINFO[39M]: Session ended {"service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","duration":10,"messageCount":2}
05:31:03 [[31MERROR[39M]: Cannot send inactivity end notification - no chat ID found {"service":"psycho-trainer","userId":1,"sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d"}
05:31:03 [[32MINFO[39M]: Session ended due to inactivity {"service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","userId":1}
{"level":"error","message":"Cannot send inactivity end notification - no chat ID found","service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","timestamp":"2025-06-12 05:31:03","userId":1}
{"level":"info","message":"Session ended due to inactivity","service":"psycho-trainer","sessionUuid":"33c14fca-43d8-4574-b9f7-1e691a07548d","timestamp":"2025-06-12 05:31:03","userId":1}
{"error":"no such column: now","level":"error","message":"Failed to get database stats","service":"psycho-trainer","timestamp":"2025-06-12 05:32:36"}
05:32:36 [[31MERROR[39M]: Failed to get database stats {"service":"psycho-trainer","error":"no such column: now"}
05:32:36 [[32MINFO[39M]: System status {"service":"psycho-trainer","memory":{"rss":"114MB","heapUsed":"22MB"},"database":null,"uptime":"300min"}
{"database":null,"level":"info","memory":{"heapUsed":"22MB","rss":"114MB"},"message":"System status","service":"psycho-trainer","timestamp":"2025-06-12 05:32:36","uptime":"300min"}
